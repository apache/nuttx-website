<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>uorb uorb(micro object request broker) &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
      <script src="../../../_static/doctools.js"></script>
      <script src="../../../_static/sphinx_highlight.js"></script>
      <script src="../../../_static/clipboard.min.js"></script>
      <script src="../../../_static/copybutton.js"></script>
      <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="usbmsc USB Mass Storage Device Commands" href="../usbmsc/index.html" />
    <link rel="prev" title="uniqueid “uniqueid” command" href="../uniqueid/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../12.10.0" >12.10.0</option>
    
    <option value="../../../../12.11.0" >12.11.0</option>
    
    <option value="../../../../12.12.0" >12.12.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">OS Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../audioutils/index.html">Audio Utility libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boot/index.html">Bootloader Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../benchmarks/index.html">Benchmark Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canutils/index.html">CAN Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Cryptography Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fsutils/index.html">File System Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../games/index.html">Games</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../graphics/index.html">Graphics Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../industry/index.html">Industrial Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../inertial/index.html">Inertial Libraries Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../interpreters/index.html">Interpreters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lte/index.html">LTE Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/index.html">Math Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mlearing/index.html">Machine Learning Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netutils/index.html">Network Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nsh/index.html">NuttShell (NSH)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdr/index.html">Software Define Radio Libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">System Libraries and NSH Add-Ons</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adb/index.html"><code class="docutils literal notranslate"><span class="pre">adb</span></code> ADB daemon application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../argtable3/index.html"><code class="docutils literal notranslate"><span class="pre">argtable3</span></code> ARGTABLE3 library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cdcacm/index.html"><code class="docutils literal notranslate"><span class="pre">cdcacm</span></code> USB CDC/ACM Device Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cfgdata/index.html"><code class="docutils literal notranslate"><span class="pre">cfgdata</span></code> Cfgdata Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cle/index.html"><code class="docutils literal notranslate"><span class="pre">cle</span></code> EMACS-like Command Line Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../composite/index.html"><code class="docutils literal notranslate"><span class="pre">composite</span></code> USB Composite Device Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../coredump/index.html"><code class="docutils literal notranslate"><span class="pre">coredump</span></code> Coredump tool capture system status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crimon/index.html"><code class="docutils literal notranslate"><span class="pre">critmon</span></code> Critical Section Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cu/index.html"><code class="docutils literal notranslate"><span class="pre">cu</span></code> CU minimal serial terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dd/index.html"><code class="docutils literal notranslate"><span class="pre">dd</span></code> system ‘dd’ command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debugpoint/index.html"><code class="docutils literal notranslate"><span class="pre">debugpoint</span></code> Debug Utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dhcp6c/index.html"><code class="docutils literal notranslate"><span class="pre">dhcp6c</span></code> DHCP IPv6 Address Renewal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dhcpc/index.html"><code class="docutils literal notranslate"><span class="pre">dhcpc</span></code> DHCP Address Renewal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dumpstack/index.html"><code class="docutils literal notranslate"><span class="pre">dumpstack</span></code> dumpstack tool for show the task backtrace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fastboot/index.html"><code class="docutils literal notranslate"><span class="pre">fastboot</span></code> fastbootd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fdt/index.html"><code class="docutils literal notranslate"><span class="pre">fdt</span></code> fdt utility tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flash_eraseall/index.html"><code class="docutils literal notranslate"><span class="pre">flash_eraseall</span></code> FLASH Erase-all Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gcov/index.html"><code class="docutils literal notranslate"><span class="pre">gcov</span></code> gcov tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gdbstub/index.html"><code class="docutils literal notranslate"><span class="pre">gdbstub</span></code> GDBSTUB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gprof/index.html"><code class="docutils literal notranslate"><span class="pre">gprof</span></code> GNU Profile tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hex2bin/index.html"><code class="docutils literal notranslate"><span class="pre">hex2bin</span></code> Intel HEX to binary conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hexed/index.html"><code class="docutils literal notranslate"><span class="pre">hexed</span></code> Hex editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hostname/index.html"><code class="docutils literal notranslate"><span class="pre">hostname</span></code> “hostname” command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c/index.html"><code class="docutils literal notranslate"><span class="pre">i2c</span></code> I2C Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input/index.html"><code class="docutils literal notranslate"><span class="pre">input</span></code> input tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iptables/index.html"><code class="docutils literal notranslate"><span class="pre">iptables</span></code> “iptables” command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../libuv/index.html"><code class="docutils literal notranslate"><span class="pre">libuv</span></code> libuv asynchronous I/O Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lm75/index.html"><code class="docutils literal notranslate"><span class="pre">lm75</span></code> LM75 Temperature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lzf/index.html"><code class="docutils literal notranslate"><span class="pre">lzf</span></code> LZF compression tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mdio/index.html"><code class="docutils literal notranslate"><span class="pre">mdio</span></code> PHY MDIO tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netdb/index.html"><code class="docutils literal notranslate"><span class="pre">netdb</span></code> netdb interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nsh/index.html"><code class="docutils literal notranslate"><span class="pre">nsh</span></code> NuttShell (NSH) example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ntpc/index.html"><code class="docutils literal notranslate"><span class="pre">ntpc</span></code> NTP Daemon Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxcamera/index.html"><code class="docutils literal notranslate"><span class="pre">nxcamera</span></code> NxCamera video test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxcodec/index.html"><code class="docutils literal notranslate"><span class="pre">nxcodec</span></code> NxCodec video codec test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxdiag/index.html"><code class="docutils literal notranslate"><span class="pre">nxdiag</span></code> NuttX Diagnostic Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxlooper/index.html"><code class="docutils literal notranslate"><span class="pre">nxlooper</span></code> NxLooper audio test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxplayer/index.html"><code class="docutils literal notranslate"><span class="pre">nxplayer</span></code> NxPlayer Media Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nxrecorder/index.html"><code class="docutils literal notranslate"><span class="pre">nxrecorder</span></code> NxRecorder pcm raw data Recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ofloader/index.html"><code class="docutils literal notranslate"><span class="pre">ofloader</span></code> Open flash loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ping/index.html"><code class="docutils literal notranslate"><span class="pre">ping</span></code> ICMP “ping” command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ping6/index.html"><code class="docutils literal notranslate"><span class="pre">ping6</span></code> ICMPv6 “ping6” command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../popen/index.html"><code class="docutils literal notranslate"><span class="pre">popen</span></code> popen()/pclose() Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../psmq/index.html"><code class="docutils literal notranslate"><span class="pre">psmq</span></code> Publish Subscribe Message Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ptpd/index.html"><code class="docutils literal notranslate"><span class="pre">ptpd</span></code> PTP daemon commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../readline/index.html"><code class="docutils literal notranslate"><span class="pre">readline</span></code> readline() Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sched_note/index.html"><code class="docutils literal notranslate"><span class="pre">sched_note</span></code> Scheduler monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setlogmask/index.html"><code class="docutils literal notranslate"><span class="pre">setlogmask</span></code> “setlogmask” command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi/index.html"><code class="docutils literal notranslate"><span class="pre">spi</span></code> SPI Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stackmonitor/index.html"><code class="docutils literal notranslate"><span class="pre">stackmonitor</span></code> Stack Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system/index.html"><code class="docutils literal notranslate"><span class="pre">system</span></code> System Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../taskset/index.html"><code class="docutils literal notranslate"><span class="pre">taskset</span></code> Taskset Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcpdump/index.html"><code class="docutils literal notranslate"><span class="pre">tcpdump</span></code> tcpdump command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tee/index.html"><code class="docutils literal notranslate"><span class="pre">tee</span></code> Tee Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telnet/index.html"><code class="docutils literal notranslate"><span class="pre">telnet</span></code> Telnet chat daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telnetd/index.html"><code class="docutils literal notranslate"><span class="pre">telnetd</span></code> Telnet daemon application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../termcurses/index.html"><code class="docutils literal notranslate"><span class="pre">termcurses</span></code> Terminal Curses control support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trace/index.html"><code class="docutils literal notranslate"><span class="pre">trace</span></code> Trace command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ubloxmodem/index.html"><code class="docutils literal notranslate"><span class="pre">ubloxmodem</span></code> u-blox modem configuration tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uniqueid/index.html"><code class="docutils literal notranslate"><span class="pre">uniqueid</span></code> “uniqueid” command</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">uorb</span></code> uorb(micro object request broker)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#roles"><strong>Roles</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#two-types"><strong>Two Types</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-nodes"><strong>Device Nodes</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-location"><strong>Code Location</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#introduction-to-key-data-structures"><strong>Introduction to Key Data Structures</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#topic-definition"><strong>Topic Definition</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-description"><strong>API Description</strong></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#advertise-class-apis"><strong>Advertise Class APIs</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="#subscribe-class-apis"><strong>Subscribe Class APIs</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="#normal-class-apis"><strong>Normal Class APIs</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="#tool-class-apis"><strong>Tool Class APIs</strong></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#usage-in-nuttx"><strong>Usage in NuttX</strong></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#fusion-algorithm-models"><strong>Fusion Algorithm Models</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="#subscriber-and-publisher-monitoring"><strong>Subscriber and Publisher Monitoring</strong></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#tools"><strong>Tools</strong></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#uorb-listener"><strong>uorb_listener</strong></a></li>
<li class="toctree-l5"><a class="reference internal" href="#generator-debugging-tool-instructions"><strong>Generator Debugging Tool Instructions</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../usbmsc/index.html"><code class="docutils literal notranslate"><span class="pre">usbmsc</span></code> USB Mass Storage Device Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vi/index.html"><code class="docutils literal notranslate"><span class="pre">vi</span></code> VI Work-Alike Text Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ymodem/index.html"><code class="docutils literal notranslate"><span class="pre">ymodem</span></code> YMODEM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zlib/index.html"><code class="docutils literal notranslate"><span class="pre">zlib</span></code> zlib data compression library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zmodem/index.html"><code class="docutils literal notranslate"><span class="pre">zmodem</span></code> Zmodem Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html">Host Side Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wireless/index.html">Wireless Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../index.html">System Libraries and NSH Add-Ons</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">uorb</span></code> uorb(micro object request broker)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/applications/system/uorb/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="uorb-uorb-micro-object-request-broker">
<h1><code class="docutils literal notranslate"><span class="pre">uorb</span></code> uorb(micro object request broker)<a class="headerlink" href="#uorb-uorb-micro-object-request-broker" title="Permalink to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">uORB</span> <span class="pre">(Micro</span> <span class="pre">Object</span> <span class="pre">Request</span> <span class="pre">Broker)</span></code> is a crucial middleware in the
open-source flight control system PX4. It is a pub-sub-based
message bus primarily responsible for data transmission between
multiple modules. Based on a lock-free design philosophy, uORB
internally implements Inter-Process Communication (IPC) among
tasks through shared memory and achieves low-latency data
exchange with an optimal memory footprint. Its implementation
does not rely on threads or work queues.</p>
<p>The main concepts related to uORB include <code class="docutils literal notranslate"><span class="pre">roles</span></code>, and <code class="docutils literal notranslate"><span class="pre">device</span> <span class="pre">nodes</span></code>.</p>
<section id="roles">
<h2><strong>Roles</strong><a class="headerlink" href="#roles" title="Permalink to this heading"></a></h2>
<p>In the uORB bus, there are two roles: subscribers and advertisers.
The transmitted content is referred to as a topic message, described
by its metadata (meta), including name, size, etc.</p>
<p>Each topic supports multiple instances, with the advertiser frequency
being the sampling rate (interval) and the maximum publication delay
being the batch latency.</p>
<p>For example, if the accelerometer sensor has a sampling rate of 50Hz
and a maximum publication delay of 100ms, the hardware generates an
interrupt every 100ms, publishing 5 data points each time (100/(1000/50)).</p>
</section>
<section id="two-types">
<h2><strong>Two Types</strong><a class="headerlink" href="#two-types" title="Permalink to this heading"></a></h2>
<p>Additionally, NuttX categorizes topics into two types:
<strong>notification</strong> topics and <strong>general</strong> topics.</p>
<p>Subscribers to <strong>notification</strong> topics are not concerned with the presence
of an advertiser or whether a publication has occurred; they directly
obtain the current state.When an application subscribes, it directly
obtains the latest data from the current device node as the current state.</p>
<p>Subscribers to <strong>general</strong> topics are not concerned with past states;
the data they obtain must be current or future occurrences.
For example, with an accelerometer sensor, an application only cares
about the data reported by the next data ready interrupt from the sensor,
rather than data from a past moment.</p>
<p>To publish <strong>notification</strong> topic messages, APIs with the <strong>persist</strong> suffix
are used for topic publication, and subscriber behavior is consistent with
that of <strong>general</strong> topics.</p>
</section>
<section id="device-nodes">
<h2><strong>Device Nodes</strong><a class="headerlink" href="#device-nodes" title="Permalink to this heading"></a></h2>
<p>Each topic being published or subscribed to corresponds to a character
device node, with subscribers and advertisers sharing data through an internal
circular buffer. In implementation, a caller who opens a device node in O_WRONLY
mode is considered an advertiser, and one who opens it in O_RDONLY mode is
considered a subscriber.</p>
<p>The advertiser writes to the node to publish data, while the subscriber reads
from the node to subscribe to data. Both parties can use poll to monitor the
node to receive events of interest. Control over device nodes by advertisers
and subscribers is achieved through ioctl operations.</p>
</section>
<section id="code-location">
<h2><strong>Code Location</strong><a class="headerlink" href="#code-location" title="Permalink to this heading"></a></h2>
<p>The directory apps/system/uorb contains the uORB wrapper, unit tests, physical
sensor topic definitions, and the uorb_listener tool.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>├── Kconfig
├── listener.c   // Implementation of uorb_listener.c
├── Make.defs
├── Makefile
├── sensor       // Definitions for physical sensor topics
│   ├── accel.c
│   ├── accel.h
│   ├── baro.c
│   ├── baro.h
│   ├── cap.c
│   ├── cap.h
│   ├── ...c
│   ├── tvoc.c
│   ├── tvoc.h
│   ├── uv.c
│   └── uv.h
├── test
│   ├── unit_test.c   // Unit tests for uORB
│   ├── utility.c
│   └── utility.h
└── uORB
    ├── uORB.c   // Implementation of uORB wrapper
    └── uORB.h
</pre></div>
</div>
</section>
<section id="introduction-to-key-data-structures">
<h2><strong>Introduction to Key Data Structures</strong><a class="headerlink" href="#introduction-to-key-data-structures" title="Permalink to this heading"></a></h2>
<p>Each uORB topic corresponds to a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">orb_metadata</span></code> structure, which is used to
describe the metadata of the topic, including the name o_name, the message size o_size,
and the debug format pointer o_format.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct orb_metadata
{
  FAR const char   *o_name;       // Name of the topic
  uint16_t          o_size;       // Size of the message
  #ifdef CONFIG_DEBUG_UORB
  FAR const char   *o_format;     //  Format string used for structure input and output
  #endif
};
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>typedef FAR const struct orb_metadata *orb_id_t; // Pointer to orb_metadata as an identifier for uORB topics
</pre></div>
</div>
<p>After advertising or subscribing to each uORB topic, the caller can obtain the topic’s
state by calling orb_get_state, which includes the current maximum publication frequency
max_frequency, the minimum batch interval min_batch_interval, the length of the internal
circular queue queue_size, the number of subscribers nsubscribers, and the generation index
for the main thread generation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct orb_state
{
  uint32_t max_frequency;     // Maximum publication frequency
  uint32_t min_batch_interval;// Minimum batch interval
  uint32_t queue_size;        // Length of the internal circular queue
  uint32_t nsubscribers;      // Number of subscribers
  uint64_t generation;        // Generation index for the main thread
};
</pre></div>
</div>
<p>uORB supports the instantiation of a topic into multiple entities, each with a corresponding
instance number starting from 0 and incrementing. struct orb_object contains information about
one such entity: its metadata meta and instance number instance.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct orb_object
{
  orb_id_t meta;      // Pointer to the metadata of the topic
  int      instance;  // Instance number of the topic entity
};
</pre></div>
</div>
</section>
<section id="topic-definition">
<h2><strong>Topic Definition</strong><a class="headerlink" href="#topic-definition" title="Permalink to this heading"></a></h2>
<p>A large number of uORB topics are defined in PX4 at <a class="reference external" href="https://docs.px4.io/main/en/middleware/uorb_graph.html">https://docs.px4.io/main/en/middleware/uorb_graph.html</a>.</p>
<p>Defining a new topic involves creating the topic’s data structure, declaring a global variable for
the topic’s metadata, and optionally defining a debug output function for the topic’s data.
Three macros are frequently used in the definition process:</p>
<p><code class="docutils literal notranslate"><span class="pre">ORB_ID</span></code>: Used to obtain the global metadata handle for the topic.</p>
<p><code class="docutils literal notranslate"><span class="pre">ORB_DECLARE</span></code>: Used to declare the global metadata for the topic.</p>
<p><code class="docutils literal notranslate"><span class="pre">ORB_DEFINE</span></code>: Used to define the global metadata for the topic.</p>
</section>
<section id="api-description">
<h2><strong>API Description</strong><a class="headerlink" href="#api-description" title="Permalink to this heading"></a></h2>
<p>The uORB has a total of 30 APIs, which can be categorized into four groups: advertiser
class, subscriber class, general API class, and tool class. Almost all of these APIs
operate using file descriptors, so special attention should be paid to avoid using
them across processes (tasks).</p>
<section id="advertise-class-apis">
<h3><strong>Advertise Class APIs</strong><a class="headerlink" href="#advertise-class-apis" title="Permalink to this heading"></a></h3>
<section id="advertise-topic-for-notification-types">
<h4><strong>Advertise Topic for Notification Types</strong><a class="headerlink" href="#advertise-topic-for-notification-types" title="Permalink to this heading"></a></h4>
<p>This category includes a total of 5 APIs, among which orb_advertise,
orb_advertise_queue, and orb_advertise_multi are internally implemented based on
orb_advertise_multi_queue. They are permutations and combinations of the parameters
data, instance, and queue_size.</p>
<p><code class="docutils literal notranslate"><span class="pre">orb_advertise_multi_queue</span></code> requires specifying the topic metadata meta, the initial
data data, the instance instance, and the internal queue size when advertising a
topic. Upon success, it returns a file descriptor; upon failure, it returns -1 and
sets errno.</p>
<p>The instance is a pointer to an input parameter. If it is NULL, the instance will
increment from its existing value. Otherwise, the content pointed to by *instance
will be used for advertising.</p>
<p>Multiple advertisements for the same topic instance are supported, allowing for
multiple publishers on a single device node.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_advertise_multi_queue(FAR const struct orb_metadata *meta,
                              FAR const void *data,
                              FAR int *instance,
                              unsigned int queue_size);

static inline int orb_advertise(FAR const struct orb_metadata *meta,
                                FAR const void *data)
{
  int instance = 0;

  return orb_advertise_multi_queue(meta, data, &amp;instance, 1);
}

static inline int orb_advertise_queue(FAR const struct orb_metadata *meta,
                                      FAR const void *data,
                                      unsigned int queue_size)
{
  int instance = 0;

  return orb_advertise_multi_queue(meta, data, &amp;instance, queue_size);
}

static inline int orb_advertise_multi(FAR const struct orb_metadata *meta,
                                      FAR const void *data,
                                      FAR int *instance)
{
  return orb_advertise_multi_queue(meta, data, instance, 1);
}
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">orb_advertise_multi_queue_persist</span></code> shares the same parameters with
<code class="docutils literal notranslate"><span class="pre">orb_advertise_multi_queue</span></code>, but with a different internal implementation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_advertise_multi_queue_persist(FAR const struct orb_metadata *meta,
                                      FAR const void *data,
                                      FAR int *instance,
                                      unsigned int queue_size);
</pre></div>
</div>
</section>
<section id="unadvertise-a-topic">
<h4><strong>Unadvertise a Topic</strong><a class="headerlink" href="#unadvertise-a-topic" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">orb_unadvertise</span></code> function takes the file descriptor fd returned by a topic
advertisement as its parameter and internally calls orb_close to achieve unadvertisement.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static inline int orb_unadvertise(int fd)
{
  return orb_close(fd);
}
</pre></div>
</div>
</section>
<section id="publishing-topic-data">
<h4><strong>Publishing Topic Data</strong><a class="headerlink" href="#publishing-topic-data" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">orb_publish</span></code> function takes the topic metadata meta, the advertisement handle fd,
and a pointer to the data data to be published as its parameters. It can only publish
one piece of data each time. In contrast, orb_publish_multi allows batch publishing.
The return values of the two functions differ: orb_publish returns 0 upon success and
-1 upon failure, setting errno in the latter case, while orb_publish_multi returns the
length of data published upon success.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ssize_t orb_publish_multi(int fd, FAR const void *data, size_t len);

static inline int orb_publish(FAR const struct orb_metadata *meta,
                              int fd, FARorb_close const void *data)
{
  int ret;

  ret = orb_publish_multi(fd, data, meta-&gt;o_size);
  return ret == meta-&gt;o_size ? 0 : -1;
}

static inline int orb_publish_auto(FAR const struct orb_metadata *meta,
                                   FAR int *fd, FAR const void *data,
                                   FAR int *instance)；
</pre></div>
</div>
</section>
</section>
<section id="subscribe-class-apis">
<h3><strong>Subscribe Class APIs</strong><a class="headerlink" href="#subscribe-class-apis" title="Permalink to this heading"></a></h3>
<section id="subscribe-to-a-topic">
<h4><strong>Subscribe to a Topic</strong><a class="headerlink" href="#subscribe-to-a-topic" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">orb_subscribe</span></code> function is internally implemented by orb_subscribe_multi,
with the main difference between them being whether an instance needs to be
specified for the subscription. Upon successful subscription, it returns an
fd (file descriptor); upon failure, it returns -1 and sets errno.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_subscribe_multi(FAR const struct orb_metadata *meta,
                        unsigned instance);

static inline int orb_subscribe(FAR const struct orb_metadata *meta)
{
  return orb_subscribe_multi(meta, 0);
}
</pre></div>
</div>
</section>
<section id="unsubscribe">
<h4><strong>Unsubscribe</strong><a class="headerlink" href="#unsubscribe" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">orb_unsubscribe</span></code> function takes the fd (file descriptor) returned by a
subscription as its parameter and internally calls orb_close to unsubscribe.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static inline int orb_unsubscribe(int fd)
{
  return orb_close(fd);
}
</pre></div>
</div>
</section>
<section id="retrieve-data">
<h4><strong>Retrieve Data</strong><a class="headerlink" href="#retrieve-data" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">orb_copy</span></code> function takes the topic metadata meta, the subscription handle
fd, and a pointer to the buffer buffer where the data will be stored as its
parameters. It can only read one piece of data each time. In contrast,
orb_copy_multi allows batch reading. The return values of the two functions
differ: orb_copy returns 0 upon success and -1 upon failure, setting errno in
the latter case, while orb_copy_multi returns the length of data read upon success.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ssize_t orb_copy_multi(int fd, FAR void *buffer, size_t len);

static inline int orb_copy(FAR const struct orb_metadata *meta,
                           int fd, FAR void *buffer)
{
  int ret;

  ret = orb_copy_multi(fd, buffer, meta-&gt;o_size);
  return ret == meta-&gt;o_size ? 0 : -1;
}
</pre></div>
</div>
</section>
</section>
<section id="normal-class-apis">
<h3><strong>Normal Class APIs</strong><a class="headerlink" href="#normal-class-apis" title="Permalink to this heading"></a></h3>
<section id="open-close-device-nodes">
<h4><strong>Open/Close Device Nodes</strong><a class="headerlink" href="#open-close-device-nodes" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_open</span></code> is used to open a character device node. The parameters include name
(the topic name), instance (the topic instance index), and flags (the open mode).
Subscribers typically open with O_RDONLY, publishers with O_WRONLY, and a third
party can open the node with “0” to retrieve device node information.
It corresponds to <code class="docutils literal notranslate"><span class="pre">orb_close</span></code> for closing the node.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_open(FAR const char *name, int instance, int flags);
int orb_close(int fd);
</pre></div>
</div>
</section>
<section id="retrieve-topic-status">
<h4><strong>Retrieve Topic Status</strong><a class="headerlink" href="#retrieve-topic-status" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_get_state</span></code> this function or method is not explicitly named in your list but
is implied by the context.)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_get_state(int fd, FAR struct orb_state *state);
</pre></div>
</div>
</section>
<section id="check-for-updates">
<h4><strong>Check for Updates</strong><a class="headerlink" href="#check-for-updates" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_check</span></code> is used to check if there is new data for the current topic.
It takes a pointer to an updated variable as an input parameter.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_check(int fd, FAR bool *updated);
</pre></div>
</div>
</section>
<section id="control-the-topic">
<h4><strong>Control the Topic</strong><a class="headerlink" href="#control-the-topic" title="Permalink to this heading"></a></h4>
<p>Applications can use <code class="docutils literal notranslate"><span class="pre">orb_ioctl</span></code> to control physical sensor topics,
such as adjusting the range, resolution, etc., of accelerometers,
gyroscopes, magnetometers, and PPG sensors.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_ioctl(int fd, int cmd, unsigned long arg);
</pre></div>
</div>
</section>
<section id="set-get-topic-batch-parameters">
<h4><strong>Set/Get Topic Batch Parameters</strong><a class="headerlink" href="#set-get-topic-batch-parameters" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_set_batch_interval</span></code>/<code class="docutils literal notranslate"><span class="pre">orb_get_batch_interval</span></code> are used to set/get
the maximum delay reporting time for a topic, in microseconds (μs).
This API is only applicable to physical sensors with hardware FIFO support.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_set_batch_interval(int fd, unsigned batch_interval);
int orb_get_batch_interval(int fd, FAR unsigned *batch_interval);
</pre></div>
</div>
</section>
<section id="set-get-topic-interval-parameters">
<h4><strong>Set/Get Topic Interval Parameters</strong><a class="headerlink" href="#set-get-topic-interval-parameters" title="Permalink to this heading"></a></h4>
<p>Frequency and sampling interval are reciprocals of each other.
<code class="docutils literal notranslate"><span class="pre">orb_set_interval</span></code>/<code class="docutils literal notranslate"><span class="pre">orb_get_interval</span></code> are used to set/get the sampling rate,
in microseconds (μs), while <code class="docutils literal notranslate"><span class="pre">orb_set_frequency</span></code>/<code class="docutils literal notranslate"><span class="pre">orb_get_frequency</span></code> are used to
set/get the sampling frequency, in Hertz (Hz).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_set_interval(int fd, unsigned interval);
int orb_get_interval(int fd, FAR unsigned *interval);
static inline int orb_set_frequency(int fd, unsigned frequency)
static inline int orb_get_frequency(int fd, FAR unsigned *frequency)
</pre></div>
</div>
</section>
<section id="orb-flush">
<h4><strong>orb_flush</strong><a class="headerlink" href="#orb-flush" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_flush</span></code> supports the flush operation for topics with hardware FIFO. After the flush
operation is completed, a POLLPRI event will be generated for the fd, and
then orb_get_events can be called to retrieve the corresponding event.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_flush(int fd);
</pre></div>
</div>
</section>
<section id="orb-get-events">
<h4><strong>orb_get_events</strong><a class="headerlink" href="#orb-get-events" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_get_events</span></code> retrieves events. Currently, the supported events include ORB_EVENT_FLUSH_COMPLETE.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_get_events(int fd, FAR unsigned int *events);
</pre></div>
</div>
</section>
</section>
<section id="tool-class-apis">
<h3><strong>Tool Class APIs</strong><a class="headerlink" href="#tool-class-apis" title="Permalink to this heading"></a></h3>
<section id="check-if-a-publisher-exists-for-a-topic">
<h4><strong>Check if a Publisher Exists for a Topic</strong><a class="headerlink" href="#check-if-a-publisher-exists-for-a-topic" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_exists</span></code> is used to check if there is a publisher for a topic. It takes the topic
metadata meta and the topic instance index instance as parameters. It returns 0 if the
check is successful and an ERROR code if it fails.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_exists(FAR const struct orb_metadata *meta, int instance);
</pre></div>
</div>
</section>
<section id="timestamp-calculation">
<h4><strong>Timestamp Calculation</strong><a class="headerlink" href="#timestamp-calculation" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_absolute_time</span></code> returns the current timestamp.
<code class="docutils literal notranslate"><span class="pre">orb_elapsed_time</span></code> returns the difference between two timestamps.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>orb_abstime orb_absolute_time(void);
static inline orb_abstime orb_elapsed_time(FAR const orb_abstime *then)
</pre></div>
</div>
</section>
<section id="get-the-number-of-topic-instances">
<h4><strong>Get the Number of Topic Instances</strong><a class="headerlink" href="#get-the-number-of-topic-instances" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_group_count</span></code> returns the number of instances for a specific topic.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int orb_group_count(FAR const struct orb_metadata *meta);
</pre></div>
</div>
</section>
<section id="get-topic-metadata">
<h4><strong>Get Topic Metadata</strong><a class="headerlink" href="#get-topic-metadata" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">orb_get_meta</span></code> is used to retrieve a pointer to the topic metadata by using a string.
Currently, this function has significant limitations: for non-physical sensors,
you must explicitly subscribe to or advertise the topic to successfully obtain
the metadata pointer.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FAR const struct orb_metadata *orb_get_meta(FAR const char *name);
</pre></div>
</div>
<p>These tool class APIs provide additional utilities for working with ORB
(Object Request Broker) topics, allowing for tasks such as checking the existence
of publishers, calculating timestamps, retrieving the number of topic instances, and
accessing topic metadata. These functions are crucial for managing and interacting with
topics in an ORB-based system.</p>
</section>
</section>
</section>
<section id="usage-in-nuttx">
<h2><strong>Usage in NuttX</strong><a class="headerlink" href="#usage-in-nuttx" title="Permalink to this heading"></a></h2>
<p>In NuttX, all physical sensor drivers automatically advertise their topics upon
system startup. The sensors are then controlled to turn on or off based on whether
any applications have subscribed to the related topics, enabling intelligent
low-power consumption management.</p>
<p>All virtual topics (algorithms, states, cross-core topics) automatically register
character device nodes upon their first publication or subscription. Once registered,
these nodes remain active even if the publication or subscription is later canceled.</p>
<p>When subscribers and publishers in an application need to monitor each other’s status,
the poll function is used for status notifications. Subscribers and publishers synchronize
their status via the POLLPRI signal. When a publisher publishes data, a POLLIN event is
generated to notify all subscribers. POLLPRI events are triggered in the following scenarios:</p>
<p>When a new subscriber or publisher joins the topic.</p>
<p>When a subscriber sets the sampling rate or batch parameters for the topic.</p>
<p>When a subscriber or publisher leaves the topic.</p>
<p>Whenever a POLLPRI event occurs, you can call orb_get_state to retrieve the current status
of the topic, including the maximum publishing frequency (max_frequency), the minimum batch
interval (min_batch_interval), the internal ring buffer size (queue_size), the number of
subscribers (nsubscribers), and the data generation count.</p>
<p>In summary, if subscribers and publishers are interdependent, it is recommended to use a
polling or libuv-based programming structure. If they are independent, a notification-based
topic approach is preferred.</p>
<section id="fusion-algorithm-models">
<h3><strong>Fusion Algorithm Models</strong><a class="headerlink" href="#fusion-algorithm-models" title="Permalink to this heading"></a></h3>
<p>If multiple applications are interconnected, with one serving as
the input and another as the output, shared topics can be established to facilitate decoupling
between applications. For example, a calibration algorithm module can subscribe to an uncalibrated
sensor data topic and publish calibrated sensor data. A motion algorithm module can subscribe to
both calibrated and uncalibrated data to generate algorithmic topics, with multiple applications
ignoring each other’s existence.</p>
</section>
<section id="subscriber-and-publisher-monitoring">
<h3><strong>Subscriber and Publisher Monitoring</strong><a class="headerlink" href="#subscriber-and-publisher-monitoring" title="Permalink to this heading"></a></h3>
<p>Subscribers can check for update events via POLLIN events,
while publishers can monitor changes in subscriber count, sampling rates, and other statuses via
POLLPRI events. The optimal status can be obtained using orb_get_state.
By leveraging these mechanisms, NuttX provides a robust framework for efficient data communication
and management in an embedded system environment.</p>
</section>
</section>
<section id="tools">
<h2><strong>Tools</strong><a class="headerlink" href="#tools" title="Permalink to this heading"></a></h2>
<section id="uorb-listener">
<h3><strong>uorb_listener</strong><a class="headerlink" href="#uorb-listener" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span></code> is a testing tool located above the uORB layer. It calls the uORB API to subscribe
to and obtain topic information, further verifying whether the underlying system is functioning
correctly. uorb_listener only monitors topics that have been advertised. The entire listening process
can be paused using Ctrl+C. Usage instructions can be viewed by running uorb_listener -h.
Below are some commonly used cases:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>listener &lt;command&gt; [arguments...]
 Commands:
        &lt;topics_name&gt; Topic name. Multi name are separated by &#39;,&#39;
        [-h       ]  Listener commands help
        [-f       ]  Record uorb data to file
        [-n &lt;val&gt; ]  Number of messages, default: 0
        [-r &lt;val&gt; ]  Subscription rate (unlimited if 0), default: 0
        [-b &lt;val&gt; ]  Subscription maximum report latency in us(unlimited if 0), default: 0
        [-t &lt;val&gt; ]  Time of listener, in seconds, default: 5
        [-T       ]  Top, continuously print updating objects
        [-l       ]  Top only execute once.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span></code> continuously prints information for all topics at the frequency of topic publications.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">-f</span></code> continuously saves information for all topics to /data/uorb/<strong>*/*</strong>.csv at the frequency of
topic publications. If the -f flag is used and the file cannot be created, the data will be output to the terminal instead.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">-f</span> <span class="pre">sensor_accel0</span></code> continuously saves information for the specified topic to a file at the frequency of topic publications.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">n</span> <span class="pre">1</span></code> prints a snapshot of the current information for all topics.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">n</span></code> num prints information for all topics until num messages have been received, at the frequency of topic publications.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">r</span> <span class="pre">1</span></code> prints information for all topics at a frequency of 1Hz.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">r</span> <span class="pre">x</span> <span class="pre">n</span></code> num prints information for all topics at a frequency of xHz until num messages have been received.</p>
<p><code class="docutils literal notranslate"><span class="pre">uorb_listener</span> <span class="pre">[specified_topic_list]</span> <span class="pre">r</span> <span class="pre">1</span></code> continuously prints information for the specified topics at a
frequency of 1Hz. In the specified topic list, topics are separated by commas (,). Each entry can be a topic name,
such as sensor_accel, which will print information for all instances of that topic. It can also be a topic instance name,
such as sensor_mag0, which will only print information for that specific topic instance.</p>
<p>This tool provides a flexible way to monitor and log uORB topic data, aiding in the debugging and verification of the system’s behavior.</p>
</section>
<section id="generator-debugging-tool-instructions">
<h3><strong>Generator Debugging Tool Instructions</strong><a class="headerlink" href="#generator-debugging-tool-instructions" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">uorb_generator</span></code> this tool can be used in conjunction with <code class="docutils literal notranslate"><span class="pre">uorb_listener</span></code>.</p>
<p>Before using the tool, it is necessary to set the CONFIG_LINE_MAX parameter to a sufficiently long length to ensure that the terminal
can accept complete input data. A recommendation is to set it to 256 or 512.</p>
<p>Incoming data can be printed via uorb_listener or concatenated manually using format information, but it must be
ensured that the string and struct information are consistent. Topics saved using uorb_listener -f can be pulled and
imported into the simulator for debugging (mount -t hostfs -o fs=/home/xxx/ /data).</p>
<p><strong>Parameter Description:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">-f</span></code> specifies the path to the input playback file.
<code class="docutils literal notranslate"><span class="pre">-n</span></code> specifies the number of times to playback the data. This option is only effective when -s is enabled.
<code class="docutils literal notranslate"><span class="pre">-r</span></code> specifies the playback frequency (in HZ, e.g., 5hz, 20hz). This option is only effective when -s is enabled.
<code class="docutils literal notranslate"><span class="pre">-t</span></code> specifies the topic for playback, with the option to specify a specific instance value afterward.
<code class="docutils literal notranslate"><span class="pre">-s</span></code> enables playback of simulated (fake) data, generating struct data from input entered via the terminal. It will modify the timestamp of the current data to real-time. Simulated data should be placed at the end of the entire command.</p>
<p>By following these instructions, users can effectively utilize the Generator debugging tool in conjunction with uorb_listener for system debugging and verification.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The tool publishes topic data via uorb.
Notice:LINE_MAX must be set to 128 or more.

generator &lt;command&gt; [arguments...]
  Commands:
    &lt;topics_name&gt; The playback topic name.
    [-h       ]  Listener commands help.
    [-f &lt;val&gt; ]  File path to be played back(absolute path).
    [-n &lt;val&gt; ]  Number of playbacks(fake model), default: 1
    [-r &lt;val&gt; ]  The rate for playing fake data is only valid when parameter &#39;s&#39; is used.
                 default:10hz.
    [-s &lt;val&gt; ]  Playback fake data.
    [-t &lt;val&gt; ]  Playback topic.
     e.g.:
        sim - sensor_accel0:
          uorb_generator -n 100 -r 5 -s -t sensor_accel0 timestamp:23191100,x:0.1,y:9.7,z:0.81,temperature:22.15

        sim - sensor_baro0:
          uorb_generator -n 100 -r 5 -s -t sensor_baro0 timestamp:23191100,pressure:999.12,temperature:26.34

        fies - sensor_accel1
        uorb_generator -f /data/uorb/20240823061723/sensor_accel0.csv -t sensor_accel1
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../uniqueid/index.html" class="btn btn-neutral float-left" title="uniqueid “uniqueid” command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../usbmsc/index.html" class="btn btn-neutral float-right" title="usbmsc USB Mass Storage Device Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>