<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AVR128DA28 on breadboard &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
      <script src="../../../../../_static/clipboard.min.js"></script>
      <script src="../../../../../_static/copybutton.js"></script>
      <script src="../../../../../_static/design-tabs.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="GPIO interrupt multiplexer" href="../../docs/gpio_intr_mux.html" />
    <link rel="prev" title="Microchip DA/DB family" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../../../12.10.0" >12.10.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Microchip AVR</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../at32uc3/index.html">Microchip AT32UC3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../at90usb/index.html">Microchip AT90USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../atmega/index.html">Microchip Atmega</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Microchip DA/DB family</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#supported-chips">Supported chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#clock-configuration">Clock Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#system-timer">System Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#peripheral-support">Peripheral Support</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">AVR128DA28 on breadboard</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#other-documents">Other documents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../common/context-switch-notes.html">Notes on AVR context switch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_linux.html">Network Support on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_vpnkit.html">Network support with VPNKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tricore/index.html">TriCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Microchip AVR</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Microchip DA/DB family</a></li>
      <li class="breadcrumb-item active">AVR128DA28 on breadboard</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/platforms/avr/avrdx/boards/breadxavr/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="avr128da28-on-breadboard">
<h1>AVR128DA28 on breadboard<a class="headerlink" href="#avr128da28-on-breadboard" title="Permalink to this heading"></a></h1>
<p>This is a AVR128DA28 stuck into a breadboard for the purpose
of developing this port for NuttX. It can also be used as a reference
for making ports for other boards.</p>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>AVR128DA28</p></li>
</ul>
</div></blockquote>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<section id="nsh">
<h3>nsh<a class="headerlink" href="#nsh" title="Permalink to this heading"></a></h3>
<p>Basic testing configuration. When <span class="menuselection">Library Routines ‣ Support Builtin Applications</span>
and <span class="menuselection">Application Configuration ‣ NSH Library ‣ Enable built-in applications</span>
are both set, allows adding and execution of other applications.</p>
</section>
</section>
<section id="peripheral-usage">
<h2>Peripheral usage<a class="headerlink" href="#peripheral-usage" title="Permalink to this heading"></a></h2>
<section id="serial-ports">
<h3>Serial ports<a class="headerlink" href="#serial-ports" title="Permalink to this heading"></a></h3>
<p>The board does not need any special configuration for serial port usage.
Everything is set in architecture configuration
in <span class="menuselection">System Type ‣ AVR DA/DB Peripheral Selections</span></p>
</section>
<section id="buttons">
<h3>Buttons<a class="headerlink" href="#buttons" title="Permalink to this heading"></a></h3>
<p>The board supports 4 buttons controlled by input button driver.
These are connected to I/O pins A2 (button 0), A3 (button 1), C2 (button 2) and C3 (button 3.)</p>
<p>To be able to use them, it is needed to:</p>
<blockquote>
<div><ul class="simple">
<li><p>enable <span class="menuselection">Board Selection ‣ Board button support</span></p></li>
<li><p>enable <span class="menuselection">Button interrupt support</span> in the same section</p></li>
<li><p>enable <span class="menuselection">Device Drivers ‣ Input Device Support ‣ Button Inputs</span></p></li>
<li><p>enable <span class="menuselection">Generic Lower Half Button Driver</span> in the same section</p></li>
<li><p>enable <span class="menuselection">System Type ‣  GPIO ISR multiplexer</span></p></li>
<li><p>enable <span class="menuselection">RTOS Features ‣ RTOS hooks ‣ Custom board early initialization</span></p></li>
<li><p>enable <span class="menuselection">Board Selection ‣ Enable button input driver for GPIO pins</span></p></li>
</ul>
</div></blockquote>
<p>Buttons can be used with the <code class="docutils literal notranslate"><span class="pre">Buttons</span> <span class="pre">driver</span> <span class="pre">example</span></code> example application.
Configure <span class="menuselection">Number of Buttons in the Board</span> to 4, default
<span class="menuselection">Button device path</span> <code class="docutils literal notranslate"><span class="pre">/dev/buttons</span></code> is correct.</p>
<p>The board code depends on GPIO ISR multiplexer - see
<code class="docutils literal notranslate"><span class="pre">Documentation/platforms/avr/avrdx/gpio_intr_mux.rst</span></code> for details.</p>
<p>Note that the board configures the I/O pins reserved for buttons to invert
logical value, ie. logical zero applied to the pin is internally read
as logical one and vice-versa. This is to conform to button input driver’s
expectation that requires pressed button to read as logical 1 and depressed
button as logical 0 while allowing the board to operate without external
components (internal pull-ups are used.)</p>
</section>
</section>
<section id="compile-flash">
<h2>Compile &amp; Flash<a class="headerlink" href="#compile-flash" title="Permalink to this heading"></a></h2>
<p>All code is tested with GCC for AVR. In Debian and operating systems derived
from it, <code class="docutils literal notranslate"><span class="pre">gcc-avr</span></code> package provides the compiler and <code class="docutils literal notranslate"><span class="pre">avr-libc</span></code> provides
related files. Note that older versions of GCC do not support these chips
out of the box
and some manual downloads are required. Other AVR compilers should work
as well but since these were not tested, not all features are enabled for them.</p>
<p>Default configuration produces <code class="docutils literal notranslate"><span class="pre">nuttx.asm</span></code> file with program disassembly
and <code class="docutils literal notranslate"><span class="pre">nuttx.hex</span></code> file in Intel HEX format to be used for upload to the chip.</p>
<p>Program can be uploaded for example by <code class="docutils literal notranslate"><span class="pre">avrdude</span></code> using UPDI (Unified Program
and Debug Interface.) As for programmer hardware, any serial port should
work. Serial port data pins need to be level-shifted to chip’s supply voltage.
The pins are then connected through circuit like this one:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                            Vcc
                             |
                            100k
           schottky          |
(PC) TX&gt; -- |&lt;|----------------------------- &lt;RX (PC)
                                 \-- 470R -- &lt;UPDI (MCU)
</pre></div>
</div>
<p>As long as TX is logical 1, there is no current between Vcc and TX pin
and both RX and UPDI pins read 1. When TX transitions to logical 0,
the schottky diode opens and overrides the 100k pull-up resistor,
both RX and UPDI read 0. When UPDI transitions to logical 0, it also
overrides the pull-up resistor but the schottky diode remains closed
and prevents TX pin from being affected. RX reads 0.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="Microchip DA/DB family" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../docs/gpio_intr_mux.html" class="btn btn-neutral float-right" title="GPIO interrupt multiplexer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>