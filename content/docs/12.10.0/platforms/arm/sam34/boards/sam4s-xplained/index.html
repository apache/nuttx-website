<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAM4S Xplained &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
      <script src="../../../../../_static/clipboard.min.js"></script>
      <script src="../../../../../_static/copybutton.js"></script>
      <script src="../../../../../_static/design-tabs.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Microchip SAMA5" href="../../../sama5/index.html" />
    <link rel="prev" title="SAM4S Xplained Pro" href="../sam4s-xplained-pro/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../../../12.10.0" >12.10.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">ARM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../a1x/index.html">Allwinner A10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../am335x/index.html">TI/Sitara AM335x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../at32/index.html">Artery AT32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bcm2708/index.html">Broadcom BCM2708 (removed)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../c5471/index.html">TI TMS320-C5471</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cxd56xx/index.html">Sony CXD56xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dm320/index.html">TI TMS320-DM320</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../efm32/index.html">SiLabs EFM32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../eoss3/index.html">EOSS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fvp-v8r-aarch32/index.html">FVP ARMv8-R Virt Chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../gd32f4/index.html">GD32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../goldfish/goldfish_timer.html">GOLDFISH TIMER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../goldfish/index.html">GOLDFISH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx1/index.html">NXP/Freescale i.MX1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx6/index.html">NXP/Freescale i.MX6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx9/index.html">NXP i.MX9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imxrt/index.html">NXP i.MX RT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kinetis/index.html">NXP/FreeScale Kinetis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kl/index.html">NXP/FreeScale KLxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lc823450/index.html">ON Semiconductor LC823450</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc17xx/index.html">NXP LPC17xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc214x/index.html">NXP LPC214x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc2378/index.html">NXP LPC2378</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc31xx/index.html">NXP LPC31xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc40xx/index.html">NXP LPC40xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc43xx/index.html">NXP LPC43xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc54xx/index.html">NXP LPC54xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../max326xx/index.html">Maxim Integrated MAX32660</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../moxart/index.html">Moxa NP51x0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mps/index.html">MPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/ieee802154.html">Nordic nRF52 IEEE 802.15.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/index.html">Nordic nRF52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf53/index.html">Nordic nRF53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf91/index.html">Nordic nRF91</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nuc1xx/index.html">nuvoTon NUC120</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../phy62xx/index.html">PHY+ PHY62</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../qemu/index.html">QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ra4m1/index.html">Renesas RA4M1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp2040/index.html">RaspberryPi rp2040</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp23xx/index.html">RaspberryPi rp2350</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k1xx/index.html">NXP S32K1XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k3xx/index.html">NXP S32K3XX</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Microchip SAM34</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam3u">Microchip SAM3U</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam3x">Microchip SAM3X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4l">Microchip SAM4L</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4cm">Microchip SAM4CM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4e">Microchip SAM4E</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#microchip-sam4s">Microchip SAM4S</a><ul class="current">
<li class="toctree-l5 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../sama5/index.html">Microchip SAMA5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd2l2/index.html">Microchip SAMD2x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd5e5/index.html">Microchip samd5e5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samv7/index.html">Microchip SAM V7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32c0/index.html">ST STM32C0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f0/index.html">ST STM32F0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f1/index.html">ST STM32F1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f2/index.html">ST STM32F2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f3/index.html">ST STM32F3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f4/index.html">ST STM32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f7/index.html">ST STM32F7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g0/index.html">ST STM32G0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g4/index.html">ST STM32G4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h5/index.html">ST STM32H5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h7/index.html">ST STM32H7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l0/index.html">ST STM32L0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l1/index.html">ST STM32L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l4/index.html">ST STM32L4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l5/index.html">ST STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32u5/index.html">ST STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wb/index.html">ST STM32WB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wl5/index.html">ST STM32WL5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../str71x/index.html">ST STR71</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tiva/index.html">TI/Stellaris Tiva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tms570/index.html">TI/Hercules TMS570xxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../xmc4/index.html">Infineon XMC4000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_linux.html">Network Support on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_vpnkit.html">Network support with VPNKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tricore/index.html">TriCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">ARM</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Microchip SAM34</a></li>
      <li class="breadcrumb-item active">SAM4S Xplained</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/platforms/arm/sam34/boards/sam4s-xplained/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sam4s-xplained">
<h1>SAM4S Xplained<a class="headerlink" href="#sam4s-xplained" title="Permalink to this heading"></a></h1>
<p>This README discusses issues unique to NuttX configurations for the Atmel SAM4S
Xplained development board. This board features the ATSAM4S16C MCU with 1MB
FLASH and 128KB.</p>
<p>The SAM4S Xplained features:</p>
<ul class="simple">
<li><p>120 MHz Cortex-M4 with MPU</p></li>
<li><p>12MHz crystal (no 32.768KHz crystal)</p></li>
<li><p>Segger J-Link JTAG emulator on-board for program and debug</p></li>
<li><p>MICRO USB A/B connector for USB connectivity</p></li>
<li><p>IS66WV51216DBLL ISSI SRAM 8Mb 512K x 16 55ns PSRAM 2.5v-3.6v</p></li>
<li><p>Four Atmel QTouch buttons</p></li>
<li><p>External voltage input</p></li>
<li><p>Four LEDs, two controllable from software</p></li>
<li><p>Xplained expansion headers</p></li>
<li><p>Footprint for external serial Flash (not fitted)</p></li>
</ul>
<section id="pio-muliplexing">
<h2>PIO Muliplexing<a class="headerlink" href="#pio-muliplexing" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>PIN</p></th>
<th class="head"><p>FUNCTION</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PA0</p></td>
<td><p>SMC_A17</p></td>
</tr>
<tr class="row-odd"><td><p>PA1</p></td>
<td><p>SMC_A18</p></td>
</tr>
<tr class="row-even"><td><p>PA2</p></td>
<td><p>J3.7 default</p></td>
</tr>
<tr class="row-odd"><td><p>PA3</p></td>
<td><p>J1.1 &amp; J4.1</p></td>
</tr>
<tr class="row-even"><td><p>PA4</p></td>
<td><p>J1.2 &amp; J4.2</p></td>
</tr>
<tr class="row-odd"><td><p>PA5</p></td>
<td><p>User_button BP2</p></td>
</tr>
<tr class="row-even"><td><p>PA6</p></td>
<td><p>J3.7 optional</p></td>
</tr>
<tr class="row-odd"><td><p>PA7</p></td>
<td><p>CLK_32K</p></td>
</tr>
<tr class="row-even"><td><p>PA8</p></td>
<td><p>CLK_32K</p></td>
</tr>
<tr class="row-odd"><td><p>PA9</p></td>
<td><p>RX_UART0</p></td>
</tr>
<tr class="row-even"><td><p>PA10</p></td>
<td><p>TX_UART0</p></td>
</tr>
<tr class="row-odd"><td><p>PA11</p></td>
<td><p>J3.2 default</p></td>
</tr>
<tr class="row-even"><td><p>PA12</p></td>
<td><p>MISO</p></td>
</tr>
<tr class="row-odd"><td><p>PA13</p></td>
<td><p>MOSI</p></td>
</tr>
<tr class="row-even"><td><p>PA14</p></td>
<td><p>SPCK</p></td>
</tr>
<tr class="row-odd"><td><p>PA15</p></td>
<td><p>J3.5</p></td>
</tr>
<tr class="row-even"><td><p>PA16</p></td>
<td><p>J3.6</p></td>
</tr>
<tr class="row-odd"><td><p>PA17</p></td>
<td><p>J2.5</p></td>
</tr>
<tr class="row-even"><td><p>PA18</p></td>
<td><p>J3.4 &amp; SMC_A14</p></td>
</tr>
<tr class="row-odd"><td><p>PA19</p></td>
<td><p>J3.4 optional &amp; SMC_A15</p></td>
</tr>
<tr class="row-even"><td><p>PA20</p></td>
<td><p>J3.1 &amp; SMC_A16</p></td>
</tr>
<tr class="row-odd"><td><p>PA21</p></td>
<td><p>J2.6</p></td>
</tr>
<tr class="row-even"><td><p>PA22</p></td>
<td><p>J2.1</p></td>
</tr>
<tr class="row-odd"><td><p>PA23</p></td>
<td><p>J3.3</p></td>
</tr>
<tr class="row-even"><td><p>PA24</p></td>
<td><p>TSLIDR_SL_SN</p></td>
</tr>
<tr class="row-odd"><td><p>PA25</p></td>
<td><p>TSLIDR_SL_SNSK</p></td>
</tr>
<tr class="row-even"><td><p>PA26</p></td>
<td><p>TSLIDR_SM_SNS</p></td>
</tr>
<tr class="row-odd"><td><p>PA27</p></td>
<td><p>TSLIDR_SM_SNSK</p></td>
</tr>
<tr class="row-even"><td><p>PA28</p></td>
<td><p>TSLIDR_SR_SNS</p></td>
</tr>
<tr class="row-odd"><td><p>PA29</p></td>
<td><p>TSLIDR_SR_SNSK</p></td>
</tr>
<tr class="row-even"><td><p>PA30</p></td>
<td><p>J4.5</p></td>
</tr>
<tr class="row-odd"><td><p>PA31</p></td>
<td><p>J1.5</p></td>
</tr>
<tr class="row-even"><td><p>PB0</p></td>
<td><p>J2.3 default</p></td>
</tr>
<tr class="row-odd"><td><p>PB1</p></td>
<td><p>J2.4</p></td>
</tr>
<tr class="row-even"><td><p>PB2</p></td>
<td><p>J1.3 &amp; J4.3</p></td>
</tr>
<tr class="row-odd"><td><p>PB3</p></td>
<td><p>J1.4 &amp; J4.4</p></td>
</tr>
<tr class="row-even"><td><p>PB4</p></td>
<td><p>JTAG</p></td>
</tr>
<tr class="row-odd"><td><p>PB5</p></td>
<td><p>JTAG</p></td>
</tr>
<tr class="row-even"><td><p>PB6</p></td>
<td><p>JTAG</p></td>
</tr>
<tr class="row-odd"><td><p>PB7</p></td>
<td><p>JTAG</p></td>
</tr>
<tr class="row-even"><td><p>PB8</p></td>
<td><p>CLK_12M</p></td>
</tr>
<tr class="row-odd"><td><p>PB9</p></td>
<td><p>CLK_12M</p></td>
</tr>
<tr class="row-even"><td><p>PB10</p></td>
<td><p>USB_DDM</p></td>
</tr>
<tr class="row-odd"><td><p>PB11</p></td>
<td><p>USB_DDP</p></td>
</tr>
<tr class="row-even"><td><p>PB12</p></td>
<td><p>ERASE</p></td>
</tr>
<tr class="row-odd"><td><p>PB13</p></td>
<td><p>J2.3 optional</p></td>
</tr>
<tr class="row-even"><td><p>PB14</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p>PC0</p></td>
<td><p>SMC_D0</p></td>
</tr>
<tr class="row-even"><td><p>PC1</p></td>
<td><p>SMC_D1</p></td>
</tr>
<tr class="row-odd"><td><p>PC2</p></td>
<td><p>SMC_D2</p></td>
</tr>
<tr class="row-even"><td><p>PC3</p></td>
<td><p>SMC_D3</p></td>
</tr>
<tr class="row-odd"><td><p>PC4</p></td>
<td><p>SMC_D4</p></td>
</tr>
<tr class="row-even"><td><p>PC5</p></td>
<td><p>SMC_D5</p></td>
</tr>
<tr class="row-odd"><td><p>PC6</p></td>
<td><p>SMC_D6</p></td>
</tr>
<tr class="row-even"><td><p>PC7</p></td>
<td><p>SMC_D7</p></td>
</tr>
<tr class="row-odd"><td><p>PC8</p></td>
<td><p>SMC_NWE</p></td>
</tr>
<tr class="row-even"><td><p>PC9</p></td>
<td><p>Power on detect</p></td>
</tr>
<tr class="row-odd"><td><p>PC10</p></td>
<td><p>User LED D9</p></td>
</tr>
<tr class="row-even"><td><p>PC11</p></td>
<td><p>SMC_NRD</p></td>
</tr>
<tr class="row-odd"><td><p>PC12</p></td>
<td><p>J2.2</p></td>
</tr>
<tr class="row-even"><td><p>PC13</p></td>
<td><p>J2.7</p></td>
</tr>
<tr class="row-odd"><td><p>PC14</p></td>
<td><p>SMC_NCS0</p></td>
</tr>
<tr class="row-even"><td><p>PC15</p></td>
<td><p>SMC_NSC1</p></td>
</tr>
<tr class="row-odd"><td><p>PC16</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p>PC17</p></td>
<td><p>User LED D10</p></td>
</tr>
<tr class="row-odd"><td><p>PC18</p></td>
<td><p>SMC_A0</p></td>
</tr>
<tr class="row-even"><td><p>PC19</p></td>
<td><p>SMC_A1</p></td>
</tr>
<tr class="row-odd"><td><p>PC20</p></td>
<td><p>SMC_A2</p></td>
</tr>
<tr class="row-even"><td><p>PC21</p></td>
<td><p>SMC_A3</p></td>
</tr>
<tr class="row-odd"><td><p>PC22</p></td>
<td><p>SMC_A4</p></td>
</tr>
<tr class="row-even"><td><p>PC23</p></td>
<td><p>SMC_A5</p></td>
</tr>
<tr class="row-odd"><td><p>PC24</p></td>
<td><p>SMC_A6</p></td>
</tr>
<tr class="row-even"><td><p>PC25</p></td>
<td><p>SMC_A7</p></td>
</tr>
<tr class="row-odd"><td><p>PC26</p></td>
<td><p>SMC_A8</p></td>
</tr>
<tr class="row-even"><td><p>PC27</p></td>
<td><p>SMC_A9</p></td>
</tr>
<tr class="row-odd"><td><p>PC28</p></td>
<td><p>SMC_A10</p></td>
</tr>
<tr class="row-even"><td><p>PC29</p></td>
<td><p>SMC_A11</p></td>
</tr>
<tr class="row-odd"><td><p>PC30</p></td>
<td><p>SMC_A12</p></td>
</tr>
<tr class="row-even"><td><p>PC31</p></td>
<td><p>SMC_A13</p></td>
</tr>
</tbody>
</table>
</section>
<section id="buttons-and-leds">
<h2>Buttons and LEDs<a class="headerlink" href="#buttons-and-leds" title="Permalink to this heading"></a></h2>
<section id="buttons">
<h3>Buttons<a class="headerlink" href="#buttons" title="Permalink to this heading"></a></h3>
<p>The SAM4S Xplained has two mechanical buttons. One button is the RESET button
connected to the SAM4S reset line and the other is a generic user configurable
button labeled BP2 and connected to GPIO PA5. When a button is pressed it will
drive the I/O line to GND.</p>
</section>
<section id="leds">
<h3>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h3>
<p>There are four LEDs on board the SAM4X Xplained board, two of these can be
controlled by software in the SAM4S:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>LED</p></th>
<th class="head"><p>GPIO</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>D9  Yellow LED</p></td>
<td><p>PC10</p></td>
</tr>
<tr class="row-odd"><td><p>D10 Yellow LED</p></td>
<td><p>PC17</p></td>
</tr>
</tbody>
</table>
<p>Both can be illuminated by driving the GPIO output to ground (low).</p>
<p>These LEDs are not used by the board port unless <code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LEDS</span></code> is
defined. In that case, the usage by the board port is defined in
<code class="docutils literal notranslate"><span class="pre">include/board.h</span></code> and <code class="docutils literal notranslate"><span class="pre">src/sam_leds.c</span></code>. The LEDs are used to encode
OS-related events as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>SYMBOL</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>D9</p></th>
<th class="head"><p>D10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LED_STARTED</p></td>
<td><p>NuttX has been started</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-odd"><td><p>LED_HEAPALLOCATE</p></td>
<td><p>Heap has been allocated</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-even"><td><p>LED_IRQSENABLED</p></td>
<td><p>Interrupts enabled</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-odd"><td><p>LED_STACKCREATED</p></td>
<td><p>Idle stack created</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-even"><td><p>LED_INIRQ</p></td>
<td><p>In an interrupt</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
</tr>
<tr class="row-odd"><td><p>LED_SIGNAL</p></td>
<td><p>In a signal handler</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
</tr>
<tr class="row-even"><td><p>LED_ASSERTION</p></td>
<td><p>An assertion failed</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
</tr>
<tr class="row-odd"><td><p>LED_PANIC</p></td>
<td><p>The system has crashed</p></td>
<td><p>OFF</p></td>
<td><p>Blinking</p></td>
</tr>
<tr class="row-even"><td><p>LED_IDLE</p></td>
<td><p>MCU is is sleep mode</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
</tbody>
</table>
<p>Thus if D9 is statically on, NuttX has successfully booted and is, apparently,
running normmally. If D10 is flashing at approximately 2Hz, then a fatal error
has been detected and the system has halted.</p>
</section>
</section>
<section id="serial-consoles">
<h2>Serial Consoles<a class="headerlink" href="#serial-consoles" title="Permalink to this heading"></a></h2>
<section id="uart1">
<h3>UART1<a class="headerlink" href="#uart1" title="Permalink to this heading"></a></h3>
<p>If you have a TTL to RS-232 converter then this is the most convenient
serial console to use. UART1 is the default in all of these
configurations.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>SIGNAL</p></th>
<th class="head"><p>CONNECTOR</p></th>
<th class="head"><p>CONNECTOR</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>UART1 RXD  PB2</p></td>
<td><p>J1 pin 3</p></td>
<td><p>J4 pin 3</p></td>
</tr>
<tr class="row-odd"><td><p>UART1 TXD  PB3</p></td>
<td><p>J1 pin 4</p></td>
<td><p>J4 pin 4</p></td>
</tr>
<tr class="row-even"><td><p>GND</p></td>
<td><p>J1 pin 9</p></td>
<td><p>J4 pin 9</p></td>
</tr>
<tr class="row-odd"><td><p>Vdd</p></td>
<td><p>J1 pin 10</p></td>
<td><p>J4 pin 10</p></td>
</tr>
</tbody>
</table>
</section>
<section id="usart1">
<h3>USART1<a class="headerlink" href="#usart1" title="Permalink to this heading"></a></h3>
<p>USART1 is another option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>SIGNAL</p></th>
<th class="head"><p>CONNECTOR</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>USART1 RXD PA21</p></td>
<td><p>J2 pin 6</p></td>
</tr>
<tr class="row-odd"><td><p>USART1 TXD PA22</p></td>
<td><p>J2 pin 1</p></td>
</tr>
<tr class="row-even"><td><p>GND</p></td>
<td><p>J2 pin 9</p></td>
</tr>
<tr class="row-odd"><td><p>Vdd</p></td>
<td><p>J2 pin 10</p></td>
</tr>
</tbody>
</table>
</section>
<section id="virtual-com-port">
<h3>Virtual COM Port<a class="headerlink" href="#virtual-com-port" title="Permalink to this heading"></a></h3>
<p>Yet another option is to use UART0 and the virtual COM port. This option may be
more convenient for long term development, but was painful to use during board
bring-up.</p>
<p>The SAM4S Xplained contains an Embedded Debugger (EDBG) that can be used to
program and debug the ATSAM4S16C using Serial Wire Debug (SWD). The Embedded
debugger also include a Virtual Com port interface over USART1. Virtual COM port
connections:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>AT91SAM4S16</p></th>
<th class="head"><p>ATSAM3U4CAU</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PA9   RX_UART0</p></td>
<td><p>PA9_4S PA12</p></td>
</tr>
<tr class="row-odd"><td><p>PA10  TX_UART0</p></td>
<td><p>RX_3U  PA11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sam4s-xplained-specific-configuration-options">
<h2>SAM4S Xplained-specific Configuration Options<a class="headerlink" href="#sam4s-xplained-specific-configuration-options" title="Permalink to this heading"></a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">arch/</span></code> subdirectory.  This should be set
to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH=arm</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_family</span></code>: For use in C code:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_ARM=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_architecture</span></code>: For use in C code:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CORTEXM4=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">arch/*/chip</span></code> subdirectory</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP=&quot;sam34&quot;</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_name</span></code>: For use in C code to identify the exact chip:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_SAM34</span></code>
<code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_SAM4S</span></code>
<code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_ATSAM4S16C</span></code></p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">boards/</span></code> subdirectory and hence, the
board that supports the particular chip or SoC.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD=sam4s:xplained</span></code> (for the SAM4S Xplained development board)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD_name</span></code>: For use in C code</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD_SAM4S_XPLAINED=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LOOPSPERMSEC</span></code>: Must be calibrated for correct operation of delay loops</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ENDIAN_BIG</span></code>: define if big endian (default is little endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_SIZE</span></code>: Describes the installed DRAM (SRAM in this case):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_SIZE=0x00008000</span></code> (32Kb)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_START</span></code>: The start address of installed DRAM</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_START=0x20000000</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LEDS</span></code>: Use LEDs to show state. Unique to boards that have LEDs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_INTERRUPTSTACK</span></code>: This architecture supports an interrupt
stack. If defined, this symbol is the size of the interrupt stack in bytes.
If not defined, the user task stacks will be used during interrupt handling.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_STACKDUMP</span></code>: Do stack dumps after assertions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LEDS</span></code>:  Use LEDs to show state. Unique to board architecture.</p></li>
</ul>
<p>Individual subsystems can be enabled:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_RTC</span></code>: Real Time Clock</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_RTT</span></code>: Real Time Timer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_WDT</span></code>: Watchdog Timer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_UART0</span></code>: UART 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_UART1</span></code>: UART 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SMC</span></code>: Static Memory Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART0</span></code>: USART 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART1</span></code>: USART 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_HSMCI</span></code>: High Speed Multimedia Card Interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TWI0</span></code>: Two-Wire Interface 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TWI1</span></code>: Two-Wire Interface 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SPI0</span></code>: Serial Peripheral Interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SSC</span></code>: Synchronous Serial Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC0</span></code>: Timer Counter 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC1</span></code>: Timer Counter 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC2</span></code>: Timer Counter 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC3</span></code>: Timer Counter 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC4</span></code>: Timer Counter 4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC5</span></code>: Timer Counter 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_ADC12B</span></code>: 12-bit Analog To Digital Converter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_DACC</span></code>: Digital To Analog Converter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_PWM</span></code>: Pulse Width Modulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_CRCCU</span></code>: CRC Calculation Unit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_ACC</span></code>: Analog Comparator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_UDP</span></code>: USB Device Port</p></li>
</ul>
<p>Some subsystems can be configured to operate in different ways. The drivers need
to know how to configure the subsystem.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOA_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOB_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOC_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART0_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART1_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART2_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART3_SERIALDRIVER</span></code></p></li>
</ul>
<p>ST91SAM4S specific device driver settings</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_SERIAL_CONSOLE</span></code> - selects the USARTn (n=0,1,2,3) or UART m
(m=4,5) for the console and ttys0 (default is the USART1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_RXBUFSIZE</span></code> - Characters are buffered as received. This
specific the size of the receive buffer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_TXBUFSIZE</span></code> - Characters are buffered before being sent.
This specific the size of the transmit buffer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_BAUD</span></code> - The configure BAUD of the UART.  Must be</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_BITS</span></code> - The number of bits.  Must be either 7 or 8.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_PARTIY</span></code> - 0=no parity, 1=odd parity, 2=even parity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_2STOP</span></code> - Two stop bits</p></li>
</ul>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<p>Each SAM4S Xplained configuration is maintained in a sub-directory and can be
selected as follow:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>tools/configure.shsam4s-xplained:&lt;subdir&gt;
</pre></div>
</div>
<p>Before building, make sure the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable includes the correct
path to the directory than holds your toolchain binaries.</p>
<p>And then build NuttX by simply typing the following. At the conclusion of the
make, the nuttx binary will reside in an ELF file called, simply, nuttx.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;subdir&gt;</span></code> that is provided above as an argument to the
<code class="docutils literal notranslate"><span class="pre">tools/configure.sh</span></code> must be is one of the following.</p>
<ol class="arabic">
<li><p>These configurations use the mconf-based configuration tool.  To change any
of these configurations using that tool, you should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the <code class="docutils literal notranslate"><span class="pre">kconfig-mconf</span></code> tool. See <code class="docutils literal notranslate"><span class="pre">nuttx/README.txt</span></code> see
additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute ‘make menuconfig’ in nuttx/ in order to start the reconfiguration
process.</p></li>
</ol>
</li>
<li><p>Unless stated otherwise, all configurations generate console output on UART1
which is available on J1 or J4 (see the section “Serial Consoles” above).
USART1 or the virtual COM port on UART0 are options. The virtual COM port
could be used, for example, by reconfiguring to use UART0 like:</p>
<p>System Type -&gt; AT91SAM3/4 Peripheral Support</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM_UART0=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM_UART1=n</span></code></p></li>
</ul>
<p>Device Drivers -&gt; Serial Driver Support -&gt; Serial Console</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_SERIAL_CONSOLE=y</span></code></p></li>
</ul>
<p>Device Drivers -&gt; Serial Driver Support -&gt; UART0 Configuration</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_2STOP=0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_BAUD=115200</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_BITS=8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_PARITY=0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_RXBUFSIZE=256</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_UART0_TXBUFSIZE=256</span></code></p></li>
</ul>
</li>
<li><p>Unless otherwise stated, the configurations are setup for Linux (or any other
POSIX environment like Cygwin under Windows):</p></li>
</ol>
<blockquote>
<div><p>Build Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_LINUX=y</span></code>: Linux or other POSIX environment</p></li>
</ul>
</div></blockquote>
<ol class="arabic" start="4">
<li><p>These configurations use the older, OABI, buildroot toolchain.  But that is
easily reconfigured:</p>
<p>System Type -&gt; Toolchain:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_BUILDROOT=y</span></code>: Buildroot toolchain</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_BUILDROOT_OABI=y</span></code>: Older, OABI toolchain</p></li>
</ul>
<p>If you want to use the Atmel GCC toolchain, here are the steps to do so:</p>
<p>Build Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_WINDOWS=y</span></code>: Windows</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_CYGWIN=y</span></code>: Using Cygwin or other POSIX environment</p></li>
</ul>
<p>System Type -&gt; Toolchain:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_GNU_EABI=y</span></code>: General GCC EABI toolchain under windows</p></li>
</ul>
<p>This re-configuration should be done before making NuttX or else the
subsequent ‘make’ will fail. If you have already attempted building
NuttX then you will have to:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code> to remove the old configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools/configure.sh</span> <span class="pre">sam3u-ek/ksnh</span></code> to start with a fresh configuration, and</p></li>
<li><p>Perform the configuration changes above.</p></li>
</ol>
<p>Also, make sure that your PATH variable has the new path to your Atmel tools.
Try <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">arm-none-eabi-gcc</span></code> to make sure that you are selecting the right
tool.</p>
<p>See also the “NOTE about Windows native toolchains” in the section call “GNU
Toolchain Options” above.</p>
</li>
</ol>
<section id="nsh">
<h3>nsh<a class="headerlink" href="#nsh" title="Permalink to this heading"></a></h3>
<p>This configuration directory will built the NuttShell.</p>
<p>The configuration configuration can be modified to include support
for the on-board SRAM (1MB).</p>
<p>System Type -&gt; External Memory Configuration</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_EXTSRAM0=y</span></code>: Select SRAM on CS0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_EXTSRAM0SIZE=1048576</span></code>: Size=1MB</p></li>
</ul>
<p>Now what are you going to do with the SRAM.  There are two choices:</p>
<ol class="arabic">
<li><p>To enable the NuttX RAM test that may be used to verify the
external SRAM:</p>
<p>System Type -&gt; External Memory Configuration</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_EXTSRAM0HEAP=n</span></code>: Don’t add to heap</p></li>
</ul>
<p>Application Configuration -&gt; System NSH Add-Ons</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_TESTING_RAMTEST=y</span></code>: Enable the RAM test built-in</p></li>
</ul>
<p>In this configuration, the SDRAM is not added to heap and so is not
excessible to the applications. So the RAM test can be freely executed
against the SRAM memory beginning at address <code class="docutils literal notranslate"><span class="pre">0x6000:0000</span></code> (CS0).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; ramtest -h</span>
<span class="go">Usage: &lt;noname&gt; [-w|h|b] &lt;hex-address&gt; &lt;decimal-size&gt;</span>

<span class="go">Where:</span>
<span class="go">  &lt;hex-address&gt; starting address of the test.</span>
<span class="go">  &lt;decimal-size&gt; number of memory locations (in bytes).</span>
<span class="go">  -w Sets the width of a memory location to 32-bits.</span>
<span class="go">  -h Sets the width of a memory location to 16-bits (default).</span>
<span class="go">  -b Sets the width of a memory location to 8-bits.</span>
</pre></div>
</div>
<p>To test the entire external SRAM:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; ramtest 60000000 1048576</span>
<span class="go">RAMTest: Marching ones: 60000000 1048576</span>
<span class="go">RAMTest: Marching zeroes: 60000000 1048576</span>
<span class="go">RAMTest: Pattern test: 60000000 1048576 55555555 aaaaaaaa</span>
<span class="go">RAMTest: Pattern test: 60000000 1048576 66666666 99999999</span>
<span class="go">RAMTest: Pattern test: 60000000 1048576 33333333 cccccccc</span>
<span class="go">RAMTest: Address-in-address test: 60000000 1048576</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>To add this RAM to the NuttX heap, you would need to change the
configuration as follows:</p>
<p>System Type -&gt; External Memory Configuration</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_EXTSRAM0HEAP=y</span></code>: Add external RAM to heap</p></li>
</ul>
<p>Memory Management</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-CONFIG_MM_REGIONS=1</span></code>: Only the internal SRAM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+CONFIG_MM_REGIONS=2</span></code>: Also include external SRAM</p></li>
</ul>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../sam4s-xplained-pro/index.html" class="btn btn-neutral float-left" title="SAM4S Xplained Pro" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../../sama5/index.html" class="btn btn-neutral float-right" title="Microchip SAMA5" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>