<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring and Building &mdash; NuttX latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OS Components" href="../components/index.html" />
    <link rel="prev" title="Directory Structure" href="organization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
  
    <a href="../index.html" class="icon icon-home"> NuttX
  

  
    
    <img src="../_static/NuttX.png" class="logo" alt="Logo"/>
  
  </a>
  
  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->
       
  <div class="version-selector">
    <select>
    
      <option value="latest" selected="selected">latest</option>
    
    </select>
  </div>
  
  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quickstart</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="organization.html">Directory Structure</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuring and Building</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-nuttx">Configuring NuttX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-nuttx">Building NuttX</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NuttX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Quickstart</a> &raquo;</li>
        
      <li>Configuring and Building</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/quickstart/config_build.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-and-building">
<h1>Configuring and Building<a class="headerlink" href="#configuring-and-building" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuring-nuttx">
<h2>Configuring NuttX<a class="headerlink" href="#configuring-nuttx" title="Permalink to this headline">¶</a></h2>
<p><strong>Manual Configuration</strong>. Configuring NuttX requires only copying
the <a class="reference external" href="#boardconfigsubdirs">board-specific configuration files</a>
into the top level directory which appears in the make files as
the make variable, <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)</span></code>. This could be done manually as
follows:</p>
<ul class="simple">
<li><p>Copy
<code class="docutils literal notranslate"><span class="pre">boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/configs/[</span></code><em>&lt;config-dir&gt;</em><code class="docutils literal notranslate"><span class="pre">/]Make.defs</span></code>
to <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/Make.defs</span></code> (see NOTE below),</p></li>
<li><p>Copy
<code class="docutils literal notranslate"><span class="pre">boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/configs/[</span></code><em>&lt;config-dir&gt;</em><code class="docutils literal notranslate"><span class="pre">/]defconfig</span></code>
to <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/.config</span></code></p></li>
</ul>
<p>Where <em>&lt;board-name&gt;</em> is the name of one of the sub-directories of
the NuttX <code class="docutils literal notranslate"><span class="pre">`boards/</span></code> &lt;#DirStructConfigs&gt;`__ directory. This
sub-directory name corresponds to one of the supported boards
identified <a class="reference external" href="#supportedboards">above</a>. &lt;config-dir&gt; is the
optional, specific configuration directory for the board. And
&lt;app-dir&gt; is the location of the optional application directory.</p>
<p>NOTE: Recall that the <code class="docutils literal notranslate"><span class="pre">Make.defs</span></code> file may reside in either the
<code class="docutils literal notranslate"><span class="pre">boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em>/<code class="docutils literal notranslate"><span class="pre">configs/[</span></code><em>&lt;config-dir&gt;</em>
directory or in the
<code class="docutils literal notranslate"><span class="pre">boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em>/<code class="docutils literal notranslate"><span class="pre">scripts</span></code>.</p>
<p><strong>Automated Configuration</strong>. There is a script that automates
these steps. The following steps will accomplish the same
configuration:</p>
<p>There is an alternative Windows batch file, <code class="docutils literal notranslate"><span class="pre">configure.bat</span></code>,
that can be used instead of <code class="docutils literal notranslate"><span class="pre">configure.sh</span></code> in the windows native
environment like:</p>
<p>And, to make sure that other platforms are supported, there is
also a C program at <code class="docutils literal notranslate"><span class="pre">tools/configure.c</span></code> that can be compiled to
establish the board configuration on all platforms.</p>
<blockquote>
<div><p>NOTE (2019-08-6): As of this writing, changes to the boards/
directly have made <code class="docutils literal notranslate"><span class="pre">configure.bat</span></code> unusable. For the native
Windows environment, <code class="docutils literal notranslate"><span class="pre">configure.c</span></code> is recommended until that
batch file can be repaired.</p>
</div></blockquote>
<p>See <code class="docutils literal notranslate"><span class="pre">tools/README.txt</span></code> for more information about these scripts.
Or use the -h option with <code class="docutils literal notranslate"><span class="pre">configure.sh&gt;</span></code></p>
<p>If your application directory is not in the standard location
(<code class="docutils literal notranslate"><span class="pre">../apps</span></code> or <code class="docutils literal notranslate"><span class="pre">../apps-&lt;version&gt;</span></code>), then you should also
specify the location of the application directory on the command
line like:</p>
<p><strong>Version Files</strong>. The NuttX build expects to find a version file
located in the top-level NuttX build directory. That version file
is called <code class="docutils literal notranslate"><span class="pre">.version</span></code>. The correct version file is installed in
each versioned NuttX released. However, if you are working from an
GIT snapshot, then there will be no version file. If there is no
version file, the top-level <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> will create a dummy
<code class="docutils literal notranslate"><span class="pre">.version</span></code> file on the first make. This dummy version file will
contain all zeroes for version information. If that is not what
you want, they you should run the <code class="docutils literal notranslate"><span class="pre">version.sh</span></code> script to create
a better <code class="docutils literal notranslate"><span class="pre">.version</span></code> file.</p>
<p>You can get help information from the <code class="docutils literal notranslate"><span class="pre">version.sh</span></code> script using
the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option. For example:</p>
<p>As an example, the following command will generate a version file
for version 6.1 using the current GIT revision number:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.version</span></code> file is also used during the build process to
create a C header file at <code class="docutils literal notranslate"><span class="pre">include/nuttx/version.h</span></code> that
contains the same version information. That version file may be
used by your C applications for, as an example, reporting version
information.</p>
<p><strong>Additional Configuration Steps</strong>. The remainder of configuration
steps will be performed by
<code class="docutils literal notranslate"><span class="pre">`$(TOPDIR)/Makefile</span></code> &lt;#topmakefile&gt;`__ the first time the
system is built as described below.</p>
</div>
<div class="section" id="building-nuttx">
<h2>Building NuttX<a class="headerlink" href="#building-nuttx" title="Permalink to this headline">¶</a></h2>
<p><strong>Building NuttX</strong>. Once NuttX has been configured as described
<a class="reference external" href="#configuringnuttx">above</a>, it may be built as follows:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)</span></code> directory holds:</p>
<ul class="simple">
<li><p>The top level <code class="docutils literal notranslate"><span class="pre">`Makefile</span></code> &lt;#topmakefile&gt;`__ that controls the
NuttX build.</p></li>
</ul>
<p>That directory also holds:</p>
<ul class="simple">
<li><p>The makefile fragment <code class="docutils literal notranslate"><span class="pre">`.config</span></code> &lt;#boardconfigsubdirs&gt;`__
that describes the current configuration, and</p></li>
<li><p>The makefile fragment <code class="docutils literal notranslate"><span class="pre">`Make.defs</span></code> &lt;#boardconfigsubdirs&gt;`__
that provides customized build targets.</p></li>
</ul>
<p><strong>Environment Variables</strong>. The specific environmental definitions
are unique for each board but should include, as a minimum,
updates to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable to include the full path to the
architecture-specific toolchain identified in
<code class="docutils literal notranslate"><span class="pre">`Make.defs</span></code> &lt;#boardconfigsubdirs&gt;`__.</p>
<p><strong>First Time Make.</strong> Additional configuration actions will be
taken the first time that system is built. These additional steps
include:</p>
<ul class="simple">
<li><p>Auto-generating the file <code class="docutils literal notranslate"><span class="pre">include/nuttx/config.h</span></code> using the
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/.config</span></code> file.</p></li>
<li><p>Auto-generating the file <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/.version</span></code> with version
0.0 if one does not exist.</p></li>
<li><p>Auto-generating the file <code class="docutils literal notranslate"><span class="pre">include/nuttx/version.h</span></code> using the
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/.version</span></code> file.</p></li>
<li><p>Creating a link to
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/arch/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/include</span></code> at
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/include/arch</span></code>.</p></li>
<li><p>Creating a link to
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/include</span></code>
at <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/include/arch/board</span></code>.</p></li>
<li><p>Creating a link to
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/boards/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;chip-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/</span></code><em>&lt;board-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/src</span></code>
at <code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/arch/</span></code><em>&lt;arch-name&gt;</em><code class="docutils literal notranslate"><span class="pre">/src/board</span></code></p></li>
<li><p>Creating a link to <code class="docutils literal notranslate"><span class="pre">${APPDIR}/include</span></code> at
<code class="docutils literal notranslate"><span class="pre">$(TOPDIR)/include/apps</span></code></p></li>
<li><p>Creating make dependencies.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, The Apache Software Foundation

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>