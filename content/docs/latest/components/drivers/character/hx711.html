<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HX711 ADC DESIGNED FOR SCALES &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="I2S Drivers" href="i2s.html" />
    <link rel="prev" title="EFUSE Drivers" href="efuse.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">OS Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../binfmt.html">Binary Loader</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Device Drivers</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Character Device Drivers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="1wire.html">One Wire Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="analog.html">Analog (ADC/DAC) Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="bch.html">Block Driver to Character Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="can.html">CAN Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="contactless.html">Constactless Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="crypto/index.html">Crypto Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="efuse.html">EFUSE Drivers</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">HX711 ADC DESIGNED FOR SCALES</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#reading">reading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ioctl">ioctl</a></li>
<li class="toctree-l5"><a class="reference internal" href="#hx711-example-program">hx711 example program</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="i2s.html">I2S Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="input/index.html">Input Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="ipcc.html">IPCC (Inter Processor Communication Controller) Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="leds/index.html">LEDS</a></li>
<li class="toctree-l4"><a class="reference internal" href="loop.html">Loop Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="math.html">Math Acceleration Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="modem.html">Modem Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="motor/index.html">Motor Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="note.html">Note Driver Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="nullzero.html"><code class="docutils literal notranslate"><span class="pre">dev_null.c</span></code> and <code class="docutils literal notranslate"><span class="pre">dev_zero.c</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="quadrature.html">Quadrature Encoder Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="rc.html">Remote Control Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="rf.html">RF Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="serial.html">Serial Device Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="timers/index.html">Timers Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="touchscreen.html">Touchscreen Device Drivers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../block/index.html">Block Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special/index.html">Specialized Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#lower-half-and-upper-half">Lower-half and upper-half</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#subdirectories-of-nuttx-drivers">Subdirectories of <code class="docutils literal notranslate"><span class="pre">nuttx/drivers</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#skeleton-files">Skeleton Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nxflat.html">NXFLAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nxgraphics/index.html">NX Graphics Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../paging.html">On-Demand Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../audio/index.html">Audio Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystem/index.html">NuttX File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../libs/index.html">NuttX libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../net/index.html">Network Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mm/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../syscall.html">Syscall Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html"><code class="docutils literal notranslate"><span class="pre">/tools</span></code> Host Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture-Specific Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boards.html">Boards Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmake.html">CMake Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openamp.html">OpenAMP Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../video.html">Video Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto.html">Crypto API Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wireless.html">Wireless Subsystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">OS Components</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Device Drivers</a></li>
          <li class="breadcrumb-item"><a href="index.html">Character Device Drivers</a></li>
      <li class="breadcrumb-item active">HX711 ADC DESIGNED FOR SCALES</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/components/drivers/character/hx711.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hx711-adc-designed-for-scales">
<h1>HX711 ADC DESIGNED FOR SCALES<a class="headerlink" href="#hx711-adc-designed-for-scales" title="Permalink to this heading"></a></h1>
<p>Driver contributed by Michał Łyszczek.</p>
<p>HX711 is a 24bit ADC (Analog Digital Converter) designed for weight scales.
This chip can be very slow. With internal oscillator and RATE pin pulled
down, it outputs only 10 samples per second. To not hog down CPU, driver
uses interrupt to detect when chip is ready. This will make read(2) blocking,
but system can do whatever it needs before chip is ready. Because of that
driver does not fully follow ADC API, but rather standard character device
(read only).</p>
<p>Values from tensometer can be easily read from shell with <code class="docutils literal notranslate"><span class="pre">cat</span></code> command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat /dev/hxx711_0
</pre></div>
</div>
<p>Altough it may be better to dump values with example <code class="docutils literal notranslate"><span class="pre">hx711</span></code> program,
since <code class="docutils literal notranslate"><span class="pre">cat</span></code> will just read until the end of time, and if ctrl+c is
not working, it will steal shell forever.</p>
<section id="reading">
<h2>reading<a class="headerlink" href="#reading" title="Permalink to this heading"></a></h2>
<p>Reading is done by calling standard, posix, read(2) function. Only one value
can be returned with single call to read(2). But an averaging function can
be enabled, so that driver will read N samples, average them, and then will
return single averaged value.</p>
<p>This function accepts two types of buffer.</p>
<p>If buffer is of size <code class="docutils literal notranslate"><span class="pre">sizeof(int32_t)</span></code> a int32 value will be stored in
a buffer. If buffer size of bigger than <code class="docutils literal notranslate"><span class="pre">sizeof(int32_t)</span></code> function will
store string representation of values in passed buffer.</p>
<p>Simple code to read and print value may look like this</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span>
<span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="s">&quot;/dev/hx711_0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="p">);</span>

<span class="k">for</span><span class="w"> </span><span class="p">(;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Read: %&quot;</span><span class="n">PRIi32</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="ioctl">
<h2>ioctl<a class="headerlink" href="#ioctl" title="Permalink to this heading"></a></h2>
<p>Since this chip (and driver) is designed for weight scale, kernel driver
can provide some processing to make life easier for userspace code. These
functions are implemented via ioctl(2) commands. In practice, non of these
can be used, but if you just open driver and read it, you will get raw
values from hx711 chip, which you will have to process yourself. If your
needs are more standard, it’s better to use kernel processing.</p>
<section id="hx711-set-average">
<h3>HX711_SET_AVERAGE<a class="headerlink" href="#hx711-set-average" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="n">average</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_SET_AVERAGE</span><span class="p">,</span><span class="w"> </span><span class="n">average</span><span class="p">);</span>
</pre></div>
</div>
<p>Driver will read this number of samples from hx711 and will return average
value of them all. To avoid corrupted data due to integer overflow, max
average value that can be set is 225. If you need to average more values
you will need to write your own code for that.</p>
</section>
<section id="hx711-set-channel">
<h3>HX711_SET_CHANNEL<a class="headerlink" href="#hx711-set-channel" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_SET_CHANNEL</span><span class="p">,</span><span class="w"> </span><span class="n">channel</span><span class="p">);</span>
</pre></div>
</div>
<p>HX711 has 2 channels, A and B, which can be swapped as necessary. Driver
automatically performs dummy read, so that next call to read(2) will return
value from new channel. When you switch to channel ‘B’, driver automatically
changes gain to 32 (the only possible value). Going back to ‘A’ will set
gain to 128.</p>
</section>
<section id="hx711-set-gain">
<h3>HX711_SET_GAIN<a class="headerlink" href="#hx711-set-gain" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">gain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_SET_GAIN</span><span class="p">,</span><span class="w"> </span><span class="n">gain</span><span class="p">);</span>
</pre></div>
</div>
<p>Set gain. Channel ‘A’ supports gain “128” and “64”. Channel ‘B’ has only
one gain option - 32.</p>
</section>
<section id="hx711-set-val-per-unit">
<h3>HX711_SET_VAL_PER_UNIT<a class="headerlink" href="#hx711-set-val-per-unit" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">val_per_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">813</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_SET_VAL_PER_UNIT</span><span class="p">,</span><span class="w"> </span><span class="n">val_per_unit</span><span class="p">);</span>
</pre></div>
</div>
<p>Driver can perform calculations so that you can read physical values like
grams, ounce or pounds, or your own artificial unit. You just need to specify
what value from tensometer coresponds to one unit.</p>
<p>Say you have tensometer that has max value of 1’000’000. Value 100’000 means
1kg and sensor is fully linear. If you want to get readings in kg, you would
set <code class="docutils literal notranslate"><span class="pre">val_per_unit</span></code> to 100’000. If you wanted output in grams, it would be
value of 100. To have tenths of grams precision, you would set it to 10.
Driver does not care about unit, you just pick one and stick to it.</p>
<p>Note that driver can only return integers, so if you set it to return unit
of kg, you will only get 1, 2, 3kg… and you won’t be able to sense 0.5kg
or 1.5kg. For that you would have to set value to 10’000, and driver would
return you values of 15 (for 1.5kg) or 0.5 (for 0.5kg).</p>
</section>
<section id="hx711-tare">
<h3>HX711_TARE<a class="headerlink" href="#hx711-tare" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="w"> </span><span class="n">precision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_TARE</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">precision</span><span class="p">);</span>
</pre></div>
</div>
<p>Every scale needs a tare function. Driver polls hx711 for some time, and if
it detects that scale is stable state, ioctl(2) will return with success,
and next read(2) call will take new tare value into consideration when
returning readings. Scale is assumed to be stable when several consecutive
readings are (min-max values) are within specified precition.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">HX711_SET_VAL_PER_UNIT</span></code> was set prior to this, you can pass value
in your unit. If you configured driver to work with grams, you can set
this value to 0.1 (gram) or 5 (gram).</p>
<p>If driver cannot get stable reading within some time, it will return with
ETIME errno set.</p>
<p>Important note, make sure you have set correct sign before taring, or
else you will double your tare value instead of zeroing it!</p>
</section>
<section id="hx711-sign">
<h3>HX711_SIGN<a class="headerlink" href="#hx711-sign" title="Permalink to this heading"></a></h3>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">sign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">HX711_SIGN</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sign</span><span class="p">);</span>
</pre></div>
</div>
<p>If values from drivers go lower when mass on scale goes higher you can swap
the sign. This may be necessary when tensometer was installed upside down.</p>
</section>
</section>
<section id="hx711-example-program">
<h2>hx711 example program<a class="headerlink" href="#hx711-example-program" title="Permalink to this heading"></a></h2>
<p>There is also companion program in Application Configuration —&gt; Examples
called <code class="docutils literal notranslate"><span class="pre">HX711</span> <span class="pre">driver</span> <span class="pre">example</span></code>. Main purpose of this is to show how to
use the driver, but it also is a very good tool for quickly debuging chip
from the shell, as it can dump readings and set all options.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-h       print this help message
-d&lt;path&gt; path to hx711 device, default: /dev/hx711_0
-t&lt;prec&gt; tares the scale with specified precision, might take few seconds to complete.
         If you set value per unit, precision is in units, otherwise it&#39;s raw values.
         If units are used, float can be passed like 0.1
-v&lt;val&gt;  value read that coresponds to one unit. This value has to be
         calibrated first before it&#39;s known
-s       reverse sign, if values decreses when mass increases, pass this
-D       dumps current device settings (like, average, channel, gain etc.)
-a&lt;avg&gt;  set how many samples should be averaged before returning value,
         values [1..225] are valid
-c&lt;chan&gt; set channel to read (either &#39;a&#39; or &#39;b&#39; is valid)
-g&lt;gain&gt; set adc gain, for channel &#39;a&#39; 64 and 128 are valid,
         for channel &#39;b&#39;, only 64 is valid
-r&lt;num&gt;  read this number of samples before exiting, samples will be printed
         on stdout as string, one sample per line

Set values are persistant, as in once set they are stored in driver and
will be applied during execution of this program.

If you specify only &lt;-a|-c|-g|-v|-t&gt; without -r, program will set new parameters
and exit. You can later call program again only with -r option to read
samples with previously set values. You can also pass all of them in one call

To test if you require CONFIG_ADC_HX711_ADD_DELAY option set, run as:
     hx711 -a225 -r128
This will load hx711 chip long enough to show any possible errors due to
lack of added delay.

Program executes in order: set options, tare, dump, run, so if you specify all
options, new settings will be applied, then new settings will be printed
and at the end program will tare the scale and print samples

Examples:

Set hx711 settings for first chip and exit:
     hx711 -a32 -ca -g64

Dump chip settings from different chip
     hx711 -d/dev/hx711_2 -D

Read 10 samples with previously set hx711 settings
     hx711 -r10

Change channel and read 32 samples (average setting won&#39;t change):
     hx711 -cb -r32

Set value per unit, to get output in grams, and then tare with 10g precision
     hx711 -v 813 -t 10
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="efuse.html" class="btn btn-neutral float-left" title="EFUSE Drivers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="i2s.html" class="btn btn-neutral float-right" title="I2S Drivers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>