<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ST Nucleo L552ZE-Q &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ST STM32L562E-DK" href="../stm32l562e-dk/index.html" />
    <link rel="prev" title="ST STM32L5" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">ARM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../a64/index.html">Allwinner A64</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imxrt/index.html">i.MX RT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/index.html">Nordic nRF52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf53/index.html">Nordic nRF53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf91/index.html">Nordic nRF91</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp2040/index.html">rp2040</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k1xx/index.html">NXP S32K1XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k3xx/index.html">NXP S32K3XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samv7/index.html">SAM V7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f0/index.html">ST STM32F0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f1/index.html">ST STM32F1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f2/index.html">ST STM32F2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f3/index.html">ST STM32F3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f4/index.html">ST STM32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f7/index.html">ST STM32F7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g0/index.html">ST STM32G0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g4/index.html">ST STM32G4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h7/index.html">ST STM32H7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l0/index.html">ST STM32L0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l1/index.html">ST STM32L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l4/index.html">ST STM32L4</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">ST STM32L5</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#supported-mcus">Supported MCUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#peripheral-support">Peripheral Support</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">ST Nucleo L552ZE-Q</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32l562e-dk/index.html">ST STM32L562E-DK</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32u5/index.html">ST STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wb/index.html">ST STM32WB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wl5/index.html">ST STM32WL5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../xmc4/index.html">Infineon XMC4000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">AVR8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">ARM</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">ST STM32L5</a></li>
      <li class="breadcrumb-item active">ST Nucleo L552ZE-Q</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/platforms/arm/stm32l5/boards/nucleo-l552ze/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="st-nucleo-l552ze-q">
<h1>ST Nucleo L552ZE-Q<a class="headerlink" href="#st-nucleo-l552ze-q" title="Permalink to this heading"></a></h1>
<p>This page discusses the port of NuttX to the STMicro Nucleo-L552ZE
board.  That board features the STM32L552ZET6Q MCU with 512KiB of FLASH
and 256KiB of SRAM.</p>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Permalink to this heading"></a></h2>
<p>2021-03-03: The board now boots and the basic NSH configuration works
without problem.</p>
</section>
<section id="leds">
<h2>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h2>
<p>The Board provides a 3 user LEDs, LD1-LD3
LED1 (Green)      PC_7
LED2 (Blue)       PB_7
LED3 (Red)        PA_9</p>
<ul class="simple">
<li><p>When the I/O is HIGH value, the LEDs are on.</p></li>
<li><p>When the I/O is LOW, the LEDs are off.</p></li>
</ul>
<p>These LEDs are not used by the board port unless CONFIG_ARCH_LEDS is
defined.  In that case, the usage by the board port is defined in
include/board.h and src/stm32_autoleds.c. The LEDs are used to encode OS
related events as follows when the LEDs are available:</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>SYMBOL</p></td>
<td><p>Meaning</p></td>
<td><p>RED</p></td>
<td><p>GREEN</p></td>
<td><p>Note</p></td>
</tr>
</tbody>
</table>
<p>LED_STARTED          NuttX has been started    OFF  OFF   OFF
LED_HEAPALLOCATE     Heap has been allocated   OFF  OFF   ON
LED_IRQSENABLED      Interrupts enabled        OFF  ON    OFF
LED_STACKCREATED     Idle stack created        OFF  ON    ON
LED_INIRQ            In an interrupt           NC   NC    ON  (momentary)
LED_SIGNAL           In a signal handler       NC   ON    OFF (momentary)
LED_ASSERTION        An assertion failed       ON   NC    ON  (momentary)
LED_PANIC            The system has crashed    ON   OFF   OFF (flashing 2Hz)
LED_IDLE             MCU is is sleep mode      ON   OFF   OFF
===================  =======================   ===  ===== =======</p>
</div></blockquote>
<dl class="simple">
<dt>OFF -    means that the OS is still initializing. Initialization is very fast</dt><dd><p>so if you see this at all, it probably means that the system is
hanging up somewhere in the initialization phases.</p>
</dd>
</dl>
<p>GREEN -  This means that the OS completed initialization.</p>
<dl class="simple">
<dt>BLUE  -  Whenever and interrupt or signal handler is entered, the BLUE LED is</dt><dd><p>illuminated and extinguished when the interrupt or signal handler
exits.</p>
</dd>
<dt>VIOLET - If a recovered assertion occurs, the RED and blue LED will be</dt><dd><p>illuminated briefly while the assertion is handled.  You will
probably never see this.</p>
</dd>
<dt>Flashing RED - In the event of a fatal crash, all other LEDs will be</dt><dd><p>extinguished and RED LED will FLASH at a 2Hz rate.</p>
</dd>
</dl>
<p>Thus if the GREEN LED is lit, NuttX has successfully booted and is,
apparently, running normally.  If the RED LED is flashing at
approximately 2Hz, then a fatal error has been detected and the system has
halted.</p>
</section>
<section id="buttons">
<h2>Buttons<a class="headerlink" href="#buttons" title="Permalink to this heading"></a></h2>
<p>B1 USER: the user button is connected to the I/O PC13 (pin 2) of the STM32
microcontroller.</p>
</section>
<section id="serial-consoles">
<h2>Serial Consoles<a class="headerlink" href="#serial-consoles" title="Permalink to this heading"></a></h2>
<section id="usart3">
<h3>USART3<a class="headerlink" href="#usart3" title="Permalink to this heading"></a></h3>
<p>Default board is configured to use USART3 as console.</p>
<p>Pins and Connectors:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FUNC</p></th>
<th class="head"><p>GPIO</p></th>
<th class="head"><p>Pin</p></th>
<th class="head"><p>NAME</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TXD:</p></td>
<td><p>PD8</p></td>
<td><p>CN10-14</p></td>
<td><p>D1 TX</p></td>
</tr>
<tr class="row-odd"><td><p>RXD:</p></td>
<td><p>PD9</p></td>
<td><p>CN10-16</p></td>
<td><p>D0 RX</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>You must use a 3.3 TTL to RS-232 converter or a USB to 3.3V TTL</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Nucleo 144</p></th>
<th class="head"><p>FTDI TTL-232R-3V3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TXD - CN10-14</p></td>
<td><p>RXD - Pin 5 (Yellow)</p></td>
</tr>
<tr class="row-odd"><td><p>RXD - CN10-16</p></td>
<td><p>TXD - Pin 4 (Orange)</p></td>
</tr>
<tr class="row-even"><td><p>GND</p></td>
<td><p>GND   Pin 1  (Black)</p></td>
</tr>
</tbody>
</table>
<p>Note: you will be reverse RX/TX</p>
</div></blockquote>
<p>Use make menuconfig to configure USART3 as the console:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32L5_USART3=y
CONFIG_USART3_SERIALDRIVER=y
CONFIG_USART3_SERIAL_CONSOLE=y
CONFIG_USART3_RXBUFSIZE=256
CONFIG_USART3_TXBUFSIZE=256
CONFIG_USART3_BAUD=115200
CONFIG_USART3_BITS=8
CONFIG_USART3_PARITY=0
CONFIG_USART3_2STOP=0
</pre></div>
</div>
</section>
<section id="virtual-com-port">
<h3>Virtual COM Port<a class="headerlink" href="#virtual-com-port" title="Permalink to this heading"></a></h3>
<p>Yet another option is to use LPUART1 and the USB virtual COM port.  This
option may be more convenient for long term development, but is painful
to use during board bring-up. However as LPUART peripheral has not been
implemented for STM32L5, this cannot currently be used.</p>
<p>Solder Bridges.  This configuration requires:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PG7 LPUART1 TX SB127 ON and SB124 OFF (Default)
PG8 LPUART1 RX SB129 ON and SB126 OFF (Default)
</pre></div>
</div>
<p>You can also put USART3 on the virtual COM port by reworking the solder
bridges as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PD8 USART3 TX SB127 OFF and SB124 ON
PD9 USART3 RX SB129 OFF and SB126 ON
</pre></div>
</div>
</section>
<section id="default">
<h3>Default<a class="headerlink" href="#default" title="Permalink to this heading"></a></h3>
<p>As shipped, the virtual COM port is enabled.</p>
</section>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<section id="information-common-to-all-configurations">
<h3>Information Common to All Configurations<a class="headerlink" href="#information-common-to-all-configurations" title="Permalink to this heading"></a></h3>
<p>Each configuration is maintained in a sub-directory and can be
selected as follow:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tools/configure.sh nucleo-l552ze:&lt;subdir&gt;
</pre></div>
</div>
<p>Before building, make sure the PATH environment variable includes the
correct path to the directory than holds your toolchain binaries.</p>
<p>And then build NuttX by simply typing the following.  At the conclusion of
the make, the nuttx binary will reside in an ELF file called, simply, nuttx.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make oldconfig
make
</pre></div>
</div>
<p>The &lt;subdir&gt; that is provided above as an argument to the tools/configure.sh
must be is one of the following.</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>These configurations use the mconf-based configuration tool.  To
change any of these configurations using that tool, you should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the kconfig-mconf tool.  See nuttx/README.txt
see additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute ‘make menuconfig’ in nuttx/ in order to start the
reconfiguration process.</p></li>
</ol>
</li>
<li><p>Unless stated otherwise, all configurations generate console
output on USART3, as described above under “Serial Console”.  The
elevant configuration settings are listed below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32L5_USART3=y
CONFIG_STM32L5_USART3_SERIALDRIVER=y
CONFIG_STM32L5_USART=y

CONFIG_USART3_SERIALDRIVER=y
CONFIG_USART3_SERIAL_CONSOLE=y

CONFIG_USART3_RXBUFSIZE=256
CONFIG_USART3_TXBUFSIZE=256
CONFIG_USART3_BAUD=115200
CONFIG_USART3_BITS=8
CONFIG_USART3_PARITY=0
CONFIG_USART3_2STOP=0
</pre></div>
</div>
</li>
<li><p>All of these configurations are set up to build under Linux using the
“GNU Tools for ARM Embedded Processors” that is maintained by ARM
(unless stated otherwise in the description of the configuration).</p>
<blockquote>
<div><p><a class="reference external" href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm">https://developer.arm.com/open-source/gnu-toolchain/gnu-rm</a></p>
</div></blockquote>
<p>That toolchain selection can easily be reconfigured using
‘make menuconfig’.  Here are the relevant current settings:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Build Setup:
  CONFIG_HOST_LINUX=y                 : Linux environment

System Type -&gt; Toolchain:
  CONFIG_ARM_TOOLCHAIN_GNU_EABI=y : GNU ARM EABI toolchain
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="configuration-sub-directories">
<h2>Configuration sub-directories<a class="headerlink" href="#configuration-sub-directories" title="Permalink to this heading"></a></h2>
<section id="nsh">
<h3>nsh:<a class="headerlink" href="#nsh" title="Permalink to this heading"></a></h3>
<p>Configures the NuttShell (nsh) located at examples/nsh.  This
configuration is focused on low level, command-line driver testing.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="ST STM32L5" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../stm32l562e-dk/index.html" class="btn btn-neutral float-right" title="ST STM32L562E-DK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>