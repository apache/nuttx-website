<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HY-MiniSTM32V &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="maple" href="../maple/index.html" />
    <link rel="prev" title="fire-stm2v2" href="../fire-stm32v2/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">ARM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../a1x/index.html">Allwinner A10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../am335x/index.html">TI/Sitara AM335x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../at32/index.html">Artery AT32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bcm2708/index.html">Broadcom BCM2708 (removed)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../c5471/index.html">TI TMS320-C5471</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cxd56xx/index.html">Sony CXD56xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dm320/index.html">TI TMS320-DM320</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../efm32/index.html">SiLabs EFM32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fvp-v8r-aarch32/index.html">FVP ARMv8-R Virt Chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx1/index.html">NXP/Freescale i.MX1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx6/index.html">NXP/Freescale i.MX6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imxrt/index.html">i.MX RT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kinetis/index.html">NXP/FreeScale Kinetis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kl/index.html">NXP/FreeScale KLxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lc823450/index.html">ON Semiconductor LC823450</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc17xx/index.html">NXP LPC17xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc214x/index.html">NXP LPC214x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc2378/index.html">NXP LPC2378</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc40xx/index.html">NXP LPC40xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc43xx/index.html">NXP LPC43xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc54xx/index.html">NXP LPC54xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../max326xx/index.html">Maxim Integrated MAX32660</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../moxart/index.html">Moxa NP51x0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/index.html">Nordic nRF52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf53/index.html">Nordic nRF53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf91/index.html">Nordic nRF91</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nuc1xx/index.html">nuvoTon NUC120</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp2040/index.html">rp2040</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k1xx/index.html">NXP S32K1XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k3xx/index.html">NXP S32K3XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sam34/index.html">Microchip SAM34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sama5/index.html">Microchip SAMA5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd2l2/index.html">Microchip SAMD2x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samv7/index.html">Microchip SAM V7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f0/index.html">ST STM32F0</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">ST STM32F1</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#supported-mcus">Supported MCUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#peripheral-support">Peripheral Support</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="../cloudctrl/index.html">CloudController</a></li>
<li class="toctree-l5"><a class="reference internal" href="../et-stm32-stamp/index.html">ET-STM32 Stamp</a></li>
<li class="toctree-l5"><a class="reference internal" href="../fire-stm32v2/index.html">fire-stm2v2</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">HY-MiniSTM32V</a></li>
<li class="toctree-l5"><a class="reference internal" href="../maple/index.html">maple</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f103rb/index.html">ST Nucleo F103RB</a></li>
<li class="toctree-l5"><a class="reference internal" href="../olimexino-stm32/index.html">olimexino-stm32</a></li>
<li class="toctree-l5"><a class="reference internal" href="../shenzhou/index.html">Shenzhou IV</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm3210e-eval/index.html">ST STM3210E-EVAL</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32_tiny/index.html">STM32 Tiny</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32butterfly2/index.html">STM32BUTTERFLY2</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32f103-minimum/index.html">stm32f103-minimum</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32vldiscovery/index.html">ST STM32VLDiscovery</a></li>
<li class="toctree-l5"><a class="reference internal" href="../viewtool-stm32f107/index.html">ViewTool STM32F103/F107</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f2/index.html">ST STM32F2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f3/index.html">ST STM32F3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f4/index.html">ST STM32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f7/index.html">ST STM32F7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g0/index.html">ST STM32G0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g4/index.html">ST STM32G4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h7/index.html">ST STM32H7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l0/index.html">ST STM32L0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l1/index.html">ST STM32L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l4/index.html">ST STM32L4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l5/index.html">ST STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32u5/index.html">ST STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wb/index.html">ST STM32WB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wl5/index.html">ST STM32WL5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../str71x/index.html">ST STR71</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tiva/index.html">TI/Stellaris Tiva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tms570/index.html">TI/Hercules TMS570xxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../xmc4/index.html">Infineon XMC4000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">ARM</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">ST STM32F1</a></li>
      <li class="breadcrumb-item active">HY-MiniSTM32V</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/platforms/arm/stm32f1/boards/hymini-stm32/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hy-ministm32v">
<h1>HY-MiniSTM32V<a class="headerlink" href="#hy-ministm32v" title="Permalink to this heading"></a></h1>
<p>This page discusses issues unique to NuttX configurations for the
HY-MiniSTM32V development board.</p>
<section id="st-bootloader">
<h2>ST Bootloader<a class="headerlink" href="#st-bootloader" title="Permalink to this heading"></a></h2>
<p>A bootloader code is available in an internal boot ROM memory (called
‘system memory’ in STM documentation) in all STM32 MCUs. For the F103xx
this bootloader can be used to upload &amp; flash a firmware image through
the USART1.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>The bootloader is activated by the BOOT0 / BOOT1 pins after a MCU reset.
See STM application note 2606 for more details.</p></li>
<li><p>On the hymini-stm32 board the USART1 is connected to a PL2303
USB&lt;-&gt;serial converter.</p></li>
</ul>
<p>To enter bootloader mode in the hymini-stm32 board:</p>
<ul class="simple">
<li><p>Press the ‘boot0’ button  (located next to ‘reset’ button)</p></li>
<li><p>While boot0 button is pressed, reset the board through the reset button.</p></li>
<li><p>Once you pressed / released the ‘reset’ button, the MCU has (re)started
in bootloader mode (and you can then release the boot0 button).</p></li>
</ul>
<p>A flash utility must be used on your development workstation to upload / flash
a firmware image. (The ‘stm32flash’ open source tool, available at
<a class="reference external" href="http://stm32flash.googlecode.com/">http://stm32flash.googlecode.com/</a> has been used successfully).</p>
</section>
<section id="leds">
<h2>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h2>
<p>The HY-MiniSTM32 board provides only two controllable LEDs labeled LED1 and LED2.
Usage of these LEDs is defined in include/board.h and src/up_leds.c.
They are encoded as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>=================== ======================= ======= =======
SYMBOL              Meaning                 LED1*   LED2
=================== ======================= ======= =======
LED_STARTED         NuttX has been started  OFF     OFF
LED_HEAPALLOCATE    Heap has been allocated ON      OFF
LED_IRQSENABLED     Interrupts enabled      OFF     ON
LED_STACKCREATED    Idle stack created      ON      OFF
LED_INIRQ           In an interrupt**       OFF     N/C
LED_SIGNAL          In a signal handler***  N/C     ON
LED_ASSERTION       An assertion failed     ON      ON
LED_PANIC           The system has crashed  BLINK   BLINK
LED_IDLE            STM32 is is sleep mode  (Optional, not used)
=================== ======================= ======= =======

* If NuttX starts correctly, normal state is to have LED1 on and LED2 off.
** LED1 is turned off during interrupt.
*** LED2 is turned on during signal handler.
</pre></div>
</div>
</section>
<section id="rtc">
<h2>RTC<a class="headerlink" href="#rtc" title="Permalink to this heading"></a></h2>
<p>The STM32 RTC may configured using the following settings.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_RTC - Enables general support for a hardware RTC. Specific
  architectures may require other specific settings.
CONFIG_RTC_HIRES - The typical RTC keeps time to resolution of 1
  second, usually supporting a 32-bit time_t value.  In this case,
  the RTC is used to &amp;quot;seed&amp;quot; the normal NuttX timer and the
  NuttX timer provides for higher resolution time. If CONFIG_RTC_HIRES
  is enabled in the NuttX configuration, then the RTC provides higher
  resolution time and completely replaces the system timer for purpose of
  date and time.
  CONFIG_RTC_FREQUENCY - If CONFIG_RTC_HIRES is defined, then the
  frequency of the high resolution RTC must be provided.  If CONFIG_RTC_HIRES
  is not defined, CONFIG_RTC_FREQUENCY is assumed to be one.
CONFIG_RTC_ALARM - Enable if the RTC hardware supports setting of an alarm.
  A callback function will be executed when the alarm goes off
</pre></div>
</div>
<p>In hi-res mode, the STM32 RTC operates only at 16384Hz.  Overflow interrupts
are handled when the 32-bit RTC counter overflows every 3 days and 43 minutes.
A BKP register is incremented on each overflow interrupt creating, effectively,
a 48-bit RTC counter.</p>
<p>In the lo-res mode, the RTC operates at 1Hz.  Overflow interrupts are not handled
(because the next overflow is not expected until the year 2106.</p>
<p>WARNING:  Overflow interrupts are lost whenever the STM32 is powered down.  The
overflow interrupt may be lost even if the STM32 is powered down only momentarily.
Therefore hi-res solution is only useful in systems where the power is always on.</p>
</section>
<section id="hy-mini-specific-configuration-options">
<h2>HY-Mini specific Configuration Options<a class="headerlink" href="#hy-mini-specific-configuration-options" title="Permalink to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_ARCH - Identifies the arch/ subdirectory.  This should be set to:

       CONFIG_ARCH=arm

CONFIG_ARCH_family - For use in C code:

       CONFIG_ARCH_ARM=y

CONFIG_ARCH_architecture - For use in C code:

       CONFIG_ARCH_CORTEXM3=y

CONFIG_ARCH_CHIP - Identifies the arch/*/chip subdirectory

       CONFIG_ARCH_CHIP=stm32

CONFIG_ARCH_CHIP_name - For use in C code to identify the exact chip:

       CONFIG_ARCH_CHIP_STM32F103VC

CONFIG_ARCH_BOARD_STM32_CUSTOM_CLOCKCONFIG - Enables special STM32 clock
configuration features.

       CONFIG_ARCH_BOARD_STM32_CUSTOM_CLOCKCONFIG=n

CONFIG_ARCH_BOARD - Identifies the boards/ subdirectory and
hence, the board that supports the particular chip or SoC.

       CONFIG_ARCH_BOARD=hymini-stm32v (for the HY-Mini development board)

CONFIG_ARCH_BOARD_name - For use in C code

       CONFIG_ARCH_BOARD_HYMINI_STM32V=y

CONFIG_ARCH_LOOPSPERMSEC - Must be calibrated for correct operation
of delay loops

CONFIG_ENDIAN_BIG - define if big endian (default is little
endian)

CONFIG_RAM_SIZE - Describes the installed DRAM (SRAM in this case):

       CONFIG_RAM_SIZE=0x0000C000 (48Kb)

CONFIG_RAM_START - The start address of installed DRAM

       CONFIG_RAM_START=0x20000000

CONFIG_ARCH_LEDS - Use LEDs to show state. Unique to boards that
have LEDs

CONFIG_ARCH_INTERRUPTSTACK - This architecture supports an interrupt
stack. If defined, this symbol is the size of the interrupt
stack in bytes.  If not defined, the user task stacks will be
used during interrupt handling.

CONFIG_ARCH_STACKDUMP - Do stack dumps after assertions

CONFIG_ARCH_LEDS -  Use LEDs to show state. Unique to board architecture.

Individual subsystems can be enabled:
    AHB
    ---
    CONFIG_STM32_DMA1
    CONFIG_STM32_DMA2
    CONFIG_STM32_CRC
    CONFIG_STM32_FSMC
    CONFIG_STM32_SDIO

    APB1
    ----
    CONFIG_STM32_TIM2
    CONFIG_STM32_TIM3    (required for PWM control of LCD backlight)
    CONFIG_STM32_TIM4
    CONFIG_STM32_TIM5
    CONFIG_STM32_TIM6
    CONFIG_STM32_TIM7
    CONFIG_STM32_IWDG
    CONFIG_STM32_WWDG
    CONFIG_STM32_IWDG
    CONFIG_STM32_SPI2
    CONFIG_STM32_SPI4
    CONFIG_STM32_USART2
    CONFIG_STM32_USART3
    CONFIG_STM32_UART4
    CONFIG_STM32_UART5
    CONFIG_STM32_I2C1
    CONFIG_STM32_I2C2
    CONFIG_STM32_USB
    CONFIG_STM32_CAN1
    CONFIG_STM32_BKP
    CONFIG_STM32_PWR
    CONFIG_STM32_DAC
    CONFIG_STM32_USB

    APB2
    ----
    CONFIG_STM32_ADC1
    CONFIG_STM32_ADC2
    CONFIG_STM32_TIM1
    CONFIG_STM32_SPI1
    CONFIG_STM32_TIM8
    CONFIG_STM32_USART1
    CONFIG_STM32_ADC3

  Timer and I2C devices may need to the following to force power to be applied
  unconditionally at power up.  (Otherwise, the device is powered when it is
  initialized).

    CONFIG_STM32_FORCEPOWER

  The Timer3 alternate mapping is required for PWM control of LCD backlight

    CONFIG_STM32_TIM3_PARTIAL_REMAP=y

  Timer devices may be used for different purposes.  One special purpose is
  to generate modulated outputs for such things as motor control.  If CONFIG_STM32_TIMn
  is defined (as above) then the following may also be defined to indicate that
  the timer is intended to be used for pulsed output modulation, ADC conversion,
  or DAC conversion.  Note that ADC/DAC require two definition:  Not only do you have
  to assign the timer (n) for used by the ADC or DAC, but then you also have to
  configure which ADC or DAC (m) it is assigned to.

    CONFIG_STM32_TIMn_PWM   Reserve timer n for use by PWM, n=1,..,8
    CONFIG_STM32_TIMn_ADC   Reserve timer n for use by ADC, n=1,..,8
    CONFIG_STM32_TIMn_ADCm  Reserve timer n to trigger ADCm, n=1,..,8, m=1,..,3
    CONFIG_STM32_TIMn_DAC   Reserve timer n for use by DAC, n=1,..,8
    CONFIG_STM32_TIMn_DACm  Reserve timer n to trigger DACm, n=1,..,8, m=1,..,2

  Others alternate pin mappings available:

    CONFIG_STM32_TIM1_FULL_REMAP
    CONFIG_STM32_TIM1_PARTIAL_REMAP
    CONFIG_STM32_TIM2_FULL_REMAP
    CONFIG_STM32_TIM2_PARTIAL_REMAP_1
    CONFIG_STM32_TIM2_PARTIAL_REMAP_2
    CONFIG_STM32_TIM3_FULL_REMAP
    CONFIG_STM32_TIM3_PARTIAL_REMAP
    CONFIG_STM32_TIM4_REMAP
    CONFIG_STM32_USART1_REMAP
    CONFIG_STM32_USART2_REMAP
    CONFIG_STM32_USART3_FULL_REMAP
    CONFIG_STM32_USART3_PARTIAL_REMAP
    CONFIG_STM32_SPI1_REMAP
    CONFIG_STM32_SPI3_REMAP
    CONFIG_STM32_I2C1_REMAP
    CONFIG_STM32_CAN1_REMAP1
    CONFIG_STM32_CAN1_REMAP2
    CONFIG_STM32_CAN2_REMAP

  STM32F103V specific device driver settings

    CONFIG_U[S]ARTn_SERIAL_CONSOLE - selects the USARTn (n=1,2,3) or UART
       m (m=4,5) for the console and ttys0 (default is the USART1).

       Note: USART1 is connected to a PL2303 serial to USB converter.
       So USART1 is available through USB port labeled CN3 on the board.

    CONFIG_U[S]ARTn_RXBUFSIZE - Characters are buffered as received.
       This specific the size of the receive buffer
    CONFIG_U[S]ARTn_TXBUFSIZE - Characters are buffered before
       being sent.  This specific the size of the transmit buffer
    CONFIG_U[S]ARTn_BAUD - The configure BAUD of the UART.  Must be
    CONFIG_U[S]ARTn_BITS - The number of bits.  Must be either 7 or 8.
    CONFIG_U[S]ARTn_PARTIY - 0=no parity, 1=odd parity, 2=even parity
    CONFIG_U[S]ARTn_2STOP - Two stop bits

    CONFIG_STM32_SPI_INTERRUPTS - Select to enable interrupt driven SPI
      support. Non-interrupt-driven, poll-waiting is recommended if the
      interrupt rate would be to high in the interrupt driven case.
    CONFIG_STM32_SPIx_DMA - Use DMA to improve SPIx transfer performance.
      Cannot be used with CONFIG_STM32_SPI_INTERRUPT.

    CONFIG_SDIO_DMA - Support DMA data transfers.  Requires CONFIG_STM32_SDIO
      and CONFIG_STM32_DMA2.
    CONFIG_STM32_SDIO_PRI - Select SDIO interrupt priority.  Default: 128
    CONFIG_STM32_SDIO_DMAPRIO - Select SDIO DMA interrupt priority.
      Default:  Medium
    CONFIG_STM32_SDIO_WIDTH_D1_ONLY - Select 1-bit transfer mode.  Default:
      4-bit transfer mode.
    CONFIG_MMCSD_HAVE_CARDDETECT - Select if SDIO driver card detection
      is 100% accurate  (it is on the  HY-MiniSTM32V)

  HY-MiniSTM32V CAN Configuration

    CONFIG_CAN - Enables CAN support (one or both of CONFIG_STM32_CAN1 or
      CONFIG_STM32_CAN2 must also be defined)
    CONFIG_CAN_EXTID - Enables support for the 29-bit extended ID.  Default
      Standard 11-bit IDs.
    CONFIG_CAN_FIFOSIZE - The size of the circular buffer of CAN messages.
      Default: 8
    CONFIG_CAN_NPENDINGRTR - The size of the list of pending RTR requests.
      Default: 4
    CONFIG_CAN_LOOPBACK - A CAN driver may or may not support a loopback
      mode for testing. The STM32 CAN driver does support loopback mode.
    CONFIG_STM32_CAN1_BAUD - CAN1 BAUD rate.  Required if CONFIG_STM32_CAN1
      is defined.
    CONFIG_STM32_CAN2_BAUD - CAN1 BAUD rate.  Required if CONFIG_STM32_CAN2
      is defined.
    CONFIG_STM32_CAN_TSEG1 - The number of CAN time quanta in segment 1.
      Default: 6
    CONFIG_STM32_CAN_TSEG2 - the number of CAN time quanta in segment 2.
      Default: 7
    CONFIG_STM32_CAN_REGDEBUG - If CONFIG_DEBUG_FEATURES is set, this will generate an
      dump of all CAN registers.

  HY-MiniSTM32V LCD Hardware Configuration.  The HY-Mini board may be delivered with
  either an SSD1289 or an R61505U LCD controller.

    CONFIG_LCD_R61505U - Selects the R61505U LCD controller.
    CONFIG_LCD_SSD1289 - Selects the SSD1289 LCD controller.

  The following options apply for either LCD controller:

    CONFIG_NX_LCDDRIVER - To be defined to include LCD driver
    CONFIG_LCD_LANDSCAPE - Define for 320x240 display &quot;landscape&quot;
      support. In this orientation, the HY-MiniSTM32V&#39;s
      LCD used connector is at the right of the display.
      Default is this 320x240 &quot;landscape&quot; orientation
    CONFIG_LCD_PORTRAIT - Define for 240x320 display &quot;portrait&quot;
      orientation support.  In this orientation, the HY-MiniSTM32V&#39;s
      LCD used connector is at the bottom of the display. Default is
      320x240 &quot;landscape&quot; orientation.
    CONFIG_LCD_RPORTRAIT - Define for 240x320 display &quot;reverse
      portrait&quot; orientation support.  In this orientation, the
      HY-MiniSTM32V&#39;s LCD used connector is at the top of the display.
      Default is 320x240 &quot;landscape&quot; orientation.
    CONFIG_LCD_BACKLIGHT - Define to support an adjustable backlight
      using timer 3.  The granularity of the settings is determined
      by CONFIG_LCD_MAXPOWER.  Requires CONFIG_STM32_TIM3.
</pre></div>
</div>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<p>NOTES:</p>
<ul class="simple">
<li><p>All configurations described below are using the mconf-based
configuration tool.  To change their configuration using that tool, you
should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the kconfig-mconf tool.  See nuttx/README.txt
see additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute ‘make menuconfig’ in nuttx/ in order to start the
reconfiguration process.</p></li>
</ol>
</li>
<li><p>All configurations use a generic GNU EABI toolchain for Linux by
default.</p></li>
<li><p>They are all configured to generate a binary image that can be flashed
through the STM32 internal bootloader.</p></li>
</ul>
<p>Each HY-MiniSTM32V configuration is maintained in a sub-directory and
can be selected as follow:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tools/configure.sh hymini-stm32v:&lt;subdir&gt;
</pre></div>
</div>
<p>Where &lt;subdir&gt; is one of the following:</p>
<section id="nsh-and-nsh2">
<h3>nsh and nsh2<a class="headerlink" href="#nsh-and-nsh2" title="Permalink to this heading"></a></h3>
<p>Configure the NuttShell (nsh) located at examples/nsh.</p>
<p>Differences between the two NSH configurations:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>=========== ======================= ================================
            nsh                     nsh2
=========== ======================= ================================
Serial      Debug output: USART1    Debug output: USART1
Console:    NSH output:   USART1    NSH output:   USART1 (2)
=========== ======================= ================================
microSD     Yes (5)                 Yes (5)
Support
=========== ======================= ================================
FAT FS      CONFIG_FAT_LCNAMES=y    CONFIG_FAT_LCNAMES=y
Config      CONFIG_FAT_LFN=n        CONFIG_FAT_LFN=y (3)
=========== ======================= ================================
LCD Driver  No                      Yes
Support
=========== ======================= ================================
RTC Support No                      Yes
=========== ======================= ================================
Support for No                      Yes
Built=in
Apps
=========== ======================= ================================
Built=in    None                    apps/examples/nx
Apps                                apps/examples/nxhello
                                    apps/system/usbmsc (4)
                                    apps/examples/nximage
=========== ======================= ================================

(1) You will probably need to the PATH environment variable to set
    up the correct PATH variable for whichever toolchain you may use.
(2) When any other device other than /dev/console is used for a user
    interface, (1) linefeeds (\n) will not be expanded to carriage return
    / linefeeds \r\n). You will need to configure your terminal program
    to account for this. And (2) input is not automatically echoed so
    you will have to turn local echo on.
(3) Microsoft holds several patents related to the design of
    long file names in the FAT file system.  Please refer to the
    details in the top-level NOTICE file.  Please do not use FAT
    long file name unless you are familiar with these patent issues.
(4) When built as an NSH add-on command (CONFIG_NSH_BUILTIN_APPS=y),
    Caution should be used to assure that the SD drive is not in use when
    the USB storage device is configured.  Specifically, the SD driver
    should be unmounted like::

      nsh&gt; mount -t vfat /dev/mmcsd0 /mnt/sdcard # Card is mounted in NSH
      ...
      nsh&gt; umount /mnd/sdcard                    # Unmount before connecting USB!!!
      nsh&gt; msconn                                # Connect the USB storage device
      ...
      nsh&gt; msdis                                 # Disconnect USB storate device
      nsh&gt; mount -t vfat /dev/mmcsd0 /mnt/sdcard # Restore the mount

    Failure to do this could result in corruption of the SD card format.
(5) Option CONFIG_NSH_ARCHINIT must be enabled in order to call the SDIO slot
    initialization code.
</pre></div>
</div>
</section>
<section id="usbmsc">
<h3>usbmsc<a class="headerlink" href="#usbmsc" title="Permalink to this heading"></a></h3>
<p>This configuration directory exercises the USB mass storage
class driver at system/usbmsc.  See examples/README.txt for
more information.</p>
</section>
<section id="usbnsh">
<h3>usbnsh<a class="headerlink" href="#usbnsh" title="Permalink to this heading"></a></h3>
<p>This is another NSH example.  If differs from other ‘nsh’ configurations
in that this configurations uses a USB serial device for console I/O.</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>This configuration does have UART2 output enabled and set up as
the system logging device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_SYSLOG_CHAR=y               : Use a character device for system logging
CONFIG_SYSLOG_DEVPATH=&quot;/dev/ttyS0&quot; : UART2 will be /dev/ttyS0
</pre></div>
</div>
<p>However, there is nothing to generate SYSLOG output in the default
configuration so nothing should appear on UART2 unless you enable
some debug output or enable the USB monitor.</p>
</li>
<li><p>Enabling USB monitor SYSLOG output.  If tracing is enabled, the USB
device will save encoded trace output in in-memory buffer; if the
USB monitor is enabled, that trace buffer will be periodically
emptied and dumped to the system logging device (UART2 in this
configuration):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   CONFIG_USBDEV_TRACE=y                   : Enable USB trace feature
   CONFIG_USBDEV_TRACE_NRECORDS=128        : Buffer 128 records in memory
   CONFIG_NSH_USBDEV_TRACE=n               : No builtin tracing from NSH
   CONFIG_NSH_ARCHINIT=y                   : Automatically start the USB monitor
   CONFIG_USBMONITOR=y              : Enable the USB monitor daemon
   CONFIG_USBMONITOR_STACKSIZE=2048 : USB monitor daemon stack size
   CONFIG_USBMONITOR_PRIORITY=50    : USB monitor daemon priority
   CONFIG_USBMONITOR_INTERVAL=2     : Dump trace data every 2 seconds

   CONFIG_USBMONITOR_TRACEINIT=y    : Enable TRACE output
   CONFIG_USBMONITOR_TRACECLASS=y
   CONFIG_USBMONITOR_TRACETRANSFERS=y
   CONFIG_USBMONITOR_TRACECONTROLLER=y
   CONFIG_USBMONITOR_TRACEINTERRUPTS=y

Using the Prolifics PL2303 Emulation
------------------------------------
You could also use the non-standard PL2303 serial device instead of
the standard CDC/ACM serial device by changing::

  CONFIG_CDCACM=y               : Disable the CDC/ACM serial device class
  CONFIG_CDCACM_CONSOLE=y       : The CDC/ACM serial device is NOT the console
  CONFIG_PL2303=y               : The Prolifics PL2303 emulation is enabled
  CONFIG_PL2303_CONSOLE=y       : The PL2303 serial device is the console
</pre></div>
</div>
</li>
</ol>
</section>
<section id="usbserial">
<h3>usbserial<a class="headerlink" href="#usbserial" title="Permalink to this heading"></a></h3>
<p>This configuration directory exercises the USB serial class
driver at examples/usbserial.  See examples/README.txt for
more information.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_HOST_LINUX=y                      : Linux host
CONFIG_ARM_TOOLCHAIN_GNU_EABI=y       : GNU EABI toolchain for Linux
</pre></div>
</div>
<p>USB debug output can be enabled as by changing the following
settings in the configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-CONFIG_DEBUG_FEATURES=n
-CONFIG_DEBUG_INFO=n
-CONFIG_DEBUG_USB=n
+CONFIG_DEBUG_FEATURES=y
+CONFIG_DEBUG_INFO=y
+CONFIG_DEBUG_USB=y

-CONFIG_EXAMPLES_USBSERIAL_TRACEINIT=n
-CONFIG_EXAMPLES_USBSERIAL_TRACECLASS=n
-CONFIG_EXAMPLES_USBSERIAL_TRACETRANSFERS=n
-CONFIG_EXAMPLES_USBSERIAL_TRACECONTROLLER=n
-CONFIG_EXAMPLES_USBSERIAL_TRACEINTERRUPTS=n
+CONFIG_EXAMPLES_USBSERIAL_TRACEINIT=y
+CONFIG_EXAMPLES_USBSERIAL_TRACECLASS=y
+CONFIG_EXAMPLES_USBSERIAL_TRACETRANSFERS=y
+CONFIG_EXAMPLES_USBSERIAL_TRACECONTROLLER=y
+CONFIG_EXAMPLES_USBSERIAL_TRACEINTERRUPTS=y
</pre></div>
</div>
<p>By default, the usbserial example uses the Prolific PL2303
serial/USB converter emulation.  The example can be modified
serial/USB converter emulation.  The example can be modified
to use the CDC/ACM serial class by making the following changes
to the configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-CONFIG_PL2303=y
+CONFIG_PL2303=n

-CONFIG_CDCACM=n
+CONFIG_CDCACM=y
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../fire-stm32v2/index.html" class="btn btn-neutral float-left" title="fire-stm2v2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../maple/index.html" class="btn btn-neutral float-right" title="maple" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>