<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAM3U-EK &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx_collapse.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
      <script src="../../../../../_static/clipboard.min.js"></script>
      <script src="../../../../../_static/copybutton.js"></script>
      <script src="../../../../../_static/design-tabs.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="sam4cmp-db" href="../sam4cmp-db/index.html" />
    <link rel="prev" title="Flip&amp;Click SAM3X" href="../flipnclick-sam3x/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../../../12.9.0" >12.9.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">ARM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../a1x/index.html">Allwinner A10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../am335x/index.html">TI/Sitara AM335x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../at32/index.html">Artery AT32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bcm2708/index.html">Broadcom BCM2708 (removed)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../c5471/index.html">TI TMS320-C5471</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cxd56xx/index.html">Sony CXD56xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dm320/index.html">TI TMS320-DM320</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../efm32/index.html">SiLabs EFM32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../eoss3/index.html">EOSS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fvp-v8r-aarch32/index.html">FVP ARMv8-R Virt Chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../gd32f4/index.html">GD32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../goldfish/goldfish_timer.html">GOLDFISH TIMER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../goldfish/index.html">GOLDFISH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx1/index.html">NXP/Freescale i.MX1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx6/index.html">NXP/Freescale i.MX6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx9/index.html">NXP i.MX9</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imxrt/index.html">NXP i.MX RT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kinetis/index.html">NXP/FreeScale Kinetis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kl/index.html">NXP/FreeScale KLxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lc823450/index.html">ON Semiconductor LC823450</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc17xx/index.html">NXP LPC17xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc214x/index.html">NXP LPC214x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc2378/index.html">NXP LPC2378</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc31xx/index.html">NXP LPC31xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc40xx/index.html">NXP LPC40xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc43xx/index.html">NXP LPC43xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc54xx/index.html">NXP LPC54xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../max326xx/index.html">Maxim Integrated MAX32660</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../moxart/index.html">Moxa NP51x0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mps/index.html">MPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/ieee802154.html">Nordic nRF52 IEEE 802.15.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/index.html">Nordic nRF52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf53/index.html">Nordic nRF53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf91/index.html">Nordic nRF91</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nuc1xx/index.html">nuvoTon NUC120</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../phy62xx/index.html">PHY+ PHY62</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../qemu/index.html">QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ra4m1/index.html">Renesas RA4M1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp2040/index.html">RaspberryPi rp2040</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp23xx/index.html">RaspberryPi rp2350</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k1xx/index.html">NXP S32K1XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k3xx/index.html">NXP S32K3XX</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Microchip SAM34</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam3u">Microchip SAM3U</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam3x">Microchip SAM3X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4l">Microchip SAM4L</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4cm">Microchip SAM4CM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#microchip-sam4e">Microchip SAM4E</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#microchip-sam4s">Microchip SAM4S</a><ul class="current">
<li class="toctree-l5 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../sama5/index.html">Microchip SAMA5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd2l2/index.html">Microchip SAMD2x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd5e5/index.html">Microchip samd5e5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samv7/index.html">Microchip SAM V7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32c0/index.html">ST STM32C0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f0/index.html">ST STM32F0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f1/index.html">ST STM32F1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f2/index.html">ST STM32F2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f3/index.html">ST STM32F3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f4/index.html">ST STM32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f7/index.html">ST STM32F7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g0/index.html">ST STM32G0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g4/index.html">ST STM32G4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h5/index.html">ST STM32H5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h7/index.html">ST STM32H7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l0/index.html">ST STM32L0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l1/index.html">ST STM32L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l4/index.html">ST STM32L4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l5/index.html">ST STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32u5/index.html">ST STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wb/index.html">ST STM32WB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wl5/index.html">ST STM32WL5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../str71x/index.html">ST STR71</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tiva/index.html">TI/Stellaris Tiva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tms570/index.html">TI/Hercules TMS570xxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../xmc4/index.html">Infineon XMC4000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_linux.html">Network Support on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_vpnkit.html">Network support with VPNKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tricore/index.html">TriCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">ARM</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Microchip SAM34</a></li>
      <li class="breadcrumb-item active">SAM3U-EK</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/platforms/arm/sam34/boards/sam3u-ek/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sam3u-ek">
<h1>SAM3U-EK<a class="headerlink" href="#sam3u-ek" title="Permalink to this heading"></a></h1>
<p>This documentation discusses issues unique to NuttX configurations for the Atmel
SAM3U-EK development board featuring the ATAM3U. This board features the
ATSAM3U4E MCU running at 96MHz.</p>
<section id="atmelstudio-6-1">
<h2>AtmelStudio 6.1<a class="headerlink" href="#atmelstudio-6-1" title="Permalink to this heading"></a></h2>
<p>You can use AtmelStudio6.1 to load and debug code.</p>
<ul>
<li><p>To load code:</p>
<p>Tools -&gt; Device Programming</p>
<p>Configure the debugger and chip and you are in business.</p>
</li>
<li><p>To Debug Code:</p>
<p>File -&gt; Open -&gt; Open Object File for Debugging</p>
<p>Select the project name, the full path to the NuttX object (called just
<code class="docutils literal notranslate"><span class="pre">nuttx</span></code> with no extension), and chip. Take the time to resolve all of the
source file linkages or else you will not have source level debug!</p>
</li>
</ul>
</section>
<section id="leds">
<h2>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h2>
<p>The SAM3U-EK board has four LEDs labeled LD1, LD2, LD3 and LD4 on the the board.
Usage of these LEDs is defined in <code class="docutils literal notranslate"><span class="pre">include/board.h</span></code> and <code class="docutils literal notranslate"><span class="pre">src/up_leds.c</span></code>. They are
encoded as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>SYMBOL</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>LED0</p></th>
<th class="head"><p>LED1</p></th>
<th class="head"><p>LED2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LED_STARTED</p></td>
<td><p>NuttX has been started</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-odd"><td><p>LED_HEAPALLOCATE</p></td>
<td><p>Heap has been allocated</p></td>
<td><p>OFF</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
</tr>
<tr class="row-even"><td><p>LED_IRQSENABLED</p></td>
<td><p>Interrupts enabled</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-odd"><td><p>LED_STACKCREATED</p></td>
<td><p>Idle stack created</p></td>
<td><p>OFF</p></td>
<td><p>ON</p></td>
<td><p>ON</p></td>
</tr>
<tr class="row-even"><td><p>LED_INIRQ</p></td>
<td><p>In an interrupt (note 2)</p></td>
<td><p>N/C</p></td>
<td><p>FLASH</p></td>
<td><p>N/C</p></td>
</tr>
<tr class="row-odd"><td><p>LED_SIGNAL</p></td>
<td><p>In a signal handler (note 3)</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
<td><p>FLASH</p></td>
</tr>
<tr class="row-even"><td><p>LED_ASSERTION</p></td>
<td><p>An assertion failed</p></td>
<td><p>FLASH</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
</tr>
<tr class="row-odd"><td><p>LED_PANIC</p></td>
<td><p>The system has crashed</p></td>
<td><p>FLASH</p></td>
<td><p>N/C</p></td>
<td><p>N/C</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If LED1 and LED2 are statically on, then NuttX probably failed to boot and
these LEDs will give you some indication of where the failure was</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The normal state is LED0=OFF, LED2=ON and LED1 faintly glowing.  This faint
glow is because of timer interrupts that result in the LED being illuminated
on a small proportion of the time.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>LED2 may also flicker normally if signals are processed.</p>
</div>
</section>
<section id="serial-console">
<h2>Serial Console<a class="headerlink" href="#serial-console" title="Permalink to this heading"></a></h2>
<p>By default, all of these configurations use UART0 for the NuttX serial console.
UART0 corresponds to the DB-9 connector labelled “UART”. This is a male
connector and will require a female-to-female, NUL modem cable to connect to a
PC.</p>
<p>An alternate is USART1 which connects to the other DB-9 connector labeled
“USART”. USART1 is not enabled by default unless specifically noted otherwise in
the configuration description. A NUL modem cable must be used with the port as
well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One of the USART1 pins is shared with the audio CODEC. The audio CODEC cannot
be used of USART1 is enabled.</p>
</div>
<p>By default serial console is configured for 115000, 8-bit, 1 stop bit, and no
parity.</p>
</section>
<section id="sam3u-ek-specific-configuration-options">
<h2>SAM3U-EK-specific Configuration Options<a class="headerlink" href="#sam3u-ek-specific-configuration-options" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">arch/</span></code> subdirectory. This should be set
to:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH=arm</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_family</span></code>: For use in C code:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_ARM=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_architecture</span></code>: For use in C code:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CORTEXM3=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">arch/*/chip</span></code> subdirectory</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP=&quot;sam34&quot;</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_name</span></code>: For use in C code to identify the exact chip:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_SAM34</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_SAM3U</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_CHIP_ATSAM3U4</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD</span></code>: Identifies the <code class="docutils literal notranslate"><span class="pre">boards/</span></code> subdirectory and hence, the
board that supports the particular chip or SoC.</p>
<ul>
<li><p>CONFIG_ARCH_BOARD=sam3u:ek (for the SAM3U-EK development board)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD_name</span></code>: For use in C code</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_BOARD_SAM3UEK=y</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LOOPSPERMSEC</span></code>: Must be calibrated for correct operation of
delay loops</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ENDIAN_BIG</span></code>: define if big endian (default is little endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_SIZE</span></code>: Describes the installed DRAM (SRAM in this case):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_SIZE=0x0000c000</span></code> (48Kb)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_START</span></code>: The start address of installed DRAM</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RAM_START=0x20000000</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LEDS</span></code>: Use LEDs to show state. Unique to boards that have LEDs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_INTERRUPTSTACK</span></code>: This architecture supports an interrupt
stack. If defined, this symbol is the size of the interrupt stack in bytes. If
not defined, the user task stacks will be used during interrupt handling.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_STACKDUMP</span></code>: Do stack dumps after assertions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_LEDS</span></code>:  Use LEDs to show state. Unique to board architecture.</p></li>
</ul>
<p>Individual subsystems can be enabled:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_RTC</span></code>: Real Time Clock</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_RTT</span></code>: Real Time Timer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_WDT</span></code>: Watchdog Timer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_UART0</span></code>: UART 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SMC</span></code>: Static Memory Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART0</span></code>: USART 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART1</span></code>: USART 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART2</span></code>: USART 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_USART3</span></code>: USART 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_HSMCI</span></code>: High Speed Multimedia Card Interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TWI0</span></code>: Two-Wire Interface 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TWI1</span></code>: Two-Wire Interface 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SPI0</span></code>: Serial Peripheral Interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SSC</span></code>: Synchronous Serial Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC0</span></code>: Timer Counter 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC1</span></code>: Timer Counter 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_TC2</span></code>: Timer Counter 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_PWM</span></code>: Pulse Width Modulation Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_ADC12B</span></code>: 12-bit ADC Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_ADC</span></code>: 10-bit ADC Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_DMAC0</span></code>: DMA Controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_UDPHS</span></code>: USB Device High Speed</p></li>
</ul>
<p>Some subsystems can be configured to operate in different ways. The drivers need
to know how to configure the subsystem.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOA_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOB_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOC_IRQ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART0_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART1_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART2_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USART3_SERIALDRIVER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_NAND</span></code>: NAND memory</p></li>
</ul>
<p>SAM3U specific device driver settings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_SERIAL_CONSOLE</span></code>: selects the USARTn (n=0,1,2,3) or UART m
(m=4,5) for the console and ttys0 (default is the USART1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_RXBUFSIZE</span></code>: Characters are buffered as received. This
specific the size of the receive buffer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_TXBUFSIZE</span></code>: Characters are buffered before being sent.
This specific the size of the transmit buffer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_BAUD</span></code>: The configure BAUD of the UART.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_BITS</span></code>: The number of bits. Must be either 7 or 8.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_PARTIY</span></code>: 0=no parity, 1=odd parity, 2=even parity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_U[S]ARTn_2STOP</span></code>: Two stop bits</p></li>
</ul>
<p>LCD Options. Other than the standard LCD configuration options (see
<code class="docutils literal notranslate"><span class="pre">boards/README.txt</span></code>), the SAM3U-EK driver also supports:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_LCD_PORTRAIT</span></code>: Present the display in the standard 240x320
“Portrait” orientation. Default: The display is rotated to support a 320x240
“Landscape” orientation.</p></li>
</ul>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<p>Each SAM3U-EK configuration is maintained in a sub-directory and
can be selected as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>tools/configure.sh<span class="w"> </span>sam3u-ek:&lt;subdir&gt;
</pre></div>
</div>
<p>Before building, make sure the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable includes the
correct path to the directory than holds your toolchain binaries.</p>
<p>And then build NuttX by simply typing the following. At the conclusion of the
make, the nuttx binary will reside in an ELF file called, simply, nuttx.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;subdir&gt;</span></code> that is provided above as an argument to the
<code class="docutils literal notranslate"><span class="pre">tools/configure.sh</span></code> must be is one of the following.</p>
<ol class="arabic">
<li><p>These configurations use the mconf-based configuration tool.  To change any
of these configurations using that tool, you should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the kconfig-mconf tool. See <code class="docutils literal notranslate"><span class="pre">nuttx/README.txt</span></code>
see additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">menuconfig</span></code> in <code class="docutils literal notranslate"><span class="pre">nuttx/</span></code> in order to start the
reconfiguration process.</p></li>
</ol>
</li>
<li><p>Unless stated otherwise, all configurations generate console output on UART0
(J3).</p></li>
<li><p>Unless otherwise stated, the configurations are setup for Linux (or any other
POSIX environment like Cygwin under Windows):</p>
<p>Build Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_LINUX=y</span></code>: Linux or other POSIX environment</p></li>
</ul>
</li>
<li><p>All of these configurations use the older, OABI, buildroot toolchain (unless
stated otherwise in the description of the configuration). That toolchain
selection can easily be reconfigured using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">menuconfig</span></code>. Here are the
relevant current settings:</p>
<p>Build Setup:</p>
<ul class="simple">
<li><p>CONFIG_HOST_LINUX=y``: Linux or other pure POSIX invironment (including
Cygwin)</p></li>
</ul>
<p>System Type -&gt; Toolchain:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_BUILDROOT=y</span></code>: Buildroot toolchain</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_BUILDROOT_OABI=y</span></code>: Older, OABI toolchain</p></li>
</ul>
<p>If you want to use the Atmel GCC toolchain, for example, here are the
steps to do so:</p>
<p>Build Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_WINDOWS=y</span></code>: Windows</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HOST_CYGWIN=y</span></code>: Using Cygwin or other POSIX environment</p></li>
</ul>
<p>System Type -&gt; Toolchain:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARM_TOOLCHAIN_GNU_EABI=y</span></code>: General GCC EABI toolchain under windows</p></li>
</ul>
<p>Library Routines -&gt;</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_SIZET_LONG=n</span></code>: <code class="docutils literal notranslate"><span class="pre">size_t</span></code> is an <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>, not <code class="docutils literal notranslate"><span class="pre">long</span></code></p></li>
</ul>
<p>This re-configuration should be done before making NuttX or else the
subsequent ‘make’ will fail. If you have already attempted building
NuttX then you will have to:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code> to remove the old configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools/configure.sh</span> <span class="pre">sam3u-ek/ksnh</span></code> to start with a fresh configuration</p></li>
<li><p>Perform the configuration changes above.</p></li>
</ol>
<p>Also, make sure that your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable has the new path to your Atmel
tools. Try <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">arm-none-eabi-gcc</span></code> to make sure that you are selecting
the right tool.</p>
<p>See also the “NOTE about Windows native toolchains” in the section called
“GNU Toolchain Options” above.</p>
</li>
</ol>
<section id="knsh">
<h3>knsh<a class="headerlink" href="#knsh" title="Permalink to this heading"></a></h3>
<p>This is identical to the nsh configuration below except that NuttX
is built as a kernel-mode, monolithic module and the user applications
are built separately. It is recommends to use a special make command;
not just <code class="docutils literal notranslate"><span class="pre">make</span></code> but make with the following two arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>pass1<span class="w"> </span>pass2
</pre></div>
</div>
<p>In the normal case (just <code class="docutils literal notranslate"><span class="pre">make</span></code>), make will attempt to build both user- and
kernel-mode blobs more or less interleaved. This actual works! However, for me
it is very confusing so I prefer the above make command: Make the user-space
binaries first (pass1), then make the kernel-space binaries (pass2)</p>
<ol class="arabic">
<li><p>At the end of the build, there will be several files in the top-level
NuttX build directory:</p>
<p><strong>PASS1:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nuttx_user.elf</span></code>: The pass1 user-space ELF file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nuttx_user.hex</span></code>: The pass1 Intel HEX format file (selected in defconfig)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">User.map</span></code>: Symbols in the user-space ELF file</p></li>
</ul>
<p><strong>PASS2:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nuttx</span></code>: The pass2 kernel-space ELF file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nuttx.hex</span></code>: The pass2 Intel HEX file (selected in defconfig)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">System.map</span></code>: Symbols in the kernel-space ELF file</p></li>
</ul>
<p>The J-Link programmer will accept files in .hex, .mot, .srec, and .bin
formats.</p>
</li>
<li><p>Combining <code class="docutils literal notranslate"><span class="pre">.hex</span></code> files. If you plan to use the <code class="docutils literal notranslate"><span class="pre">.hex</span></code> files with your
debugger or FLASH utility, then you may need to combine the two hex files
into a single <code class="docutils literal notranslate"><span class="pre">.hex</span></code> file. Here is how you can do that.</p>
<ol class="loweralpha">
<li><p>The <code class="docutils literal notranslate"><span class="pre">tail</span></code> of the <code class="docutils literal notranslate"><span class="pre">nuttx.hex</span></code> file should look something like this
(with my comments added):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>tail<span class="w"> </span>nuttx.hex
<span class="gp"># </span><span class="m">00</span>,<span class="w"> </span>data<span class="w"> </span>records
<span class="go">...</span>
<span class="go">:10 9DC0 00 01000000000800006400020100001F0004</span>
<span class="go">:10 9DD0 00 3B005A0078009700B500D400F300110151</span>
<span class="go">:08 9DE0 00 30014E016D0100008D</span>
<span class="gp"># </span><span class="m">05</span>,<span class="w"> </span>Start<span class="w"> </span>Linear<span class="w"> </span>Address<span class="w"> </span>Record
<span class="go">:04 0000 05 0800 0419 D2</span>
<span class="gp"># </span><span class="m">01</span>,<span class="w"> </span>End<span class="w"> </span>Of<span class="w"> </span>File<span class="w"> </span>record
<span class="go">:00 0000 01 FF</span>
</pre></div>
</div>
<p>Use an editor such as <code class="docutils literal notranslate"><span class="pre">vi</span></code> to remove the 05 and 01 records.</p>
</li>
<li><p>The ‘head’ of the nuttx_user.hex file should look something like
this (again with my comments added):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>head<span class="w"> </span>nuttx_user.hex
<span class="gp"># </span><span class="m">04</span>,<span class="w"> </span>Extended<span class="w"> </span>Linear<span class="w"> </span>Address<span class="w"> </span>Record
<span class="go">:02 0000 04 0801 F1</span>
<span class="gp"># </span><span class="m">00</span>,<span class="w"> </span>data<span class="w"> </span>records
<span class="go">:10 8000 00 BD89 01084C800108C8110208D01102087E</span>
<span class="go">:10 8010 00 0010 00201C1000201C1000203C16002026</span>
<span class="go">:10 8020 00 4D80 01085D80010869800108ED83010829</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Nothing needs to be done here. The <code class="docutils literal notranslate"><span class="pre">nuttx_user.hex</span></code> file should be fine.</p>
</li>
<li><p>Combine the edited <code class="docutils literal notranslate"><span class="pre">nuttx.hex</span></code> and un-edited <code class="docutils literal notranslate"><span class="pre">nuttx_user.hex</span></code> file to
produce a single combined hex file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>nuttx.hex<span class="w"> </span>nuttx_user.hex<span class="w"> </span>&gt;<span class="w"> </span>combined.hex
</pre></div>
</div>
<p>Then use the <code class="docutils literal notranslate"><span class="pre">combined.hex</span></code> file with the to write the FLASH image. If
you do this a lot, you will probably want to invest a little time to
develop a tool to automate these steps.</p>
</li>
</ol>
</li>
</ol>
</section>
<section id="nsh">
<h3>nsh<a class="headerlink" href="#nsh" title="Permalink to this heading"></a></h3>
<p>Configures the NuttShell (nsh) located at examples/nsh.  The
Configuration enables both the serial and telnetd NSH interfaces.</p>
<ol class="arabic">
<li><p>NSH built-in applications are supported.  However, there are
no built-in applications built with the default configuration.</p>
<p>Binary Formats:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_BUILTIN=y</span></code>: Enable support for built-in programs</p></li>
</ul>
<p>Application Configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NSH_BUILTIN_APPS=y</span></code>: Enable starting apps from NSH command line</p></li>
</ul>
</li>
<li><p>This configuration has been used for verifying the touchscreen on
on the SAM3U-EK LCD.  With these modifications, you can include the
touchscreen test program at apps/examples/touchscreen as an NSH built-in
application.  You can enable the touchscreen and test by modifying the
default configuration in the following ways:</p>
<p>Device Drivers</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SPI=y</span></code>: Enable SPI support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SPI_EXCHANGE=y</span></code>: The exchange() method is supported</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_INPUT=y</span></code>: Enable support for input devices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_INPUT_ADS7843E=y</span></code>: Enable support for the XPT2046</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_SPIDEV=2</span></code>: Use SPI CS 2 for communication</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_SPIMODE=0</span></code>: Use SPI mode 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_FREQUENCY=1000000</span></code>: SPI BAUD 1MHz</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_SWAPXY=y</span></code>: If landscpe orientation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_THRESHX=51</span></code>: These will probably need to be tuned</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_ADS7843E_THRESHY=39</span></code></p></li>
</ul>
<p>System Type -&gt; Peripherals:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_SPI0=y</span></code>: Enable support for SPI</p></li>
</ul>
<p>System Type:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIO_IRQ=y</span></code>: GPIO interrupt support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOA_IRQ=y</span></code>: Enable GPIO interrupts from port A</p></li>
</ul>
<p>Library Support:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SCHED_WORKQUEUE=y</span></code>: Work queue support required</p></li>
</ul>
<p>Application Configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_TOUCHSCREEN=y</span></code>: Enable the touchscreen built-int test</p></li>
</ul>
<p>Defaults should be okay for related touchscreen settings.  Touchscreen
debug output on UART0 can be enabled with:</p>
<p>Build Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_FEATURES=y</span></code>: Enable debug features</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_INFO=y</span></code>: Enable verbose debug output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_INPUT=y</span></code>: Enable debug output from input devices</p></li>
</ul>
</li>
<li><p>Enabling HSMCI support. The SAM3U-KE provides a an SD memory card
slot. Support for the SD slot can be enabled with the following
settings:</p>
<p>System Type-&gt;ATSAM3/4 Peripheral Support</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_HSMCI=y</span></code>: Enable HSMCI support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_DMAC0=y</span></code>: DMAC support is needed by HSMCI</p></li>
</ul>
<p>System Type</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIO_IRQ=y</span></code>: PIO interrupts needed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SAM34_GPIOA_IRQ=y</span></code>: Card detect pin is on PIOA</p></li>
</ul>
<p>Device Drivers -&gt; MMC/SD Driver Support</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MMCSD=y</span></code>: Enable MMC/SD support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MMSCD_NSLOTS=1</span></code>: One slot per driver instance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MMCSD_HAVE_CARDDETECT=y</span></code>: Supports card-detect PIOs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MMCSD_SDIO=y</span></code>: SDIO-based MMC/SD support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SDIO_DMA=y</span></code>: Use SDIO DMA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SDIO_BLOCKSETUP=y</span></code>: Needs to know block sizes</p></li>
</ul>
<p>Library Routines</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SCHED_WORKQUEUE=y</span></code>: Driver needs work queue support</p></li>
</ul>
<p>Application Configuration -&gt; NSH Library</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NSH_ARCHINIT=y</span></code>: NSH board-initialization</p></li>
</ul>
</li>
</ol>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>2013-6-28: The touchscreen is functional.</p></li>
<li><p>2013-6-29: Hmmm… but there appear to be conditions when the
touchscreen driver locks up. Looks like some issue with
managing the interrupts.</p></li>
<li><p>2013-6-30: Those lock-ups appear to be due to poorly placed debug output
statements. If you do not enable debug output, the touchscreen is
rock-solid.</p></li>
<li><p>2013-8-10: Added the comments above above enabling HSMCI memory card
support and verified that the configuration builds without error. However,
that configuration has not yet been tested (and is may even be
incomplete).</p></li>
</ul>
</div>
</div></blockquote>
</section>
<section id="nx">
<h3>nx<a class="headerlink" href="#nx" title="Permalink to this heading"></a></h3>
<p>Configures to use <code class="docutils literal notranslate"><span class="pre">examples/nx</span></code> using the HX834x LCD hardware on the SAM3U-EK
development board.</p>
</section>
<section id="nxwm">
<h3>nxwm<a class="headerlink" href="#nxwm" title="Permalink to this heading"></a></h3>
<p>This is a special configuration setup for the NxWM window manager UnitTest. It
includes support for both the HX834x LCD and the ADS7843E touchscreen controller
on board the SAM3U-EK board.</p>
<p>The NxWM window manager is a tiny window manager tailored for use with smaller
LCDs. It supports a toolchain, a start window, and multiple application windows.
However, to make the best use of the visible LCD space, only one application
window is visible at at time.</p>
<p>The NxWM window manager can be found at <code class="docutils literal notranslate"><span class="pre">apps/graphics/NxWidgets/nxwm</span></code>.</p>
<p>The NxWM unit test can be found at <code class="docutils literal notranslate"><span class="pre">apps/graphics/NxWidgets/UnitTests/nxwm</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ol class="arabic">
<li><p>2013-6-28:  Created the configuration but have not yet done
anything with it.</p></li>
<li><p>2013-6-29:  Various changes to get a clean build of this
configuration. Still untested.</p></li>
<li><p>20113-6-30:  I cannot load this program using AtmelStudio6.1.
The total size with DEBUG on is 138.9 KB.  I have verified
that the first 128KB may have been written correctly, but then
the code above 128KB wraps and overwrites the code at the
beginning of FLASH, trashing the FLASH images.</p>
<p>Bottom line:  Still untested.</p>
</li>
</ol>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../flipnclick-sam3x/index.html" class="btn btn-neutral float-left" title="Flip&amp;Click SAM3X" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../sam4cmp-db/index.html" class="btn btn-neutral float-right" title="sam4cmp-db" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>