<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RX65N GRROSE &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx_collapse.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
      <script src="../../../../../_static/clipboard.min.js"></script>
      <script src="../../../../../_static/copybutton.js"></script>
      <script src="../../../../../_static/design-tabs.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="RX65N RSK2MB" href="../rx65n-rsk2mb/index.html" />
    <link rel="prev" title="Renesas RX65N" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../../../12.10.0" >12.10.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Renesas</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../m16c/index.html">Renesas M16C</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Renesas RX65N</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">RX65N GRROSE</a></li>
<li class="toctree-l5"><a class="reference internal" href="../rx65n-rsk2mb/index.html">RX65N RSK2MB</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../sh1/index.html">Renesas SH-1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_linux.html">Network Support on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_vpnkit.html">Network support with VPNKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tricore/index.html">TriCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../standards/index.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Renesas</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Renesas RX65N</a></li>
      <li class="breadcrumb-item active">RX65N GRROSE</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/platforms/renesas/rx65n/boards/rx65n-grrose/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rx65n-grrose">
<h1>RX65N GRROSE<a class="headerlink" href="#rx65n-grrose" title="Permalink to this heading"></a></h1>
<p class="tags"><span>Tags: </span><a class="sd-sphinx-override sd-badge sd-bg-primary sd-bg-text-primary reference internal" href="../../../../../_tags/arch-renesas.html"><span class="doc">arch:renesas</span></a></p>
<p>This documentation discusses the port of NuttX to “GR-ROSE” board produced by
Gadget Renesas. This board features the RX65N (R5F565NEHDFP 100pin QFP).</p>
<section id="board-features">
<h2>Board Features<a class="headerlink" href="#board-features" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Micro controller - RX65N (R5F565NEHDFP 100pin QFP) RXv2 core [34 CoreMark/mA]</p></li>
<li><p>ROM/RAM - 2MB/640KB</p></li>
<li><p>Operating Frequency   - 120MHz(12MHz 10 Multiplication)</p></li>
<li><p>RTC Clock - 32.768kHz</p></li>
<li><p>Sensors - Temperature(inside MCU)</p></li>
<li><p>ROS I/F       - Ethernet, USB(rosserial)</p></li>
<li><p>Serial Servo I/F -    TTL x 4, RS-485 x 1</p></li>
<li><p>Analog I/F    - ADC(12bit) x 6, DAC x 1</p></li>
<li><p>Wireless - IEEE 802.11b/g/n</p></li>
<li><p>PMOD I/F - 1 (I2C, SPI, UART)</p></li>
<li><p>External power supply - USB VBUS or 4.5V～18V</p></li>
<li><p>Supply to external - 3.3V, 5V</p></li>
</ul>
<p>See the RX65N GRROSE website for further information about this board:
<a class="reference external" href="http://gadget.renesas.com/en/product/rose.html">http://gadget.renesas.com/en/product/rose.html</a></p>
</section>
<section id="serial-console">
<h2>Serial Console<a class="headerlink" href="#serial-console" title="Permalink to this heading"></a></h2>
<p>RX65N GRROSE supports 12 serial ports (SCI0 - SCI12), however only 5 ports can be tested(SCI0, SCI1, SCI2,
SCI5 &amp; SCI6).</p>
<p>Please find the pin configurations for SCI0, SCI1, SCI2, SCI5 &amp; SCI6</p>
<p>SCI0 Pin Configuration:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P21</p></td>
<td><p>RXD0</p></td>
</tr>
<tr class="row-odd"><td><p>P20</p></td>
<td><p>TXD0</p></td>
</tr>
</tbody>
</table>
<p>SCI1 Pin Configuration:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P30</p></td>
<td><p>RXD1</p></td>
</tr>
<tr class="row-odd"><td><p>P26</p></td>
<td><p>TXD1</p></td>
</tr>
</tbody>
</table>
<p>SCI2 Pin Configuration:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P12</p></td>
<td><p>RXD2</p></td>
</tr>
<tr class="row-odd"><td><p>P13</p></td>
<td><p>TXD2</p></td>
</tr>
</tbody>
</table>
<p>SCI3 Pin Configuration (connected to WiFi module):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P25</p></td>
<td><p>RXD3</p></td>
</tr>
<tr class="row-odd"><td><p>P23</p></td>
<td><p>TXD3</p></td>
</tr>
</tbody>
</table>
<p>SCI5 Pin Configuration:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PC2</p></td>
<td><p>RXD5</p></td>
</tr>
<tr class="row-odd"><td><p>PC3</p></td>
<td><p>TXD5</p></td>
</tr>
</tbody>
</table>
<p>SCI6 Pin Configuration:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P33</p></td>
<td><p>RXD6</p></td>
</tr>
<tr class="row-odd"><td><p>P32</p></td>
<td><p>TXD6</p></td>
</tr>
</tbody>
</table>
<p>SCI8 Pin Configuration (Half duplication mode with RS485 driver):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PC6</p></td>
<td><p>RXD8</p></td>
</tr>
<tr class="row-odd"><td><p>PC7</p></td>
<td><p>TXD8</p></td>
</tr>
<tr class="row-even"><td><p>PC5</p></td>
<td><p>Direction (L=TX, H=RX)</p></td>
</tr>
</tbody>
</table>
<section id="serial-connection-configuration">
<h3>Serial Connection Configuration<a class="headerlink" href="#serial-connection-configuration" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>GRROSE board needs to be connected to PC terminal, using USB to Serial Chip.</p></li>
<li><p>Connect TX of USB to serial chip to RX of SCIX(0,1,2,5,6)</p></li>
<li><p>Connect RX of USB to serial chip to TX of SCIX(0,1,2,5,6)</p></li>
<li><p>Connect GND to GND pin.</p></li>
<li><p>Configure Teraterm to 115200 baud.</p></li>
</ol>
</section>
</section>
<section id="leds">
<h2>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h2>
<p>The RX65N GRROSE board has 2 LED’s, 1 Power LED(LED3) and 2 User LED’s(LED1,
LED2),which are enabled through software.</p>
<p>If enabled the LED is simply turned on when the board boots successfully, and is
blinking on panic / assertion failed.</p>
</section>
<section id="networking">
<h2>Networking<a class="headerlink" href="#networking" title="Permalink to this heading"></a></h2>
<section id="ethernet-connections">
<h3>Ethernet Connections<a class="headerlink" href="#ethernet-connections" title="Permalink to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PA4</p></td>
<td><p>ET0_MDC</p></td>
</tr>
<tr class="row-odd"><td><p>PA3</p></td>
<td><p>ET0_MDIO</p></td>
</tr>
<tr class="row-even"><td><p>PB2</p></td>
<td><p>REF50CK0</p></td>
</tr>
<tr class="row-odd"><td><p>PB7</p></td>
<td><p>RMII0_CRS_DV</p></td>
</tr>
<tr class="row-even"><td><p>PB1</p></td>
<td><p>RMII0_RXD0</p></td>
</tr>
<tr class="row-odd"><td><p>PB0</p></td>
<td><p>RMII0_RXD1</p></td>
</tr>
<tr class="row-even"><td><p>PB3</p></td>
<td><p>RMII0_RX_ER</p></td>
</tr>
<tr class="row-odd"><td><p>PB5</p></td>
<td><p>RMII0_ETXD0</p></td>
</tr>
<tr class="row-even"><td><p>PB6</p></td>
<td><p>RMII0_ETXD1</p></td>
</tr>
<tr class="row-odd"><td><p>PB4</p></td>
<td><p>RMII0_TXD_EN</p></td>
</tr>
<tr class="row-even"><td><p>PA5</p></td>
<td><p>ET0_LINKSTA</p></td>
</tr>
<tr class="row-odd"><td><p>PA6_ET_RST</p></td>
<td><p>ETHER reset</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="nuttx-configurations">
<h2>NuttX Configurations<a class="headerlink" href="#nuttx-configurations" title="Permalink to this heading"></a></h2>
<p>The following configurations need to be enabled for network.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC=y</span></code>: Enable the EMAC Peripheral for RX65N</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0=y</span></code>: Enable the EMAC Peripheral for RX65N</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR=30</span></code>: Address of PHY status register on LAN8720A</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_100FD=0x18</span></code>: Needed for LAN8720A</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_100HD=0x08</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_10FD=0x14</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_10HD=0x04</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_ALTCONFIG=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYSR_ALTMODE=0x1c</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_RMII=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_EMAC0_PHYADDR=0</span></code>: LAN8720A PHY is at address 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SCHED_WORKQUEUE=y</span></code>: Work queue support is needed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SCHED_HPWORK=y</span></code>: High Priority Work queue support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SCHED_LPWORK=y</span></code>: Low Priority Work queue support</p></li>
</ul>
<section id="using-the-network-with-nsh">
<h3>Using the network with NSH<a class="headerlink" href="#using-the-network-with-nsh" title="Permalink to this heading"></a></h3>
<p>The IP address is configured using DHCP, using the below mentioned configurations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NETUTILS_DHCPC=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NETUTILS_DHCPD=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NSH_DHCPC=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_NETINIT_DHCPC=y</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; ifconfig</span>
<span class="go">  eth0    HWaddr 00:e0:de:ad:be:ef at UP</span>
<span class="go">          IPaddr:10.75.24.53 DRaddr:10.75.24.1 Mask:255.255.254.0</span>
</pre></div>
</div>
<p>You can use ping to test for connectivity to the host (Careful, Window firewalls
usually block ping-related ICMP traffic). On the target side, you can:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; ping 10.75.24.250</span>
<span class="go">PING 10.75.24.250 56 bytes of data</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=1 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=2 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=3 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=4 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=5 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=6 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=7 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=8 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=9 time=0 ms</span>
<span class="go">56 bytes from 10.75.24.250: icmp_seq=10 time=0 ms</span>
<span class="go">10 packets transmitted, 10 received, 0% packet loss, time 10100 ms</span>
</pre></div>
</div>
<p>On the host side, you should also be able to ping the RX65N-GRROSE:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ping<span class="w"> </span><span class="m">10</span>.75.24.53
</pre></div>
</div>
<p>Configure UDP blaster application as mentioned below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CONFIG_EXAMPLES_UDPBLASTER_HOSTIP=0x0a4b1801  (10.75.24.1) ------&gt; Gateway IP
CONFIG_EXAMPLES_UDPBLASTER_NETMASK=0xfffffe00 (255.255.254.0) --------&gt; Netmask
CONFIG_EXAMPLES_UDPBLASTER_TARGETIP=0x0a4b189b (10.75.24.155) ---------&gt; Target IP
</pre></div>
</div>
</section>
<section id="rspi">
<h3>RSPI<a class="headerlink" href="#rspi" title="Permalink to this heading"></a></h3>
<p>For GRROSE board only channel 1 can be tested since RSPI channel1 pinout is only
brought out as Pin number 2 and 3 in CN4 is used for MOSIB and MISOB
respectively.</p>
</section>
</section>
<section id="usb-host">
<h2>USB Host<a class="headerlink" href="#usb-host" title="Permalink to this heading"></a></h2>
<p>For the RX65N RSK2MB board, to be used as USB Device, the following Jumper
settings need to be done:</p>
<ul class="simple">
<li><p>J7: Short Pin 1 &amp; Pin 2</p></li>
<li><p>J16: Short Pin 2 &amp; Pin 3</p></li>
</ul>
</section>
<section id="usb-device">
<h2>USB Device<a class="headerlink" href="#usb-device" title="Permalink to this heading"></a></h2>
<p>For the RX65N RSK2MB board, to be used as USB Device, the following Jumper
settings need to be done:</p>
<ul class="simple">
<li><p>J7: Short Pin 2 &amp; Pin 3</p></li>
<li><p>J16: Short Pin 1 &amp; Pin 2</p></li>
</ul>
</section>
<section id="rtc">
<h2>RTC<a class="headerlink" href="#rtc" title="Permalink to this heading"></a></h2>
<section id="rtc-testing">
<h3>RTC Testing<a class="headerlink" href="#rtc-testing" title="Permalink to this heading"></a></h3>
<p>The test cases mentioned in Renesas_RX65N_RTC_Test_Cases.xls are to be executed
as part of RTC testing.</p>
<p>The following configurations are to be enabled as part of testing RTC examples.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_ALARM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_PERIODIC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_CARRY</span></code></p></li>
</ul>
</section>
<section id="usb-device-configurations">
<h3>USB Device Configurations<a class="headerlink" href="#usb-device-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for USB Device</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBDEV</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_CDCACM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STDIO_BUFFER_SIZE=64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STDIO_LINEBUFFER</span></code></p></li>
</ul>
</section>
<section id="usb-device-testing">
<h3>USB Device Testing<a class="headerlink" href="#usb-device-testing" title="Permalink to this heading"></a></h3>
<p>The following testing is executed as part of USB Device testing on RX65N target
for GRROSE board:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is a test for USB Device&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/ttyACM0
<span class="gp">$ </span>xd<span class="w"> </span><span class="m">0</span><span class="w"> </span>0x20000<span class="w"> </span>&gt;<span class="w"> </span>/dev/ttyACM0
</pre></div>
</div>
<p>The output of the commands mentioned above should be seen on the USB Device COM
port on teraterm</p>
</section>
<section id="rspi-configurations">
<h3>RSPI Configurations<a class="headerlink" href="#rspi-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for RSPI</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SYSTEM_SPITOOL=y</span></code></p></li>
</ul>
</section>
<section id="rspi-testing">
<h3>RSPI Testing<a class="headerlink" href="#rspi-testing" title="Permalink to this heading"></a></h3>
<p>The following testing is executed as part of RSPI testing on RX65N target for
GRROSE board</p>
<p>On GRROSE board only channel 1 can be tested since RSPI channel1 pinout is only
brought out.</p>
<p>The following command can be used for testing RSPI communication to the slave
device:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>spi<span class="w"> </span>exch<span class="w"> </span>-b<span class="w"> </span><span class="m">0</span><span class="w"> </span>-x<span class="w"> </span><span class="m">4</span><span class="w"> </span>aabbccdd
</pre></div>
</div>
<p>where b is bus number and x is number of words to exchange.</p>
</section>
<section id="riic-configurations">
<h3>RIIC Configurations<a class="headerlink" href="#riic-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for RIIC</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SYSTEM_I2CTOOL=y</span></code></p></li>
</ul>
</section>
<section id="riic-testing">
<h3>RIIC Testing<a class="headerlink" href="#riic-testing" title="Permalink to this heading"></a></h3>
<p>On GRROSE board, none of the RIIC channel pins are brought out in the board so
not tested for communication.</p>
</section>
<section id="dtc-configurations">
<h3>DTC Configurations<a class="headerlink" href="#dtc-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for DTC.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SYSTEM_SPITOOL=y</span></code></p></li>
</ul>
</section>
<section id="dtc-testing">
<h3>DTC Testing<a class="headerlink" href="#dtc-testing" title="Permalink to this heading"></a></h3>
<p>DTC has been tested using RSPI driver.</p>
</section>
<section id="usb-host-configurations">
<h3>USB Host Configurations<a class="headerlink" href="#usb-host-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for USB Host Mode driver to
support USB HID Keyboard class and MSC Class.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST_HIDKBD=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_FS_FAT=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_HIDKBD=y</span></code></p></li>
</ul>
</section>
<section id="usb-host-driver-testing">
<h3>USB Host Driver Testing<a class="headerlink" href="#usb-host-driver-testing" title="Permalink to this heading"></a></h3>
<p>The Following Class Drivers were tested as mentioned below:</p>
<ul class="simple">
<li><p>USB HID Keyboard Class</p></li>
</ul>
<p>On the NuttX Console “hidkbd” application was executed</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; hidkbd</span>
</pre></div>
</div>
<p>The characters typed from the keyboard were executed correctly.</p>
<ul class="simple">
<li><p>USB MSC Class</p></li>
</ul>
<p>The MSC device is enumerated as <code class="docutils literal notranslate"><span class="pre">sda</span></code> in <code class="docutils literal notranslate"><span class="pre">/dev</span></code> directory.</p>
<p>The block device is mounted using the command as mentioned below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mount<span class="w"> </span>-t<span class="w"> </span>vfat<span class="w"> </span>/dev/sda<span class="w"> </span>/mnt
</pre></div>
</div>
<p>The MSC device is mounted in <code class="docutils literal notranslate"><span class="pre">/dev</span></code> directory</p>
<p>The copy command is executed to test the Read/Write functionality</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cp<span class="w"> </span>/mnt/&lt;file.txt&gt;<span class="w"> </span>/mnt/file_copy.txt
</pre></div>
</div>
</section>
<section id="usb-host-hub-configurations">
<h3>USB Host Hub Configurations<a class="headerlink" href="#usb-host-hub-configurations" title="Permalink to this heading"></a></h3>
<p>The following configurations need to be enabled for USB Host Mode driver to
support USB HID Keyboard class and MSC Class.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_RX65N_USBHOST=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST_HUB=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST_ASYNCH=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_USBHOST_HIDKBD=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_FS_FAT=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXAMPLES_HIDKBD=y</span></code></p></li>
</ul>
</section>
<section id="usb-host-hub-driver-testing">
<h3>USB Host Hub Driver Testing<a class="headerlink" href="#usb-host-hub-driver-testing" title="Permalink to this heading"></a></h3>
<p>The Following Class Drivers were tested as mentioned below :</p>
<ul class="simple">
<li><p>USB HID Keyboard Class</p></li>
</ul>
<p>On the NuttX Console “hidkbd” application was executed</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; hidkbd</span>
</pre></div>
</div>
<p>The characters typed from the keyboard were executed correctly.</p>
<ul class="simple">
<li><p>USB MSC Class</p></li>
</ul>
<p>The MSC device is enumerated as <code class="docutils literal notranslate"><span class="pre">sda</span></code> in <code class="docutils literal notranslate"><span class="pre">/dev</span></code> directory.</p>
<p>The block device is mounted using the command as mentioned below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mount<span class="w"> </span>-t<span class="w"> </span>vfat<span class="w"> </span>/dev/sda<span class="w"> </span>/mnt
</pre></div>
</div>
<p>The MSC device is mounted in <code class="docutils literal notranslate"><span class="pre">/dev</span></code> directory</p>
<p>The copy command is executed to test the Read/Write functionality</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cp<span class="w"> </span>/mnt/&lt;file.txt&gt;<span class="w"> </span>/mnt/file_copy.txt
</pre></div>
</div>
</section>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>NuttX needs to be compiled in Cygwin.</p></li>
</ol>
<p>The following Configuration needs to be set, in order to do source level
debugging:</p>
<p><code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_SYMBOLS=y</span></code> (Set this option, using menuconfig only, DO NOT
Enable this as default configuration).</p>
<ol class="arabic simple" start="2">
<li><p>Download &amp; Install Renesas e2studio IDE.</p></li>
<li><p>Load the project(NuttX built on Cygwin) as Makefile project with existing code</p></li>
<li><p>Right click on the project, and select Debug Configurations.</p></li>
<li><p>The binary(NuttX) needs to be loaded using E1/E2 Emulator.</p></li>
<li><p>Select the Device name as R5F565NE and Emulator as E1/E2(whichever is being used)</p></li>
<li><p>Select Connection type as FINE.</p></li>
<li><p>Load and run the binary.</p></li>
</ol>
</section>
<section id="flashing-nuttx">
<h2>Flashing NuttX<a class="headerlink" href="#flashing-nuttx" title="Permalink to this heading"></a></h2>
<p>Alternatively, NuttX binary can be flashed using Renesas flash programmer tool
without using e2 studio/Cygwin</p>
<p>Below are the steps mentioned to flash NuttX binary using Renesas flash
programmer tool(RFP).</p>
<ol class="arabic simple">
<li><p>In order to flash using Renesas flash programmer tool, nuttx.mot file should
be generated.</p></li>
<li><p>Add the following lines in tools/Unix.mk file:</p></li>
</ol>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="cp">ifeq ($(CONFIG_MOTOROLA_SREC),y)</span>
<span class="w">  </span>@echo<span class="w"> </span><span class="s2">&quot;CP: nuttx.mot&quot;</span>
<span class="w">  </span><span class="k">$(</span>Q<span class="k">)</span><span class="w"> </span><span class="k">$(</span>OBJCOPY<span class="k">)</span><span class="w"> </span><span class="k">$(</span>OBJCOPYARGS<span class="k">)</span><span class="w"> </span><span class="k">$(</span>BIN<span class="k">)</span><span class="w"> </span>-O<span class="w"> </span>srec<span class="w"> </span>-I<span class="w"> </span>elf32-rx-be-ns<span class="w"> </span>nuttx.mot
<span class="cp">endif</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">CONFIG_MOTOROLA_SREC=y</span></code> in defconfig file or choose <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">menuconfig</span></code> -&gt; Build Setup -&gt; Binary Output Format -&gt; Select Motorola SREC
format.</p></li>
<li><p>Download Renesas flash programmer tool from
<a class="reference external" href="https://www.renesas.com/in/en/products/software-tools/tools/programmer/renesas-flash-programmer-programming-gui.html#downloads">https://www.renesas.com/in/en/products/software-tools/tools/programmer/renesas-flash-programmer-programming-gui.html#downloads</a></p></li>
<li><p>Refer to the user manual document, for steps to flash NuttX binary using RFP
tool.</p></li>
</ol>
</section>
<section id="romfs">
<h2>ROMFS<a class="headerlink" href="#romfs" title="Permalink to this heading"></a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h3>
<p>This directory contains logic to support a custom ROMFS system-init script and
start-up script. These scripts are used by by the NSH when it starts provided
that <code class="docutils literal notranslate"><span class="pre">CONFIG_ETC_ROMFS=y</span></code>. These scripts provide a ROMFS volume that will be
mounted at /etc and will look like this at run-time:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NuttShell (NSH) NuttX-8.2</span>
<span class="go">nsh&gt; ls -Rl /etc</span>
<span class="go">/etc:</span>
<span class="go"> dr-xr-xr-x       0 .</span>
<span class="go"> -r--r--r--      20 group</span>
<span class="go"> dr-xr-xr-x       0 init.d/</span>
<span class="go"> -r--r--r--      35 passwd</span>
<span class="go">/etc/init.d:</span>
<span class="go"> dr-xr-xr-x       0 ..</span>
<span class="go"> -r--r--r--     110 rcS</span>
<span class="go"> -r--r--r--     110 rc.sysinit</span>
<span class="go">nsh&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/etc/init.d/rc.sysinit</span></code> is system init script; <code class="docutils literal notranslate"><span class="pre">/etc/init.d/rcS</span></code> is the
start-up script; <code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code> is a the password file. It supports a single
user:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>USERNAME:  admin
PASSWORD:  Administrator

nsh&gt; cat /etc/passwd
admin:8Tv+Hbmr3pLVb5HHZgd26D:0:0:/
</pre></div>
</div>
<p>The encrypted passwords in the provided passwd file are only valid if the TEA
key is set to: 012345678 9abcdef0 012345678 9abcdef0. Changes to either the key
or the password word will require regeneration of the <code class="docutils literal notranslate"><span class="pre">nsh_romfimg.h</span></code> header
file.</p>
<p>The format of the password file is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>user:x:uid:gid:home

Where:
user:  User name
x:     Encrypted password
uid:   User ID (0 for now)
gid:   Group ID (0 for now)
home:  Login directory (/ for now)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/etc/group</span></code> is a group file. It is not currently used.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; cat /etc/group</span>
<span class="go">root:*:0:root,admin</span>
</pre></div>
</div>
<p>The format of the group file is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>group:x:gid:users

Where:
group:  The group name
x:      Group password
gid:    Group ID
users:  A comma separated list of members of the group
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/etc/init.d/rcS</span></code> should have the following contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vi rcS
echo &quot;This is NuttX&quot;
</pre></div>
</div>
</section>
<section id="updating-the-romfs-file-system">
<h3>Updating the ROMFS File System<a class="headerlink" href="#updating-the-romfs-file-system" title="Permalink to this heading"></a></h3>
<p>The content on the <code class="docutils literal notranslate"><span class="pre">nsh_romfsimg.h</span></code> header file is generated from a sample
directory structure. That directory structure is contained in the <code class="docutils literal notranslate"><span class="pre">etc/</span></code>
directory and can be modified per the following steps:</p>
<ol class="arabic">
<li><p>Change directory to etc/:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>etc/
</pre></div>
</div>
</li>
<li><p>Make modifications as desired.</p></li>
<li><p>Create the new ROMFS image.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>genromfs<span class="w"> </span>-f<span class="w"> </span>romfs_img<span class="w"> </span>-d<span class="w"> </span>etc<span class="w"> </span>-V<span class="w"> </span>SimEtcVol
</pre></div>
</div>
</li>
<li><p>Convert the ROMFS image to a C header file</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xxd<span class="w"> </span>-i<span class="w"> </span>romfs_img<span class="w"> </span>&gt;nsh_romfsimg.h
</pre></div>
</div>
</li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">nsh_romfsimg.h</span></code>, mark both data definitions as <code class="docutils literal notranslate"><span class="pre">const</span></code> so that that
will be stored in FLASH.</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="Renesas RX65N" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../rx65n-rsk2mb/index.html" class="btn btn-neutral float-right" title="RX65N RSK2MB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>