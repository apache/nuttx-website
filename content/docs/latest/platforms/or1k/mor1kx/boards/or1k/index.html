<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>or1k &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx_collapse.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
      <script src="../../../../../_static/jquery.js"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
      <script src="../../../../../_static/doctools.js"></script>
      <script src="../../../../../_static/sphinx_highlight.js"></script>
      <script src="../../../../../_static/clipboard.min.js"></script>
      <script src="../../../../../_static/copybutton.js"></script>
      <script src="../../../../../_static/design-tabs.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Renesas" href="../../../../renesas/index.html" />
    <link rel="prev" title="OpenRISC mor1kx" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../../../12.10.0" >12.10.0</option>
    
    <option value="../../../../../../12.11.0" >12.11.0</option>
    
    <option value="../../../../../../12.12.0" >12.12.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">OpenRISC</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">OpenRISC mor1kx</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">or1k</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_linux.html">Network Support on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/network_vpnkit.html">Network support with VPNKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/sim_gpiochip.html">Sim GPIO Chip Driver (Linux Host GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tricore/index.html">TriCore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../standards/index.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">OpenRISC</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">OpenRISC mor1kx</a></li>
      <li class="breadcrumb-item active">or1k</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/platforms/or1k/mor1kx/boards/or1k/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="or1k">
<h1>or1k<a class="headerlink" href="#or1k" title="Permalink to this heading"></a></h1>
<p>Generic OpenRISC board, suitable for use with Qemu, for example.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<blockquote>
<div><p>2018-04-2</p>
<p>I have been trying to retrace all of Matt Thompson’s steps to get or1k
building running on Qemu. I am stuck at the moment because it looks like there
is some problem with my Kubuntu package manager. The Qemu configuration gives:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ERROR:  glib-2.22 gthread-2.0 is required to compile QEMU.</span>
</pre></div>
</div>
</div></blockquote>
<p>But it looks like to do have a later version of gthread-2.0 installed.</p>
</div>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<section id="pre-built-or1k-elf-toolchain-newlib">
<h3>Pre-built or1k-elf Toolchain (newlib)<a class="headerlink" href="#pre-built-or1k-elf-toolchain-newlib" title="Permalink to this heading"></a></h3>
<p>Ref: <a class="reference external" href="https://openrisc.io/newlib/">https://openrisc.io/newlib/</a></p>
<p>You can install pre-compiled toolchains and install them on your Linux system.
We have prebuilt-toolchains for releases of the different components that are
preferably installed to /opt/toolchains/or1k-elf. You can find all releases
here. Those are current releases:</p>
<blockquote>
<div><p>GCC 4.9.2, Binutils 2.26, Newlib 2.3.0 (+or1k backports), GDB 7.11
<a class="reference external" href="https://github.com/openrisc/newlib/releases/download/v2.3.0-1/or1k-elf_gcc4.9.3_binutils2.26_newlib2.3.0-1_gdb7.11.tgz">https://github.com/openrisc/newlib/releases/download/v2.3.0-1/or1k-elf_gcc4.9.3_binutils2.26_newlib2.3.0-1_gdb7.11.tgz</a></p>
<p>GCC 5.2.0, Binutils 2.26, Newlib 2.3.0 (+or1k backports), GDB 7.11
<a class="reference external" href="https://github.com/openrisc/newlib/releases/download/v2.3.0-1/or1k-elf_gcc5.2.0_binutils2.26_newlib2.3.0-1_gdb7.11.tgz">https://github.com/openrisc/newlib/releases/download/v2.3.0-1/or1k-elf_gcc5.2.0_binutils2.26_newlib2.3.0-1_gdb7.11.tgz</a></p>
</div></blockquote>
<p>After downloading a release you can extract it anywhere in your filesystem, we
recommend to /opt/toolchains/or1k-elf/. You need to add the toolchain to your
path:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/opt/toolchains/or1k-elf/bin:<span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="openrisc-gnu-tool-chain-from-source">
<h3>OpenRISC GNU tool chain from source<a class="headerlink" href="#openrisc-gnu-tool-chain-from-source" title="Permalink to this heading"></a></h3>
<p>Ref: <a class="reference external" href="https://github.com/juliusbaxter/mor1kx-dev-env/wiki/OpenRISC-tool-chain-installation-guide">https://github.com/juliusbaxter/mor1kx-dev-env/wiki/OpenRISC-tool-chain-installation-guide</a></p>
<p>These instructions are as per the project’s GNU tool chain page on [OpenCores]
(<a class="reference external" href="http://opencores.org/or1k">http://opencores.org/or1k</a>).</p>
<p>What is required first is a copy of the tool chain source. There are two
repositories - one for GCC (called or1k-gcc) and one for the rest of the GNU
tools and libraries (binutils, GDB, newlib, called or1k-src). We must get the
entirety of both.</p>
<p>You will need to download the repositories as a zip file OR use git.
Download zip files (save into <code class="docutils literal notranslate"><span class="pre">$HOME/or1k</span></code>):</p>
<ul class="simple">
<li><p>or1k-src: <a class="reference external" href="https://github.com/openrisc/or1k-src/archive/or1k.zip">https://github.com/openrisc/or1k-src/archive/or1k.zip</a></p></li>
<li><p>or1k-gcc: <a class="reference external" href="https://github.com/openrisc/or1k-gcc/archive/or1k.zip">https://github.com/openrisc/or1k-gcc/archive/or1k.zip</a></p></li>
</ul>
<p>and unzip into the <code class="docutils literal notranslate"><span class="pre">$HOME/or1k</span></code> directory, making 2 directories:
<code class="docutils literal notranslate"><span class="pre">or1k-src-or1k/</span></code> and <code class="docutils literal notranslate"><span class="pre">or1k-gcc-or1k/</span></code></p>
<p>Rename those directories to be without the trailing <code class="docutils literal notranslate"><span class="pre">-or1k</span></code>, so:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mv<span class="w"> </span>or1k-src-or1k<span class="w"> </span>or1k-src
<span class="gp">$ </span>mv<span class="w"> </span>or1k-gcc-or1k<span class="w"> </span>or1k-gcc
</pre></div>
</div>
<p>or with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkdir<span class="w"> </span><span class="nv">$HOME</span>/or1k<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/or1k
<span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>git://github.com/openrisc/or1k-src.git
<span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>git://github.com/openrisc/or1k-gcc.git
</pre></div>
</div>
<p>Once the source trees are in place, we will build.</p>
<p>We will install the tool chain into <code class="docutils literal notranslate"><span class="pre">/opt/or1k-toolchain</span></code>. Make sure that
directory is writeable eg.:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>/opt/or1k-toolchain
<span class="gp">$ </span>sudo<span class="w"> </span>chown<span class="w"> </span><span class="nv">$USER</span><span class="w"> </span>/opt/or1k-toolchain
</pre></div>
</div>
<p>The following commands will build the tool chain (starting in the <code class="docutils literal notranslate"><span class="pre">$HOME/or1k</span></code>
directory):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Build<span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span><span class="nb">set</span><span class="w"> </span>of<span class="w"> </span>tools,<span class="w"> </span>binutils<span class="w"> </span>etc.
<span class="gp"># </span>NOTE:<span class="w"> </span>on<span class="w"> </span><span class="m">32</span>-bit<span class="w"> </span>machines<span class="w"> </span>--disable-werror<span class="w"> </span>is<span class="w"> </span>needed<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>an<span class="w"> </span>enum<span class="w"> </span>acting<span class="w"> </span>as<span class="w"> </span>bit<span class="w"> </span>mask<span class="w"> </span>is<span class="w"> </span>considered<span class="w"> </span>signed

<span class="gp">$ </span>mkdir<span class="w"> </span>bld-or1k-src<span class="w"> </span>bld-or1k-gcc
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>bld-or1k-src
<span class="gp">$ </span>../or1k-src/configure<span class="w"> </span>--target<span class="o">=</span>or1k-elf<span class="w"> </span>--prefix<span class="o">=</span>/opt/or1k-toolchain<span class="w"> </span>--enable-shared<span class="w"> </span>--disable-itcl<span class="w"> </span>--disable-tk<span class="w"> </span>--disable-tcl<span class="w"> </span>--disable-winsup<span class="w"> </span>--disable-libgui<span class="w"> </span>--disable-rda<span class="w"> </span>--disable-sid<span class="w"> </span>--disable-sim<span class="w"> </span>--disable-gdb<span class="w"> </span>--with-sysroot<span class="w"> </span>--disable-newlib<span class="w"> </span>--disable-libgloss<span class="w"> </span>--disable-werror
<span class="gp">$ </span>make
<span class="gp">$ </span>make<span class="w"> </span>install

<span class="gp"># </span>Build<span class="w"> </span>gcc

<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>../bld-or1k-gcc
<span class="gp">$ </span>../or1k-gcc/configure<span class="w"> </span>--target<span class="o">=</span>or1k-elf<span class="w"> </span>--prefix<span class="o">=</span>/opt/or1k-toolchain<span class="w"> </span>--enable-languages<span class="o">=</span>c<span class="w"> </span>--disable-shared<span class="w"> </span>--disable-libssp
<span class="gp">$ </span>make
<span class="gp">$ </span>make<span class="w"> </span>install

<span class="gp"># </span>build<span class="w"> </span>newlib<span class="w"> </span>and<span class="w"> </span>gdb<span class="w"> </span><span class="o">(</span>without<span class="w"> </span>or1ksim<span class="w"> </span><span class="k">in</span><span class="w"> </span>this<span class="w"> </span><span class="k">case</span><span class="o">)</span>
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>../bld-or1k-src
<span class="gp">$ </span>../or1k-src/configure<span class="w"> </span>--target<span class="o">=</span>or1k-elf<span class="w"> </span>--prefix<span class="o">=</span>/opt/or1k-toolchain<span class="w"> </span>--enable-shared<span class="w"> </span>--disable-itcl<span class="w"> </span>--disable-tk<span class="w"> </span>--disable-tcl<span class="w"> </span>--disable-winsup<span class="w"> </span>--disable-libgui<span class="w"> </span>--disable-rda<span class="w"> </span>--disable-sid<span class="w"> </span>--enable-sim<span class="w"> </span>--disable-or1ksim<span class="w"> </span>--enable-gdb<span class="w"> </span>--with-sysroot<span class="w"> </span>--enable-newlib<span class="w"> </span>--enable-libgloss<span class="w"> </span>--disable-werror
<span class="gp">$ </span>make
<span class="gp">$ </span>make<span class="w"> </span>install

<span class="gp"># </span>build<span class="w"> </span>gcc<span class="w"> </span>again,<span class="w"> </span>this<span class="w"> </span><span class="nb">time</span><span class="w"> </span>with<span class="w"> </span>newlib
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>../bld-or1k-gcc
<span class="gp">$ </span>../or1k-gcc/configure<span class="w"> </span>--target<span class="o">=</span>or1k-elf<span class="w"> </span>--prefix<span class="o">=</span>/opt/or1k-toolchain<span class="w"> </span>--enable-languages<span class="o">=</span>c,c++<span class="w"> </span>--disable-shared<span class="w"> </span>--disable-libssp<span class="w"> </span>--with-newlib
<span class="gp">$ </span>make
<span class="gp">$ </span>make<span class="w"> </span>install
</pre></div>
</div>
<p>Finally, we will want to run the following to put this path in our <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>
file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;# OpenRISC tool chain path&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PATH=</span><span class="nv">$PATH</span><span class="s2">:/opt/or1k-toolchain/bin&quot;</span>
</pre></div>
</div>
</section>
<section id="openocd">
<h3>OpenOCD<a class="headerlink" href="#openocd" title="Permalink to this heading"></a></h3>
<p>Ref: <a class="reference external" href="https://github.com/juliusbaxter/mor1kx-dev-env/wiki/OpenRISC-tool-chain-installation-guide">https://github.com/juliusbaxter/mor1kx-dev-env/wiki/OpenRISC-tool-chain-installation-guide</a></p>
<p>OpenOCD is the debug proxy we’ll use to talk to the board over JTAG.</p>
<p>Download the source to <code class="docutils literal notranslate"><span class="pre">$HOME/or1k</span></code> with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/openrisc/openOCD.git
</pre></div>
</div>
<p>Go into the OpenOCD directory and, the very first time, you must bootstrap it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./bootstrap
</pre></div>
</div>
<p>Once that is finished, configure and compile it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./configure<span class="w"> </span>--enable-usb_blaster_libftdi<span class="w"> </span>--enable-adv_debug_sys<span class="w"> </span><span class="se">\</span>
--enable-altera_vjtag<span class="w"> </span>--enable-maintainer-mode
<span class="gp">$ </span>make
</pre></div>
</div>
<p>You can run make install if you like, too.</p>
</section>
<section id="qemu">
<h3>QEMU<a class="headerlink" href="#qemu" title="Permalink to this heading"></a></h3>
<p>The compiled ELF that works in or1ksim (<a class="reference external" href="https://github.com/openrisc/or1ksim">https://github.com/openrisc/or1ksim</a>).</p>
<p>Ref: <a class="reference external" href="https://github.com/openrisc/or1ksim">https://github.com/openrisc/or1ksim</a></p>
<p>Or1ksim is a generic OpenRISC 1000 architecture simulator capable of emulating
OpenRISC based computer systems at the instruction level. It includes models of
a range of peripherals, allowing complete systems to be modeled.  For full
details see <a class="reference external" href="http://opencores.org/or1k/Or1ksim">http://opencores.org/or1k/Or1ksim</a></p>
<p>This is a variant of the standard Or1ksim, which uses or1k as the architecture
name, rather than or32. At some stage in the future this will be merged in, so
that either architecture name is supported.</p>
<section id="or1k-build">
<h4>Or1k Build<a class="headerlink" href="#or1k-build" title="Permalink to this heading"></a></h4>
<p>Or1ksim uses a standard GNU autoconf/automake installation and is designed to
be built in a separate build directory. So from the main directory, a minimal
install can be done with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>or1ksim
<span class="gp">$ </span>mkdir<span class="w"> </span>bd
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>bd
<span class="gp">$ </span>../configure
<span class="gp">$ </span>make
<span class="gp">$ </span>sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<p>This will install the executables ‘sim’, ‘profile’, and ‘mprofile’ at
<code class="docutils literal notranslate"><span class="pre">/user/local/bin</span></code> and libraries at <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>.</p>
<p>The UART must be enabled in sim.cfg BEFORE the build in order for the NSH
configuration to work:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>section uart
<span class="gd">-  enabled  = 0</span>
<span class="gi">+  enabled  = 1</span>
</pre></div>
</div>
</section>
<section id="qemu-build">
<h4>Qemu Build<a class="headerlink" href="#qemu-build" title="Permalink to this heading"></a></h4>
<p>Download: <a class="reference external" href="https://www.qemu.org/download/#source">https://www.qemu.org/download/#source</a></p>
<p>To configure and build: (ref: <a class="reference external" href="https://wiki.qemu.org/Documentation/Platforms/OpenRISC">https://wiki.qemu.org/Documentation/Platforms/OpenRISC</a>)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./configure<span class="w"> </span>--target-list<span class="o">=</span>or1k-softmmu
<span class="gp">$ </span>make
</pre></div>
</div>
<p>Then this command will get it running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>qemu-system-or1k<span class="w"> </span>-kernel<span class="w"> </span>nuttx-or1k-sim.elf<span class="w"> </span>-serial<span class="w"> </span>stdio<span class="w"> </span>-nographic<span class="w"> </span><span class="se">\</span>
-monitor<span class="w"> </span>none
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="OpenRISC mor1kx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../../../renesas/index.html" class="btn btn-neutral float-right" title="Renesas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>