<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>modbus FreeModBus port &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="scpi SCPI instrument side parser" href="../scpi/index.html" />
    <link rel="prev" title="foc Field Oriented Control user-space library" href="../foc/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../12.5.0" >12.5.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">OS Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../audioutils/index.html">Audio Utility libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boot/index.html">Bootloader Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../benchmarks/index.html">Benchmark Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canutils/index.html">CAN Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Cryptography Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fsutils/index.html">File System Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../games/index.html">Games</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../graphics/index.html">Graphics Support</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Industrial Applications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../abnt_codi/index.html"><code class="docutils literal notranslate"><span class="pre">abnt_codi</span></code> ABNT CODI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../foc/index.html"><code class="docutils literal notranslate"><span class="pre">foc</span></code> Field Oriented Control user-space library</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">modbus</span></code> FreeModBus port</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#directory-structure-relation-to-freemodbus-v1-5-0">Directory Structure / Relation to freemodbus-v1.5.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-options">Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#note">Note</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../scpi/index.html"><code class="docutils literal notranslate"><span class="pre">scpi</span></code> SCPI instrument side parser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../inertial/index.html">Inertial Libraries Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../interpreters/index.html">Interpreters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lte/index.html">LTE Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/index.html">Math Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mlearing/index.html">Machine Learning Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netutils/index.html">Network Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nsh/index.html">NuttShell (NSH)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdr/index.html">Software Define Radio Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system/index.html">System Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html">Host Side Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wireless/index.html">Wireless Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Industrial Applications</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">modbus</span></code> FreeModBus port</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/industry/modbus/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="modbus-freemodbus-port">
<h1><code class="docutils literal notranslate"><span class="pre">modbus</span></code> FreeModBus port<a class="headerlink" href="#modbus-freemodbus-port" title="Permalink to this heading"></a></h1>
<p>This directory contains a port of last open source version of FreeModBus (BSD
license). The code in this directory is a subset of FreeModBus version 1.5.0
(June 6, 2010) that can be downloaded in its entirety from
<a class="reference external" href="http://developer.berlios.de/project/showfiles.php?group_id=6120">http://developer.berlios.de/project/showfiles.php?group_id=6120</a>.</p>
<p>Includes extensions to support RTU master mode by Armink(<a class="reference external" href="mailto:383016632&#37;&#52;&#48;qq&#46;com">383016632<span>&#64;</span>qq<span>&#46;</span>com</a>):
<a class="reference external" href="https://github.com/armink/FreeModbus_Slave-Master-RTT-STM32">https://github.com/armink/FreeModbus_Slave-Master-RTT-STM32</a>. Ported to NuttX by
Darcy Gong.</p>
<section id="directory-structure-relation-to-freemodbus-v1-5-0">
<h2>Directory Structure / Relation to freemodbus-v1.5.0<a class="headerlink" href="#directory-structure-relation-to-freemodbus-v1-5-0" title="Permalink to this heading"></a></h2>
<p>The original FreeModBus download consists of several directories. This subset
takes only the contents of one directory, <code class="docutils literal notranslate"><span class="pre">modbus/</span></code>, that implements the core
modbus logic and integrates that directory into the NuttX build system. The
mapping between <code class="docutils literal notranslate"><span class="pre">freemodbus-v1.5.0</span></code> and the nuttx directories is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--------------------------- ----------------------------------------------
freemodbus-v1.5.0           NuttX
--------------------------- ----------------------------------------------
 All top level .txt files    Not included
 demo/                       Not included. This directory contains demo
                             and porting code for a variety of platforms.
                             The NuttX demo was ported from the LINUX
                             demo in this directory and can be found at
                             apps/examples/modbus.
 doc/                        Not included. This directory contains Doxygen
                             support files.
 modbus/                     Included in its entirety in various locations:
         ascii                  apps/modbus/ascii
         functions              apps/modbus/functions
         include                apps/include/modbus
         mb.c                   apps/modbus/mb.c
         rtu                    apps/modbus/rtu
         tcp                    apps/modbus/tcp
 tools/                      Not included. This directory contains Doxygen
                             tools.
--------------------------- ----------------------------------------------
</pre></div>
</div>
<p>So this directory is equivalent to the <code class="docutils literal notranslate"><span class="pre">freemodbus-v1.5.0/modbus</span></code> directory
except that (1) it may include modifications for the integration with NuttX and
(2) the modbus/include directory was moved to <code class="docutils literal notranslate"><span class="pre">apps/modbus</span></code>.</p>
<p>The original, unmodified <code class="docutils literal notranslate"><span class="pre">freemodbus-v1.5.0</span></code> was checked in as SVN revision
<code class="docutils literal notranslate"><span class="pre">4960</span></code>.</p>
<p>The other directory here, <code class="docutils literal notranslate"><span class="pre">nuttx/</span></code>, implements the NuttX modbus interface. It
derives from the <code class="docutils literal notranslate"><span class="pre">freemodbus-v1.5.0/demo/LINUX/port</span></code> directory.</p>
</section>
<section id="configuration-options">
<h2>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this heading"></a></h2>
<p>In the original <code class="docutils literal notranslate"><span class="pre">freemodbus-v1.5.0</span></code> release, the FreeModBus configuration was
controlled by the header file <code class="docutils literal notranslate"><span class="pre">mbconfig.h</span></code>. This header file was eliminated
(post revision <code class="docutils literal notranslate"><span class="pre">4960</span></code>) and the FreeModBus configuration was integrated into the
NuttX configuration system.</p>
<p>The NuttX-named configuration options that are available include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MODBUS</span></code> – General ModBus support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_ASCII_ENABLED</span></code> – Modbus ASCII support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_ASCII_MASTER</span></code> – Modbus ASCII master support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_RTU_ENABLED</span></code> – Modbus RTU support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_RTU_MASTER</span></code> – Modbus RTU master support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_TCP_ENABLED</span></code> – Modbus TCP support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_ASCII_TIMEOUT_SEC</span></code> – Character timeout value for Modbus ASCII. The
character timeout value is not fixed for Modbus ASCII and is therefore a
configuration option. It should be set to the maximum expected delay time of
the network. Default: <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</span></code> – Timeout to wait in ASCII prior
to enabling transmitter. If defined the function calls <code class="docutils literal notranslate"><span class="pre">vMBPortSerialDelay</span></code>
with the argument <code class="docutils literal notranslate"><span class="pre">CONFIG_MB_ASCII_TIMEOUT_WAIT_BEFORE_SEND_MS</span></code> to allow for a
delay before the serial transmitter is enabled. This is required because some
targets are so fast that there is no time between receiving and transmitting
the frame. If the master is too slow with enabling its receiver then it will
not receive the response correctly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_HANDLERS_MAX</span></code> – Maximum number of Modbus functions codes the
protocol stack should support. The maximum number of supported Modbus
functions must be greater than the sum of all enabled functions in this file
and custom function handlers. If set too small, adding more functions will
fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_OTHER_REP_SLAVEID_BUF</span></code> – Number of bytes which should be
allocated for the Report Slave ID command. This number limits the maximum size
of the additional segment in the report slave id function. See
<code class="docutils literal notranslate"><span class="pre">eMBSetSlaveID()</span></code> for more information on how to set this value. It is only
used if <code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_OTHER_REP_SLAVEID_ENABLED</span></code> is set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_OTHER_REP_SLAVEID_ENABLED</span></code> – If the Report Slave ID function
should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_READ_INPUT_ENABLED</span></code> – If the Read Input Registers function
should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_READ_HOLDING_ENABLED</span></code> – If the Read Holding Registers function
should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_WRITE_HOLDING_ENABLED</span></code> – If the Write Single Register function
should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_WRITE_MULTIPLE_HOLDING_ENABLED</span></code> – If the Write Multiple
registers function should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_READ_COILS_ENABLED</span></code> – If the Read Coils function should be
enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_WRITE_COIL_ENABLED</span></code> – If the Write Coils function should be
enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_WRITE_MULTIPLE_COILS_ENABLED</span></code> – If the Write Multiple Coils
function should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_READ_DISCRETE_INPUTS_ENABLED</span></code> – If the Read Discrete Inputs
function should be enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MB_FUNC_READWRITE_HOLDING_ENABLED</span></code> – If the Read/Write Multiple
Registers function should be enabled.</p></li>
</ul>
<p>See also other serial settings, in particular:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_SERIAL_TERMIOS</span></code> – Serial driver supports <code class="docutils literal notranslate"><span class="pre">termios.h</span></code> interfaces
If this is not defined, then the terminal settings (baud, parity, etc.)
are not configurable at runtime.</p></li>
</ul>
</section>
<section id="note">
<h2>Note<a class="headerlink" href="#note" title="Permalink to this heading"></a></h2>
<p>The developer of FreeModBus, Christian Walter, is still developing Modbus
libraries, although they are now commercial. See
<a class="reference external" href="http://www.embedded-solutions.at/">http://www.embedded-solutions.at/</a> for further information.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../foc/index.html" class="btn btn-neutral float-left" title="foc Field Oriented Control user-space library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../scpi/index.html" class="btn btn-neutral float-right" title="scpi SCPI instrument side parser" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>