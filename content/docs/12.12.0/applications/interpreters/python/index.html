<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python Python interpreter &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_collapse.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
      <script src="../../../_static/doctools.js"></script>
      <script src="../../../_static/sphinx_highlight.js"></script>
      <script src="../../../_static/clipboard.min.js"></script>
      <script src="../../../_static/copybutton.js"></script>
      <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="quickjs QuickJS JavaScript interpreter" href="../quickjs/index.html" />
    <link rel="prev" title="minibasic Mini Basic Interpreter" href="../minibasic/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../12.10.0" >12.10.0</option>
    
    <option value="../../../../12.11.0" >12.11.0</option>
    
    <option value="../../../../12.12.0" >12.12.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">OS Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../audioutils/index.html">Audio Utility libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boot/index.html">Bootloader Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../benchmarks/index.html">Benchmark Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canutils/index.html">CAN Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Cryptography Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fsutils/index.html">File System Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../games/index.html">Games</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../graphics/index.html">Graphics Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../industry/index.html">Industrial Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../inertial/index.html">Inertial Libraries Support</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Interpreters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../bas/index.html"><code class="docutils literal notranslate"><span class="pre">bas</span></code> Bas BASIC Interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duktape/index.html"><code class="docutils literal notranslate"><span class="pre">duktape</span></code> Duktape JavaScript interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ficl/index.html"><code class="docutils literal notranslate"><span class="pre">ficl</span></code> Ficl Forth interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lua/index.html"><code class="docutils literal notranslate"><span class="pre">lua</span></code> Lua interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../luajit/index.html"><code class="docutils literal notranslate"><span class="pre">luajit</span></code> LuaJIT interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../minibasic/index.html"><code class="docutils literal notranslate"><span class="pre">minibasic</span></code> Mini Basic Interpreter</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">Python</span></code> Python interpreter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-does-it-work">How Does it Work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running-python-on-nuttx">Building and Running Python on NuttX</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#rv-virt-risc-v-qemu"><code class="docutils literal notranslate"><span class="pre">rv-virt</span></code> (RISC-V QEMU)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#esp32-s3">ESP32-S3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../quickjs/index.html"><code class="docutils literal notranslate"><span class="pre">quickjs</span></code> QuickJS JavaScript interpreter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../toywasm/index.html"><code class="docutils literal notranslate"><span class="pre">toywasm</span></code> Toywasm Webassembly Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wamr/index.html"><code class="docutils literal notranslate"><span class="pre">wamr</span></code> Webassembly Micro Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wasm3/index.html"><code class="docutils literal notranslate"><span class="pre">wasm3</span></code> WASM3 Webassembly Runtime</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lte/index.html">LTE Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/index.html">Math Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mlearing/index.html">Machine Learning Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netutils/index.html">Network Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nsh/index.html">NuttShell (NSH)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdr/index.html">Software Defined Radio Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system/index.html">System Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html">Host Side Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wireless/index.html">Wireless Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../standards/index.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Interpreters</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">Python</span></code> Python interpreter</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/applications/interpreters/python/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-python-interpreter">
<h1><code class="docutils literal notranslate"><span class="pre">Python</span></code> Python interpreter<a class="headerlink" href="#python-python-interpreter" title="Permalink to this heading"></a></h1>
<p>This guide explains how to run Python on NuttX.</p>
<p><em>Yes, you heard it right</em>. <strong>Python on NuttX</strong>. This is a port of the <a class="reference external" href="https://github.com/python/cpython">CPython</a> repository for NuttX.
The <cite>CPython</cite> repository is the reference implementation of the Python programming language.
It is written in C and is the most widely used Python interpreter.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Python for NuttX is still in the experimental stage (thus, it requires <code class="docutils literal notranslate"><span class="pre">CONFIG_EXPERIMENTAL</span></code> to be enabled)
It is not fully functional for all the architectures and configurations.
Please check this <a class="reference external" href="https://github.com/apache/nuttx-apps/issues/2884">issue</a> in the <a class="reference external" href="https://github.com/apache/nuttx-apps/">nuttx-apps</a> repository to know the current status.</p>
</div>
<section id="how-does-it-work">
<h2>How Does it Work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Python for NuttX runs on RISC-V QEMU (emulated) and on Espressif’s ESP32-S3.</p></li>
<li><p>Python modules are stored in <a class="reference external" href="https://docs.python.org/3/glossary.html#term-bytecode">pyc</a> (byte-code format) and are loaded from a ROMFS image at startup.</p></li>
<li><p>The Python wrapper application on NuttX mounts the ROMFS partition which contains the Python modules and sets the required environment variables (<code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> and <code class="docutils literal notranslate"><span class="pre">PYTHON_BASIC_REPL</span></code>) automatically.</p></li>
</ol>
</section>
<section id="building-and-running-python-on-nuttx">
<h2>Building and Running Python on NuttX<a class="headerlink" href="#building-and-running-python-on-nuttx" title="Permalink to this heading"></a></h2>
<section id="rv-virt-risc-v-qemu">
<h3><code class="docutils literal notranslate"><span class="pre">rv-virt</span></code> (RISC-V QEMU)<a class="headerlink" href="#rv-virt-risc-v-qemu" title="Permalink to this heading"></a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">rv-virt:python</span></code> config to build Python for NuttX. Note that the CMake scripts don’t work for this configuration. For now, please use the makefile build instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>nuttx
<span class="gp">$ </span>make<span class="w"> </span>distclean
<span class="gp">$ </span>./tools/configure.sh<span class="w"> </span>rv-virt:python
<span class="gp">$ </span>make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="gp">$ </span>ls<span class="w"> </span>-l<span class="w"> </span>nuttx
</pre></div>
</div>
<p>This will generate a <code class="docutils literal notranslate"><span class="pre">nuttx</span></code> binary. This file can be run using the RISC-V QEMU.</p>
<p>Before running the RISC-V QEMU, create a raw disk image with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>./mydisk-1gb.img<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">1024</span>
</pre></div>
</div>
<p>Then, run RISC-V QEMU with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>qemu-system-riscv32<span class="w"> </span>-semihosting<span class="w"> </span>-M<span class="w"> </span>virt,aclint<span class="o">=</span>on<span class="w"> </span>-cpu<span class="w"> </span>rv32<span class="w"> </span>-smp<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-global<span class="w"> </span>virtio-mmio.force-legacy<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-device<span class="w"> </span>virtio-serial-device,bus<span class="o">=</span>virtio-mmio-bus.0<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-chardev<span class="w"> </span>socket,telnet<span class="o">=</span>on,host<span class="o">=</span><span class="m">127</span>.0.0.1,port<span class="o">=</span><span class="m">3450</span>,server<span class="o">=</span>on,wait<span class="o">=</span>off,id<span class="o">=</span>foo<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-device<span class="w"> </span>virtconsole,chardev<span class="o">=</span>foo<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-device<span class="w"> </span>virtio-rng-device,bus<span class="o">=</span>virtio-mmio-bus.1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-netdev<span class="w"> </span>user,id<span class="o">=</span>u1,hostfwd<span class="o">=</span>tcp:127.0.0.1:10023-10.0.2.15:23,hostfwd<span class="o">=</span>tcp:127.0.0.1:15001-10.0.2.15:5001<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-device<span class="w"> </span>virtio-net-device,netdev<span class="o">=</span>u1,bus<span class="o">=</span>virtio-mmio-bus.2<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>./mydisk-1gb.img,if<span class="o">=</span>none,format<span class="o">=</span>raw,id<span class="o">=</span>hd<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-device<span class="w"> </span>virtio-blk-device,bus<span class="o">=</span>virtio-mmio-bus.3,drive<span class="o">=</span>hd<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-bios<span class="w"> </span>none<span class="w"> </span>-kernel<span class="w"> </span>./nuttx<span class="w"> </span>-nographic

<span class="go">ABC[    0.062131] board_userled: LED 1 set to 0</span>
<span class="go">[    0.063269] board_userled: LED 2 set to 0</span>
<span class="go">[    0.063367] board_userled: LED 3 set to 0</span>
<span class="go">telnetd [4:100]</span>

<span class="go">NuttShell (NSH) NuttX-10.4.0</span>
<span class="go">nsh&gt; python</span>
<span class="go">Python 3.13.0 (main, Dec  4 2024, 17:00:42) [GCC 13.2.0] on nuttx</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<section id="demo">
<h4>Demo<a class="headerlink" href="#demo" title="Permalink to this heading"></a></h4>
<p>Check the following <a class="reference external" href="https://asciinema.org/">asciinema</a> demo to see how to run Python on NuttX. You can copy and paste the commands from the demo to try it yourself.</p>
<a class="reference external image-reference" href="https://asciinema.org/a/bYYy1fyIOQ3hOY4lJ7L3WFcNb"><img alt="https://asciinema.org/a/bYYy1fyIOQ3hOY4lJ7L3WFcNb.svg" src="https://asciinema.org/a/bYYy1fyIOQ3hOY4lJ7L3WFcNb.svg" /></a>
</section>
</section>
<section id="esp32-s3">
<h3>ESP32-S3<a class="headerlink" href="#esp32-s3" title="Permalink to this heading"></a></h3>
<p>For this example, we will use the ESP32-S3 board. Use the <code class="docutils literal notranslate"><span class="pre">esp32s3-devkit:python</span></code> config to build
Python for NuttX. Note that this defconfig uses a board with the ESP32-S3-WROOM-2 module with 32MiB
of flash and 8MiB of PSRAM.</p>
<p>Build and flash the ESP32-S3 board with the following commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>nuttx
<span class="gp">$ </span>make<span class="w"> </span>distclean
<span class="gp">$ </span>./tools/configure.sh<span class="w"> </span>esp32s3-devkit:python
<span class="gp">$ </span>make<span class="w"> </span>flash<span class="w"> </span><span class="nv">ESPTOOL_BINDIR</span><span class="o">=</span>./<span class="w"> </span><span class="nv">ESPTOOL_PORT</span><span class="o">=</span>/dev/ttyUSB0<span class="w"> </span>-s<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
</pre></div>
</div>
<p>To run Python on ESP32-S3, just open a serial terminal and connect to the ESP32-S3 board.
You will see the NuttShell (NSH) prompt. Run the following commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; python</span>
<span class="go">Python 3.13.0 (main, Dec  4 2024, 17:00:42) [GCC 13.2.0] on nuttx</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../minibasic/index.html" class="btn btn-neutral float-left" title="minibasic Mini Basic Interpreter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../quickjs/index.html" class="btn btn-neutral float-right" title="quickjs QuickJS JavaScript interpreter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>