<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conway’s Game of Life &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_collapse.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
      <script src="../../../_static/doctools.js"></script>
      <script src="../../../_static/sphinx_highlight.js"></script>
      <script src="../../../_static/clipboard.min.js"></script>
      <script src="../../../_static/copybutton.js"></script>
      <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="match4 Match4" href="../match4/index.html" />
    <link rel="prev" title="brickmatch Brickmatch" href="../brickmatch/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../12.5.0" >12.5.0</option>
    
    <option value="../../../../12.5.1" >12.5.1</option>
    
    <option value="../../../../12.6.0" >12.6.0</option>
    
    <option value="../../../../12.7.0" >12.7.0</option>
    
    <option value="../../../../12.8.0" >12.8.0</option>
    
    <option value="../../../../12.9.0" >12.9.0</option>
    
    <option value="../../../../12.10.0" >12.10.0</option>
    
    <option value="../../../../12.11.0" >12.11.0</option>
    
    <option value="../../../../12.12.0" >12.12.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">OS Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../audioutils/index.html">Audio Utility libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boot/index.html">Bootloader Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../benchmarks/index.html">Benchmark Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canutils/index.html">CAN Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Cryptography Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fsutils/index.html">File System Utilities</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Games</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../brickmatch/index.html"><code class="docutils literal notranslate"><span class="pre">brickmatch</span></code> Brickmatch</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Conway’s Game of Life</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-options">Configuration options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../match4/index.html"><code class="docutils literal notranslate"><span class="pre">match4</span></code> Match4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snake/index.html"><code class="docutils literal notranslate"><span class="pre">snake</span></code> Snake</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../graphics/index.html">Graphics Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../industry/index.html">Industrial Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../inertial/index.html">Inertial Libraries Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../interpreters/index.html">Interpreters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lte/index.html">LTE Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math/index.html">Math Library Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mlearing/index.html">Machine Learning Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netutils/index.html">Network Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nsh/index.html">NuttShell (NSH)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdr/index.html">Software Defined Radio Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system/index.html">System Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html">Host Side Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wireless/index.html">Wireless Libraries and NSH Add-Ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../standards/index.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logos/index.html">NuttX Logos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_tags/tagsindex.html">Tags</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Games</a></li>
      <li class="breadcrumb-item active">Conway’s Game of Life</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apache/nuttx/blob/master/Documentation/applications/games/cgol/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conway-s-game-of-life">
<h1>Conway’s Game of Life<a class="headerlink" href="#conway-s-game-of-life" title="Permalink to this heading"></a></h1>
<p>A classic “game” is Conway’s Game of Life (CGOL). It is not a game in the
playable sense, but is an entertaining curiosity. CGOL is a type of cellular
automata: complex behaviour arising from a simplistic set of rules. It has been
widely studied, especially by mathematicians. Conway himself was a
mathematician.</p>
<figure class="align-center" id="id2" style="width: 80%">
<img alt="An example of rendered output from the CGOL game." src="../../../_images/cgol.jpg" />
<figcaption>
<p><span class="caption-text">An example of rendered output from the CGOL game.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The CGOL implementation for NuttX relies on a frame buffer driver, that is:
<a class="reference internal" href="../../../components/nxgraphics/framebuffer_char_driver.html"><span class="doc">Framebuffer Character Driver</span></a>. If you have
<code class="docutils literal notranslate"><span class="pre">VIDEO_FB</span></code> enabled, you should be able to use the app. The visuals for the
game are rendered to a display through the provided frame buffer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CGOL currently only supports devices with 32, 24, 16 or 8 bpp rendering.
Since the game is only two colours, 1 bpp rendering can be supported as well,
I just didn’t want to bother playing with individual bit operations any more
by the time I got to the end of writing the application. By all means, please
send patches!</p>
<p>The implementation was only tested on a 32bpp frame buffer device.</p>
</div>
<p>This game works for frame buffers that require <code class="docutils literal notranslate"><span class="pre">FB_UPDATE</span></code> as well. It does
nothing special with overlays.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The game can be played by simply running it in the NSH console:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; cgol</span>
</pre></div>
</div>
<p>The game will use the frame buffer device specified by
<code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_FBDEV</span></code> to render the image. By default, that is
<code class="docutils literal notranslate"><span class="pre">/dev/fb0</span></code>. If you wish to use a different device at run-time, you can pass
the frame buffer device path as the first argument:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nsh&gt; cgol /dev/fb1</span>
</pre></div>
</div>
<p>Note that the game will loop forever and render the output to the screen. After
a certain point, CGOL reaches a “stable” configuration and there is not really
anything interesting to watch. At this point, you can terminate the application
with <code class="docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">C</span></code>. You can also run the app in the background by adding the
<code class="docutils literal notranslate"><span class="pre">&amp;</span></code> character after the command in NSH, which is recommended if you want to do
things in the console after running it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This program has not been tested with <code class="docutils literal notranslate"><span class="pre">bpp</span></code> values other than 32. It may
have unknown bugs.</p>
<p>It has also not been tested with devices that have a word size
(<code class="docutils literal notranslate"><span class="pre">sizeof(unsigned</span> <span class="pre">int)</span></code>) other than 32 bits.</p>
</div>
</section>
<section id="configuration-options">
<h2>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this heading"></a></h2>
<p>There are a few options you can customize in order to modify the game. The first
two are very obvious: the map width and map height.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_MAPWIDTH</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_MAPHEIGHT</span></code></p></li>
</ul>
<p>These options select the width and height of the game map in cells. You must
pick a width which is a multiple of <code class="docutils literal notranslate"><span class="pre">sizeof(unsigned</span> <span class="pre">int)</span> <span class="pre">*</span> <span class="pre">8</span></code>. This is a
necessary evil in order to implement CGOL efficiently on embedded device. Often
times, this value is your device’s natural word size in bits. So, if you’re
using a 32 bit machine, pick a map width that is a multiple of 32. There is no
such restriction for the map height.</p>
<p>To change the amount of cells used to populate the map initially, you can modify
the density: <code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_DENSITY</span></code>. The number of cells that are
generated at start is then <code class="docutils literal notranslate"><span class="pre">TOTAL_CELLS</span> <span class="pre">*</span> <span class="pre">(1</span> <span class="pre">/</span> <span class="pre">density)</span></code>, where total cells
is the map area.</p>
<p>The next thing you can change is the delay between frames in microseconds, using
the option: <code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_FRAMEDELAY</span></code>. By default this value is 0 (no
delay). Use this if the rendering is too fast for you to appreciate each frame.</p>
<p>Purely for rendering reasons, the last option you can change is
<code class="docutils literal notranslate"><span class="pre">CONFIG_GAMES_CGOL_DBLBUF</span></code>. This enables double buffering for rendering, which
allocates a RAM buffer of equal size to the actual framebuffer. All rendering is
performed directly on the RAM buffer, and then copied to the framebuffer once
done. This is only necessary on some devices. For instance, the <a class="reference internal" href="../../../platforms/arm64/bcm2711/boards/raspberrypi-4b/index.html"><span class="doc">Raspberry
Pi 4b</span></a> experiences
significant artifacts and completely incorrect rendering if double buffering is
not used.</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading"></a></h2>
<p>The game itself is implemented using bit-fields to represent living and dead
cells. A <code class="docutils literal notranslate"><span class="pre">1</span></code> bit is alive, and a <code class="docutils literal notranslate"><span class="pre">0</span></code> is dead. I used the natural word size
of the machine to store the bits, which is why I impose the restriction that the
map width must be a multiple of the number of bits in an <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>.</p>
<p>More bits in a word equates to more parallelism. When rendering living cells, I
can skip over 32 cells at once on a 32-bit machine if the word evaluates to 0.
This saves 32 iterations. The bit-fields themselves are also a space saver, as
opposed to using 1 byte per cell, for instance. Even representing living cells
as (x, y) pairs consumes more memory, and also takes significantly more CPU
power to advance the game state at each step.</p>
<p>The main loop consists of the following steps:</p>
<ol class="arabic simple">
<li><p>Render living cells</p></li>
<li><p>Sleep if user configured frame delay</p></li>
<li><p>Display render</p></li>
<li><p>Advance the state of the game</p></li>
<li><p>Clear the render</p></li>
</ol>
<p>The map is randomly initialized with living cells using <code class="docutils literal notranslate"><span class="pre">rand()</span></code>, which is a
uniform distribution. This isn’t always the best for CGOL; a certain density
needs to be achieved for interesting evolutions. I have settled on a density of
1/6 of the map.</p>
<p>The game is auto-scaled to fill as much of the frame buffer as possible. The
minimum resolution is one pixel per cell. If the configuration has a map size
larger than the frame buffer, the program will exit with an error.</p>
<p>Finally, the map wraps around from right to left. It does not wrap from top to
bottom to allow a more memory efficient method of buffering the next state as it
is calculated.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>This program could be improved with:</p>
<ul class="simple">
<li><p>1 bit support</p></li>
<li><p>Optional input device support for re-initializing the game, maybe drawing
cells</p></li>
<li><p>Optional ability to load seeds</p></li>
<li><p>Runtime speed controls</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../brickmatch/index.html" class="btn btn-neutral float-left" title="brickmatch Brickmatch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../match4/index.html" class="btn btn-neutral float-right" title="match4 Match4" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>