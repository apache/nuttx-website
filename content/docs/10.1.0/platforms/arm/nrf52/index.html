<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nordic nRF52 &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="MakerDiary nRF52832-MDK" href="boards/nrf52832-mdk/index.html" />
    <link rel="prev" title="ARM" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
    
    <img src="../../../_static/NuttX.png" class="logo" alt="Logo"/>
  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">ARM</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Nordic nRF52</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clock-configuration">Clock Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-timer">System Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regulator-control">Regulator Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peripheral-support">Peripheral Support</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#gpio-gpiote">GPIO/GPIOTE</a></li>
<li class="toctree-l5"><a class="reference internal" href="#adc">ADC</a></li>
<li class="toctree-l5"><a class="reference internal" href="#i2c">I2C</a></li>
<li class="toctree-l5"><a class="reference internal" href="#spi">SPI</a></li>
<li class="toctree-l5"><a class="reference internal" href="#uart">UART</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ppi">PPI</a></li>
<li class="toctree-l5"><a class="reference internal" href="#pwm">PWM</a></li>
<li class="toctree-l5"><a class="reference internal" href="#rng">RNG</a></li>
<li class="toctree-l5"><a class="reference internal" href="#timer">TIMER</a></li>
<li class="toctree-l5"><a class="reference internal" href="#rtc">RTC</a></li>
<li class="toctree-l5"><a class="reference internal" href="#wdt">WDT</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ble-support">BLE Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-boards">Supported Boards</a><ul>
<li class="toctree-l5"><a class="reference internal" href="boards/nrf52832-mdk/index.html">MakerDiary nRF52832-MDK</a></li>
<li class="toctree-l5"><a class="reference internal" href="boards/nrf52832-sparkfun/index.html">Sparkfun nRF52832 Breakout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../xtensa/index.html">Xtensa</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Supported Platforms</a> &raquo;</li>
          <li><a href="../index.html">ARM</a> &raquo;</li>
      <li>Nordic nRF52</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/platforms/arm/nrf52/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nordic-nrf52">
<h1>Nordic nRF52<a class="headerlink" href="#nordic-nrf52" title="Permalink to this headline"></a></h1>
<p>The nRF52 series of chips from Nordic Semiconductor are based around an ARM Cortex-M4 core running
at 64 MHz and feature Bluetooth Low Energy (BLE) support.</p>
<section id="clock-configuration">
<h2>Clock Configuration<a class="headerlink" href="#clock-configuration" title="Permalink to this headline"></a></h2>
<p>Clock settings are handled via Kconfig options, which determines whether to start external crystal
for the HFCLK, whether to start the LFCLK and which oscillator to use.</p>
</section>
<section id="system-timer">
<h2>System Timer<a class="headerlink" href="#system-timer" title="Permalink to this headline"></a></h2>
<p>The clock used for providing system time can be chosen via Kconfig. You can choose to use ARM SysTick
or use RTC in tickless mode.</p>
</section>
<section id="regulator-control">
<h2>Regulator Control<a class="headerlink" href="#regulator-control" title="Permalink to this headline"></a></h2>
<p>DC/DC regulator can be made to be enabled at boot via Kconfig.</p>
</section>
<section id="peripheral-support">
<h2>Peripheral Support<a class="headerlink" href="#peripheral-support" title="Permalink to this headline"></a></h2>
<p>The following list indicates peripherals supported in NuttX:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 32%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Peripheral</p></th>
<th class="head"><p>Support</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GPIO</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>GPIOTE</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>I2S</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MWU</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>NFCT</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>PDM</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>PPI</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>PWM</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>QDEC</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>QSPI</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RADIO</p></td>
<td><p>Yes</p></td>
<td><p>Basic</p></td>
</tr>
<tr class="row-odd"><td><p>RNG</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RTC</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SAADC</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SPIM</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SPIS</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TEMP</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TIMER</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TWIM</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TWIS</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>UART</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>UARTE</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>USBD</p></td>
<td><p>No</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>WDT</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Peripherals such as AAR, ACL, CCM, ECB are not directly used by NuttX since they
are part of BLE controller implementation (link).</p>
<section id="gpio-gpiote">
<h3>GPIO/GPIOTE<a class="headerlink" href="#gpio-gpiote" title="Permalink to this headline"></a></h3>
<p>Pins can be configured/operated using <code class="docutils literal notranslate"><span class="pre">nrf52_gpio_*</span></code> functions. Interrupts are
handled via the GPIOTE peripheral in one of two ways: via a GPIOTE channel or via
PORT events. The former allows for simultaneous rising/falling edge-sensitive interrupts
per-pin. However, as there are a limited number of channels (and sometimes these
are used by some drivers for specific tasks), it may not always be possible to use
this mechanism. The latter approach for pin interrupts is via the PORT event, determined
by pin state on a their corresponding GPIO port. This is related to the SENSE capability
of pins, which can only be set to either rising or falling edge sensing.</p>
<p>Depending on <code class="docutils literal notranslate"><span class="pre">CONFIG_NRF52_PER_PIN_INTERRUPTS</span></code> option, you can set a callback for
the PORT event itself or you can set a callback for a given pin. In the latter case
the driver scans for pins with DETECT bit high and calls the configured callback
automatically.</p>
<p>Finally, GPIOTE can also be used to configure a channel in <em>task mode</em>, which allows to
control pin state via tasks/events.</p>
</section>
<section id="adc">
<h3>ADC<a class="headerlink" href="#adc" title="Permalink to this headline"></a></h3>
<p>The SAADC peripheral is exposed via standard ADC driver. The lower-half of this driver
is initialized by calling <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf52_adcinitialize()</span></code>.</p>
</section>
<section id="i2c">
<h3>I2C<a class="headerlink" href="#i2c" title="Permalink to this headline"></a></h3>
<p>I2C is supported both in polling and interrupt mode (via EasyDMA).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The I2C peripheral does not support sending two transfers without sending
a START nor RSTART. For this reason, this is supported via an internal buffer where
messages will be first copied to and sent together.</p>
</div>
<p>The lower-half of I2C bus is initialized by <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf52_i2cbus_initialize()</span></code>.
There’s also a software (bitbang) I2C implementation for nRF52. The lower-half is
initialized via <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf52_i2c_bitbang_initialize()</span></code>.</p>
</section>
<section id="spi">
<h3>SPI<a class="headerlink" href="#spi" title="Permalink to this headline"></a></h3>
<p>SPI is supported both in polling and interrupt-based (via EasyDMA) mode. The latter
supports arbitrarily long transfers using Nordic’s list-mode EasyDMA (intermediate
transfers are currently still manually started).</p>
<p>It is possible to use SPI without either MOSI/MISO pin defined by simply not providing
the relevant <code class="docutils literal notranslate"><span class="pre">BOARD_SPI*_MISO/MOSI_PIN</span></code> definition.</p>
<p>This implementation support power management hooks, which will disable SPI peripheral when
entering either SLEEP or STANDBY modes and reconfigure it when going back to NORMAL mode.</p>
</section>
<section id="uart">
<h3>UART<a class="headerlink" href="#uart" title="Permalink to this headline"></a></h3>
<p>UART is implemented using polling. UARTE EasyDMA feature is not yet supported.
This may introduce a large number of interrupts which may be undesireable.</p>
</section>
<section id="ppi">
<h3>PPI<a class="headerlink" href="#ppi" title="Permalink to this headline"></a></h3>
<p>The PPI peripheral is supported via a specific API which lets you control the EVENT
and TASKs to trigger, both for individual and grouped channels.</p>
<p>When using channels, you should consider that some peripherals may use PPI internally
and some may be unavailable for further use. As a helper, if debug assertions are
enabled, calls to PPI API will check for a channel to actually be disabled when being
enabled and viceversa. This may help catch collisions in PPI use.</p>
</section>
<section id="pwm">
<h3>PWM<a class="headerlink" href="#pwm" title="Permalink to this headline"></a></h3>
<p>PWM is supported via standard driver. This means that more advanced features such as
complex sequences or waveform modes are not yet supported.</p>
</section>
<section id="rng">
<h3>RNG<a class="headerlink" href="#rng" title="Permalink to this headline"></a></h3>
<p>The RNG peripheral will be used to register a random/urandom device automatically, when
enabled.</p>
</section>
<section id="timer">
<h3>TIMER<a class="headerlink" href="#timer" title="Permalink to this headline"></a></h3>
<p>The TIMER peripheral is exposed as standard timer.</p>
</section>
<section id="rtc">
<h3>RTC<a class="headerlink" href="#rtc" title="Permalink to this headline"></a></h3>
<p>The RTC peripheral is exposed as a standard timer, since it is really a low-power
timer, without any date handling capabilities.</p>
</section>
<section id="wdt">
<h3>WDT<a class="headerlink" href="#wdt" title="Permalink to this headline"></a></h3>
<p>The watchdog is supported via low-level API interface and also via standard watchdog
driver. The driver is written so as to handle an already running watchdog, which may
have been set by a bootloader.</p>
</section>
</section>
<section id="ble-support">
<h2>BLE Support<a class="headerlink" href="#ble-support" title="Permalink to this headline"></a></h2>
<p>BLE is supported in nRF52 using Nordic’s <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/nrfxlib/softdevice_controller/README.html">SoftDevice Controller</a>, using HCI interface. To enable BLE support
you need to call <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf52_sdc_initialize()</span></code> on boot, which will initialize the BLE controller.</p>
<p>SDC support involves registering various high-priority zero-latency interrupts and thus requires
enabling BASEPRI and high-priority interrupt support. On supported boards, a sample <code class="docutils literal notranslate"><span class="pre">sdc</span></code> configuration
is provided with settings already set.</p>
<p>Note that in this case, some peripherals (mostly those related to BLE) will be unavailable. Some PPI
channels will also be ocuppied (<code class="docutils literal notranslate"><span class="pre">NRF52_PPI_NUM_CONFIGURABLE_CHANNELS</span></code> will be set accordingly in this case).</p>
</section>
<section id="supported-boards">
<h2>Supported Boards<a class="headerlink" href="#supported-boards" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="boards/nrf52832-mdk/index.html">MakerDiary nRF52832-MDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="boards/nrf52832-sparkfun/index.html">Sparkfun nRF52832 Breakout</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="ARM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="boards/nrf52832-mdk/index.html" class="btn btn-neutral float-right" title="MakerDiary nRF52832-MDK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>