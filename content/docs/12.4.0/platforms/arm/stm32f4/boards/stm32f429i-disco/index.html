<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ST STM32F429I-DISCO &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ST STM32F4-Discovery" href="../stm32f4discovery/index.html" />
    <link rel="prev" title="ST STM32F411E-Discovery" href="../stm32f411e-disco/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../../../12.4.0" >12.4.0</option>
    
    <option value="../../../../../../12.5.0" >12.5.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Supported Platforms</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">ARM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../a1x/index.html">Allwinner A10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../am335x/index.html">TI/Sitara AM335x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../at32/index.html">Artery AT32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bcm2708/index.html">Broadcom BCM2708 (removed)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../c5471/index.html">TI TMS320-C5471</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cxd56xx/index.html">Sony CXD56xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../dm320/index.html">TI TMS320-DM320</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../efm32/index.html">SiLabs EFM32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../eoss3/index.html">EOSS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fvp-v8r-aarch32/index.html">FVP ARMv8-R Virt Chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../gd32f4/index.html">GD32F4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../goldfish/index.html">GOLDFISH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx1/index.html">NXP/Freescale i.MX1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imx6/index.html">NXP/Freescale i.MX6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../imxrt/index.html">NXP i.MX RT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kinetis/index.html">NXP/FreeScale Kinetis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../kl/index.html">NXP/FreeScale KLxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lc823450/index.html">ON Semiconductor LC823450</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc17xx/index.html">NXP LPC17xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc214x/index.html">NXP LPC214x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc2378/index.html">NXP LPC2378</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc31xx/index.html">NXP LPC31xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc40xx/index.html">NXP LPC40xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc43xx/index.html">NXP LPC43xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lpc54xx/index.html">NXP LPC54xx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../max326xx/index.html">Maxim Integrated MAX32660</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../moxart/index.html">Moxa NP51x0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf52/index.html">Nordic nRF52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf53/index.html">Nordic nRF53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nrf91/index.html">Nordic nRF91</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../nuc1xx/index.html">nuvoTon NUC120</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../phy62xx/index.html">PHY+ PHY62</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../qemu/index.html">QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../rp2040/index.html">RaspberryPi rp2040</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k1xx/index.html">NXP S32K1XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../s32k3xx/index.html">NXP S32K3XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sam34/index.html">Microchip SAM34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sama5/index.html">Microchip SAMA5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd2l2/index.html">Microchip SAMD2x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samd5e5/index.html">Microchip samd5e5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../samv7/index.html">Microchip SAM V7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f0/index.html">ST STM32F0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f1/index.html">ST STM32F1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f2/index.html">ST STM32F2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f3/index.html">ST STM32F3</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">ST STM32F4</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../index.html#supported-mcus">Supported MCUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#peripheral-support">Peripheral Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#fpu">FPU</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#development-environment">Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#gnu-toolchain-options">GNU Toolchain Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#ides">IDEs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#nuttx-eabi-buildroot-toolchain">NuttX EABI “buildroot” Toolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#nxflat-toolchain">NXFLAT Toolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#protected-mode-build">Protected Mode Build</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="../axoloti/index.html">Axoloti</a></li>
<li class="toctree-l5"><a class="reference internal" href="../clicker2-stm32/index.html">Mikroe Clicker2 STM32</a></li>
<li class="toctree-l5"><a class="reference internal" href="../mikroe-stm32f4/index.html">mikroe-stm32f4</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f401re/index.html">ST Nucleo F401RE</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f410rb/index.html">ST Nucleo F410RB</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f411re/index.html">ST Nucleo F401RE</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f412zg/index.html">ST Nucleo F410RB</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f429zi/index.html">ST Nucleo F429ZI</a></li>
<li class="toctree-l5"><a class="reference internal" href="../nucleo-f446re/index.html">ST Nucleo F446RE</a></li>
<li class="toctree-l5"><a class="reference internal" href="../odrive36/index.html">ODrive V3.6</a></li>
<li class="toctree-l5"><a class="reference internal" href="../olimex-stm32-e407/index.html">Olimex STM32-E407</a></li>
<li class="toctree-l5"><a class="reference internal" href="../olimex-stm32-h405/index.html">Olimex STM32-P207</a></li>
<li class="toctree-l5"><a class="reference internal" href="../olimex-stm32-h407/index.html">Olimex STM32-H407</a></li>
<li class="toctree-l5"><a class="reference internal" href="../olimex-stm32-p407/index.html">Olimex STM32-P207</a></li>
<li class="toctree-l5"><a class="reference internal" href="../omnibusf4/index.html">OMNIBUSF4</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm3240g-eval/index.html">ST STM32140G-EVAL</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32f401rc-rs485/index.html">stm32f401rc-rs485</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32f411-minimum/index.html">stm32f411-minimum</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32f411e-disco/index.html">ST STM32F411E-Discovery</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">ST STM32F429I-DISCO</a></li>
<li class="toctree-l5"><a class="reference internal" href="../stm32f4discovery/index.html">ST STM32F4-Discovery</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32f7/index.html">ST STM32F7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g0/index.html">ST STM32G0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32g4/index.html">ST STM32G4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32h7/index.html">ST STM32H7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l0/index.html">ST STM32L0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l1/index.html">ST STM32L1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l4/index.html">ST STM32L4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32l5/index.html">ST STM32L5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32u5/index.html">ST STM32U5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wb/index.html">ST STM32WB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32wl5/index.html">ST STM32WL5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../str71x/index.html">ST STR71</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tiva/index.html">TI/Stellaris Tiva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tms570/index.html">TI/Hercules TMS570xxx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../xmc4/index.html">Infineon XMC4000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arm64/index.html">ARM64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../avr/index.html">Microchip AVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ceva/index.html">CEVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../hc/index.html">HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mips/index.html">MIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misco/index.html">Misoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../or1k/index.html">OpenRISC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../renesas/index.html">Renesas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../risc-v/index.html">RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sim/index.html">Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sparc/index.html">SPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86/index.html">Intel 80x86</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x86_64/index.html">Intel 80x86_64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xtensa/index.html">Xtensa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z16/index.html">Z16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../z80/index.html">Z80</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../implementation/index.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Supported Platforms</a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">ARM</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">ST STM32F4</a></li>
      <li class="breadcrumb-item active">ST STM32F429I-DISCO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/platforms/arm/stm32f4/boards/stm32f429i-disco/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="st-stm32f429i-disco">
<h1>ST STM32F429I-DISCO<a class="headerlink" href="#st-stm32f429i-disco" title="Permalink to this heading"></a></h1>
<p>This page discusses issues unique to NuttX configurations for the
STMicro STM32F429I-DISCO development board featuring the STM32F429ZIT6
MCU. The STM32F429ZIT6 is a 180MHz Cortex-M4 operation with 2Mbit Flash
memory and 256kbytes. The board features:</p>
<ul class="simple">
<li><p>On-board ST-LINK/V2 for programming and debugging,</p></li>
<li><p>On-board 64 Mbits (8 Mbytes) External SDRAM (1 Mbit x 16-bit x 4-bank)</p></li>
<li><p>L3GD20, ST MEMS motion sensor, 3-axis digital output gyroscope,</p></li>
<li><p>TFT 2.4” LCD, 262K color RGB, 240 x 320 pixels</p></li>
<li><p>Touchscreen controller</p></li>
<li><p>Two user LEDs and two push-buttons,</p></li>
<li><p>USB OTG FS with micro-AB connector, and</p></li>
<li><p>Easy access to most MCU pins.</p></li>
</ul>
<dl>
<dt>NOTE:  Includes basic NSH command support with full 8MByte SDRAM + the</dt><dd><p>internal 256K.  Unsupported are the LCD and USB interfaces.</p>
<p>The board pin configuration to support on-board SDRAM and LCD
prevents use of the OTG FS module which is normally used for USB
NSH sessions.  Instead, the board routes the OTG HS pins to the
USB OTG connector.</p>
<p>The NSH configuration / testing that has been done so far was
performed by connecting an external RS-232 line driver to pins
PA9 (TX) and PA10 (RX) and configuring USART1 as the NSH console.</p>
</dd>
</dl>
<p>Refer to the <a class="reference external" href="http://www.st.com">http://www.st.com</a> website for further information about this
board (search keyword: 429i-disco)</p>
<p>NOTE:  This port was based on the original discovery kit, STM32F429I-DISCO.
That board has been superseded by the new STM32F429I-DISC1.</p>
<section id="setup-and-programming-flash">
<h2>Setup and Programming Flash<a class="headerlink" href="#setup-and-programming-flash" title="Permalink to this heading"></a></h2>
<p>I use a USB cable to power and program it.  And I use a USB/Serial
connected to pins PA9 and PA10 for the serial console (See the section
“UARTs” below).</p>
<p>FLASH may be programmed:</p>
<ul>
<li><p>Via USB using STM32 ST-Link Utility</p></li>
<li><p>Via USB using OpenOCD.  This command may be used to flash the
firmware using OpenOCD:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo openocd -f interface/stlink-v2.cfg -f target/stm32f4x.cfg -c init -c &quot;reset halt&quot; -c &quot;flash write_image erase nuttx.bin 0x08000000&quot;
</pre></div>
</div>
</li>
<li><p>Via JTAG/SWD connected to the SWD connector CN2.</p>
<p>CN4 Jumpers.  Remove jumpers to enable signals at SWD connector CN2.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SWD 6-Pin STM32F429i-Discovery Connector CN2
Pin   Signal Name       Description
----- ------ ---------- ------------------------------
Pin 1 AIN_1  VDD_TARGET VDD from application
Pin 2 T_JCLK SWCLK      SWD Clock
Pin 3 GND    GND        Ground
Pin 4 T_JTMS SWDIO      SWD data input/output
Pin 5 T_NRST NRST       Reset of target MCU
Pin 6 T_SWO  SWO        Reserved

SWD 20-pin J-Link Connector
Pin    Name      Type   Description
------ --------- ------ ------------------------------
Pin  1 VTref     Input  Target reference voltage
Pin  2 Vsupply   NC     Not connected in J-Link
Pin  3 Not used  NC     Not used in J-Link
Pin  5 Not used  NC     Not used in J-Link
Pin  7 SWDIO     I/O    Bi-directional data pin
Pin  9 SWCLK     Output Clock signal to target CPU
Pin 11 Not used  NC     Not used in J-Link
Pin 13 SWO       Output Serial wire output trace port
Pin 15 RESET     I/O    Target CPU reset signal (nRST)
Pin 17 Not used  NC     Not connected in J-Link
Pin 19 5V-Supply Output Supplies power to some boards.

Pins 4, 45, 8, 10, 12, 14, 16, 18 and 20 are GND pins in J-Link.  They
should also be connected to ground in the target system.
</pre></div>
</div>
</li>
</ul>
</section>
<section id="leds">
<h2>LEDs<a class="headerlink" href="#leds" title="Permalink to this heading"></a></h2>
<p>The STM32F429I-DISCO board has two user LEDs; green, and red on the board.
These LEDs are not used by the board port unless CONFIG_ARCH_LEDS is
defined.  In that case, the usage by the board port is defined in
include/board.h and src/up_leds.c. The LEDs are used to encode OS-related
events as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYMBOL                Meaning                 LED1*    LED2
                                              green    red
-------------------  -----------------------  -------  -------
LED_STARTED          NuttX has been started   ON       OFF
LED_HEAPALLOCATE     Heap has been allocated  OFF      ON
LED_IRQSENABLED      Interrupts enabled       ON       ON
LED_STACKCREATED     Idle stack created       OFF      ON
LED_INIRQ            In an interrupt**        ON       ON
LED_SIGNAL           In a signal handler      N/C      ON
LED_ASSERTION        An assertion failed      ON       ON
LED_PANIC            The system has crashed   ON       BLINK
LED_IDLE             STM32 is is sleep mode   (Optional, not used)

* In normal mode, LED1 will be on and LED2 might flicker a bit as IRQs
  and SIGNALS are processed.
* If LED1 is on and LED2 is blinking, then NuttX probably failed to boot
  or is in a PANIC condition.
</pre></div>
</div>
</section>
<section id="uarts">
<h2>UARTs<a class="headerlink" href="#uarts" title="Permalink to this heading"></a></h2>
<p>On the STM32F429I-DISCO board, because of pin mappings to support the
onboard SDRAM and LCD, the only UARTs that have both RX and TX pins
available are USART1 and UART5.  Other USARTS could be used for RX or TX
only, or they could be used for full-duplex if the other pin functions
aren’t being used (i.e. LCD or SDRAM).</p>
<section id="uart-usart-pins">
<h3>UART/USART PINS<a class="headerlink" href="#uart-usart-pins" title="Permalink to this heading"></a></h3>
</section>
<section id="default-serial-console">
<h3>Default Serial Console<a class="headerlink" href="#default-serial-console" title="Permalink to this heading"></a></h3>
<p>USART1 is enabled as the serial console in all configurations (see */defconfig).
USART1 RX and TX are configured on pins PA10 and PA9, respectively (see
include/board.h).:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Header 32X2 P1
--------------
Pin 1  5V
Pin 51 PA10
Pin 52 PA9
Pin 63 GND
</pre></div>
</div>
<p>If solder bridges SB11 and SB12 are closed, then USART1 will be connected to
the ST-Link and should be available over USB as a virtual COM interface.</p>
</section>
</section>
<section id="timer-inputs-outputs">
<h2>Timer Inputs/Outputs<a class="headerlink" href="#timer-inputs-outputs" title="Permalink to this heading"></a></h2>
<dl>
<dt>::</dt><dd><dl class="simple">
<dt>TIM1</dt><dd><p>CH1     PA8[1], PE9[1]
CH2     PA9, PE11[1]
CH3     PA10, PE13[1]
CH4     PA11[1], PE14[1]</p>
</dd>
<dt>TIM2</dt><dd><p>CH1     PA0[1], PA15[1], PA5
CH2     PA1[1], PB3[1]
CH3     PA2[1], PB10[1]
CH4     PA3[1], PB11[1]</p>
</dd>
<dt>TIM3</dt><dd><p>CH1     PA6[1], PB4, PC6[1]
CH2     PA7[1], PB5[1], PC7[1]
CH3     PB0[1], PC8
CH4     PB1[1], PC9[1]</p>
</dd>
<dt>TIM4</dt><dd><p>CH1     PB6[1], PD12[1]
CH2     PB7, PD13[1]
CH3     PB8[1], PD14[1]
CH4     PB9[1], PD15[1]</p>
</dd>
<dt>TIM5</dt><dd><p>CH1     PA0[1], PH10[1]
CH2     PA1[1], PH11[1]
CH3     PA2[1], PH12[1]
CH4     PA3[1], PI0[2]</p>
</dd>
<dt>TIM8</dt><dd><p>CH1     PC6[1], PI5[2]
CH2     PC7[1], PI6[2]
CH3     PC8, PI7[2]
CH4     PC9[1], PI2[2]</p>
</dd>
<dt>TIM9</dt><dd><p>CH1     PA2[1], PE5
CH2     PA3[1], PE6</p>
</dd>
<dt>TIM10</dt><dd><p>CH1     PB8[1], PF6</p>
</dd>
<dt>TIM11</dt><dd><p>CH1     PB9[1], PF7[1]</p>
</dd>
<dt>TIM12</dt><dd><p>CH1     PH6[1], PB14[1]
CH2     PC15[1], PH9[1]</p>
</dd>
<dt>TIM13</dt><dd><p>CH1     PA6[1], PF8[1]</p>
</dd>
<dt>TIM14</dt><dd><p>CH1     PA7[1], PF9[1]</p>
</dd>
</dl>
<p>[1] Indicates pins that have other on-board functions and should be used only
with care (See table 6 in the STM32F429I-DISCO User Guide).  The rest are
free I/O pins (This need to be updated.  They are incorrect!)
[2] Port I pins are not supported by the MCU</p>
</dd>
</dl>
</section>
<section id="fmc-sdram">
<h2>FMC SDRAM<a class="headerlink" href="#fmc-sdram" title="Permalink to this heading"></a></h2>
<section id="on-board-sdram">
<h3>On-board SDRAM<a class="headerlink" href="#on-board-sdram" title="Permalink to this heading"></a></h3>
<p>The STM32F429I-DISCO has 8 MBytes on-board SDRAM connected to the MCU’s
SDRAM Bank 2 connections (Bank 6 of the FMC).  This means the 8 MiB
(when enabled) is mapped to address 0xD0000000-0xD07FFFFF.  The port for
the STM32F429I-DISCO board includes support for using the onboard 8M SDRAM.</p>
</section>
<section id="configuration-options">
<h3>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this heading"></a></h3>
<p>Internal SRAM is available in all members of the STM32 family. The F4 family
also contains internal CCM SRAM.  This SRAM is different because it cannot
be used for DMA.  So if DMA needed, then the following should be defined
to exclude CCM SRAM from the heap:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32_CCMEXCLUDE    : Exclude CCM SRAM from the HEAP
</pre></div>
</div>
<p>In addition to internal SRAM, SRAM may also be available through the FMC.
In order to use FMC SDRAM, the following additional things need to be
present in the NuttX configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32_FMC=y          : Enables the FMC and the 8MiB SDRAM
CONFIG_STM32_EXTERNAL_RAM=y : Indicates that RAM is available via the
                              FMC (as opposed to an LCD or FLASH).
CONFIG_HEAP2_BASE           : The base address of the RAM in the FMC
                              address space.  This should be 0xD0000000.
CONFIG_HEAP2_SIZE           : The size of the RAM in the FMC
                              address space.  This should be 8388608.
CONFIG_MM_REGIONS           : Must be set to a large enough value to
                              include the FMC SDRAM (1, 2 or 3 depending
                              if the CCM RAM and/or FMC SDRAM are enabled).
</pre></div>
</div>
</section>
<section id="sram-configurations">
<h3>SRAM Configurations<a class="headerlink" href="#sram-configurations" title="Permalink to this heading"></a></h3>
<p>There are 4 possible SRAM configurations:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Configuration 1. System SRAM (only)
                 CONFIG_MM_REGIONS == 1
                 CONFIG_STM32_EXTERNAL_RAM NOT defined
                 CONFIG_STM32_CCMEXCLUDE defined
Configuration 2. System SRAM and CCM SRAM
                 CONFIG_MM_REGIONS == 2
                 CONFIG_STM32_EXTERNAL_RAM NOT defined
                 CONFIG_STM32_CCMEXCLUDE NOT defined
Configuration 3. System SRAM and FMC SDRAM
                 CONFIG_MM_REGIONS == 2
                 CONFIG_STM32_EXTERNAL_RAM defined
                 CONFIG_STM32_CCMEXCLUDE defined
Configuration 4. System SRAM, CCM SRAM, and FMC SDRAM
                 CONFIG_MM_REGIONS == 3
                 CONFIG_STM32_EXTERNAL_RAM defined
                 CONFIG_STM32_CCMEXCLUDE NOT defined
</pre></div>
</div>
</section>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this heading"></a></h2>
<p>Each STM32F429I-DISCO configuration is maintained in a sub-directory and
can be selected as follow:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tools/configure.sh stm32f429i-disco:&lt;subdir&gt;
</pre></div>
</div>
<p>Where &lt;subdir&gt; is one of the following:</p>
<section id="extflash">
<h3>extflash:<a class="headerlink" href="#extflash" title="Permalink to this heading"></a></h3>
<p>This is another NSH example.  If differs from other ‘nsh’ configurations
in that this configuration defines an external 8 MByte SPI FLASH (the
SST25VF064C part from Silicon Storage Technology, Inc.) which must be
be connected to the Discovery board’s SPI4 pins on the expansion pins.
Additionally, this demo uses UART1 for the console</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>This configuration assumes an SST25VF064C 8Mbyte SPI FLASH is
connected to SPI4 on the following Discovery board Pins:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SCK:   Port PE2   Board Connector P1, Pin 15
MOSI:  Port PE6   Board Connector P1, Pin 11
MISO:  Port PE5   Board Connector P1, Pin 14
CS:    Port PE4   Board Connector P1, Pin 13
</pre></div>
</div>
</li>
<li><p>This configuration does have UART1 output enabled and set up as
the system logging device.  To use this UART, you must add an
external RS-232 line driver to the UART1 pins of the DISCO board
on PA9 and PA10 of connector P1.</p></li>
</ol>
</section>
<section id="fb">
<h3>fb<a class="headerlink" href="#fb" title="Permalink to this heading"></a></h3>
<p>STM32F429I-DISCO LTDC Framebuffer demo example.  This is a simple
configuration used for some basic (non-graphic) debug of the framebuffer
character drivers using apps/examples/fb.  It simply opens the framebuffer
device and draws concentric rectangles of different colors in the
framebuffer:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; fb
</pre></div>
</div>
<p>Also included is the touchscreen test of apps/examples/touchscreen.  This
example will simply open the touchscreen driver then collect and display
touch inputs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; tc 1
tc_main: nsamples: 1
tc_main: Initializing external touchscreen device
tc_main: Opening /dev/input0
Sample     :
   npoints : 1
Point 1    :
        id : 0
     flags : 3c
         x : 2296
         y : 2311
         h : 0
         w : 0
  pressure : 1
Terminating!
nsh&gt;
</pre></div>
</div>
</section>
<section id="lgvl">
<h3>lgvl<a class="headerlink" href="#lgvl" title="Permalink to this heading"></a></h3>
<p>STM32F429I-DISCO LittlevGL demo example.</p>
<p>The ltdc is initialized during boot up.  Interaction with NSH is via
the serial console at 115200 8N1 baud.  From the nsh command line
execute the lvgldemo example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; lvgldemo
</pre></div>
</div>
<p>The test will execute the calibration process and then run the
LittlevGL demo project.</p>
</section>
<section id="nsh">
<h3>nsh<a class="headerlink" href="#nsh" title="Permalink to this heading"></a></h3>
<p>Configures the NuttShell (nsh) located at apps/examples/nsh.  The
Configuration enables the serial interfaces on UART2.  Support for
builtin applications is enabled, but in the base configuration no
builtin applications are selected (see NOTES below).</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>This configuration uses the mconf-based configuration tool.  To
change this configuration using that tool, you should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the kconfig-mconf tool.  See nuttx/README.txt
see additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute ‘make menuconfig’ in nuttx/ in order to start the
reconfiguration process.</p></li>
</ol>
</li>
<li><p>By default, this configuration uses the ARM EABI toolchain
for Windows and builds under Cygwin (or probably MSYS).  That
can easily be reconfigured, of course.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_HOST_WINDOWS=y                   : Builds under Windows
CONFIG_WINDOWS_CYGWIN=y                 : Using Cygwin
CONFIG_ARM_TOOLCHAIN_GNU_EABI=y      : GNU EABI toolchain for Windows
</pre></div>
</div>
</li>
<li><p>This example supports the PWM test (apps/examples/pwm) but this must
be manually enabled by selecting:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_PWM=y              : Enable the generic PWM infrastructure
CONFIG_STM32_TIM4=y       : Enable TIM4
CONFIG_STM32_TIM4_PWM=y   : Use TIM4 to generate PWM output
</pre></div>
</div>
<p>See also apps/examples/README.txt</p>
<p>Special PWM-only debug options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_DEBUG_PWM_INFO
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="5">
<li><p>This example supports the Quadrature Encode test (apps/examples/qencoder)
but this must be manually enabled by selecting:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_EXAMPLES_QENCODER=y : Enable the apps/examples/qencoder
CONFIG_SENSORS=y           : Enable support for sensors
CONFIG_SENSORS_QENCODER=y          : Enable the generic Quadrature Encoder infrastructure
CONFIG_STM32_TIM8=y        : Enable TIM8
CONFIG_STM32_TIM2=n        : (Or optionally TIM2)
CONFIG_STM32_TIM8_QE=y     : Use TIM8 as the quadrature encoder
CONFIG_STM32_TIM2_QE=y     : (Or optionally TIM2)
</pre></div>
</div>
<p>See also apps/examples/README.txt. Special debug options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_DEBUG_SENSORS
</pre></div>
</div>
</li>
<li><p>This example supports the watchdog timer test (apps/examples/watchdog)
but this must be manually enabled by selecting:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_EXAMPLES_WATCHDOG=y : Enable the apps/examples/watchdog
CONFIG_WATCHDOG=y          : Enables watchdog timer driver support
CONFIG_STM32_WWDG=y        : Enables the WWDG timer facility, OR
CONFIG_STM32_IWDG=y        : Enables the IWDG timer facility (but not both)
</pre></div>
</div>
<p>The WWDG watchdog is driven off the (fast) 42MHz PCLK1 and, as result,
has a maximum timeout value of 49 milliseconds.  for WWDG watchdog, you
should also add the following to the configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_EXAMPLES_WATCHDOG_PINGDELAY=20
CONFIG_EXAMPLES_WATCHDOG_TIMEOUT=49
</pre></div>
</div>
<p>The IWDG timer has a range of about 35 seconds and should not be an issue.</p>
</li>
<li><p>USB Support (CDC/ACM device):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32_OTGFS=y          : STM32 OTG FS support
CONFIG_USBDEV=y               : USB device support must be enabled
CONFIG_CDCACM=y               : The CDC/ACM driver must be built
CONFIG_NSH_BUILTIN_APPS=y     : NSH built-in application support must be enabled
CONFIG_NSH_ARCHINIT=y         : To perform USB initialization
</pre></div>
</div>
</li>
<li><p>Using the USB console.</p>
<p>The STM32F429I-DISCO NSH configuration can be set up to use a USB CDC/ACM
(or PL2303) USB console.  The normal way that you would configure the
the USB console would be to change the .config file like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32_OTGFS=y           : STM32 OTG FS support
CONFIG_USART2_SERIAL_CONSOLE=n : Disable the USART2 console
CONFIG_DEV_CONSOLE=n           : Inhibit use of /dev/console by other logic
CONFIG_USBDEV=y                : USB device support must be enabled
CONFIG_CDCACM=y                : The CDC/ACM driver must be built
CONFIG_CDCACM_CONSOLE=y        : Enable the CDC/ACM USB console.
</pre></div>
</div>
<p>NOTE: When you first start the USB console, you have hit ENTER a few
times before NSH starts.  The logic does this to prevent sending USB data
before there is anything on the host side listening for USB serial input.</p>
</li>
<li><p>Here is an alternative USB console configuration.  The following
configuration will also create a NSH USB console but this version
will use /dev/console.  Instead, it will use the normal /dev/ttyACM0
USB serial device for the console:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_STM32_OTGFS=y           : STM32 OTG FS support
CONFIG_USART2_SERIAL_CONSOLE=y : Keep the USART2 console
CONFIG_DEV_CONSOLE=y           : /dev/console exists (but NSH won&#39;t use it)
CONFIG_USBDEV=y                : USB device support must be enabled
CONFIG_CDCACM=y                : The CDC/ACM driver must be built
CONFIG_CDCACM_CONSOLE=n        : Don&#39;t use the CDC/ACM USB console.
CONFIG_NSH_USBCONSOLE=y        : Instead use some other USB device for the console
</pre></div>
</div>
<p>The particular USB device that is used is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_NSH_USBCONDEV=&quot;/dev/ttyACM0&quot;
</pre></div>
</div>
<p>The advantage of this configuration is only that it is easier to
bet working.  This alternative does has some side effects:</p>
<ul class="simple">
<li><p>When any other device other than /dev/console is used for a user
interface, linefeeds (n) will not be expanded to carriage return /
linefeeds (rn).  You will need to set your terminal program to account
for this.</p></li>
<li><p>/dev/console still exists and still refers to the serial port. So
you can still use certain kinds of debug output (see include/debug.h, all
debug output from interrupt handlers will be lost.</p></li>
<li><p>But don’t enable USB debug output!  Since USB is console is used for
USB debug output and you are using a USB console, there will be
infinite loops and deadlocks:  Debug output generates USB debug
output which generatates USB debug output, etc.  If you want USB
debug output, you should consider enabling USB trace
(CONFIG_USBDEV_TRACE) and perhaps the USB monitor (CONFIG_USBMONITOR).</p></li>
</ul>
<p>See the usbnsh configuration below for more information on configuring
USB trace output and the USB monitor.</p>
</li>
<li><p>USB OTG FS Host Support.  The following changes will enable support for
a USB host on the STM32F429I-DISCO, including support for a mass storage
class driver:</p>
<p>Device Drivers -&gt;
CONFIG_USBDEV=n          : Make sure the USB device support is disabled
CONFIG_USBHOST=y         : Enable USB host support
CONFIG_USBHOST_ISOC_DISABLE=y</p>
<p>Device Drivers -&gt; USB Host Driver Support
CONFIG_USBHOST_MSC=y     : Enable the mass storage class</p>
<p>System Type -&gt; STM32 Peripheral Support
CONFIG_STM32_OTGHS=y     : Enable the STM32 USB OTG FH block (FS mode)
CONFIG_STM32_SYSCFG=y    : Needed for all USB OTF HS support</p>
<p>RTOS Features -&gt; Work Queue Support
CONFIG_SCHED_WORKQUEUE=y : High priority worker thread support is required
CONFIG_SCHED_HPWORK=y    :   for the mass storage class driver.</p>
<p>File Systems -&gt;
CONFIG_FS_FAT=y          : Needed by the USB host mass storage class.</p>
<p>Board Selection -&gt;
CONFIG_BOARDCTL=y    : Needed for CONFIG_NSH_ARCHINIT</p>
<p>Application Configuration -&gt; NSH Library
CONFIG_NSH_ARCHINIT=y    : Architecture specific USB initialization
: is needed for NSH</p>
<p>With those changes, you can use NSH with a FLASH pen driver as shown
belong.  Here NSH is started with nothing in the USB host slot:</p>
<p>NuttShell (NSH) NuttX-x.yy
nsh&gt; ls /dev
/dev:
console
null
ttyS0</p>
<p>After inserting the FLASH drive, the /dev/sda appears and can be
mounted like this:</p>
<p>nsh&gt; ls /dev
/dev:
console
null
sda
ttyS0
nsh&gt; mount -t vfat /dev/sda /mnt/stuff
nsh&gt; ls /mnt/stuff
/mnt/stuff:
-rw-rw-rw-   16236 filea.c</p>
<p>And files on the FLASH can be manipulated to standard interfaces:</p>
<p>nsh&gt; echo “This is a test” &gt;/mnt/stuff/atest.txt
nsh&gt; ls /mnt/stuff
/mnt/stuff:
-rw-rw-rw-   16236 filea.c
-rw-rw-rw-      16 atest.txt
nsh&gt; cat /mnt/stuff/atest.txt
This is a test
nsh&gt; cp /mnt/stuff/filea.c fileb.c
nsh&gt; ls /mnt/stuff
/mnt/stuff:
-rw-rw-rw-   16236 filea.c
-rw-rw-rw-      16 atest.txt
-rw-rw-rw-   16236 fileb.c</p>
<p>To prevent data loss, don’t forget to un-mount the FLASH drive
before removing it:</p>
<p>nsh&gt; umount /mnt/stuff</p>
</li>
<li><p>I used this configuration to test the USB hub class.  I did this
testing with the following changes to the configuration (in addition
to those listed above for base USB host/mass storage class support):</p>
<blockquote>
<div><p>Drivers -&gt; USB Host Driver Support
CONFIG_USBHOST_HUB=y     : Enable the hub class
CONFIG_USBHOST_ASYNCH=y  : Asynchronous I/O supported needed for hubs</p>
<p>Board Selection -&gt;
CONFIG_STM32F429IDISCO_USBHOST_STACKSIZE=2048 (bigger than it needs to be)</p>
<p>RTOS Features -&gt; Work Queue Support
CONFIG_SCHED_LPWORK=y     : Low priority queue support is needed
CONFIG_SCHED_LPNTHREADS=1
CONFIG_SCHED_LPWORKSTACKSIZE=1024</p>
</div></blockquote>
<p>NOTES:</p>
</li>
</ol>
<ol class="arabic">
<li><p>It is necessary to perform work on the low-priority work queue
(vs. the high priority work queue) because deferred hub-related
work requires some delays and waiting that is not appropriate on
the high priority work queue.</p></li>
<li><p>Stack usage make increase when USB hub support is enabled because
the nesting depth of certain USB host class logic can increase.</p>
<p>STATUS:
2015-04-30
Appears to be fully functional.</p>
</li>
</ol>
</section>
<section id="nx">
<h3>nx<a class="headerlink" href="#nx" title="Permalink to this heading"></a></h3>
<p>This a simple test using the graphic example at apps/example/nx.  This
configuration illustrates the use of the LCD with the lower performance
SPI interface.</p>
</section>
<section id="nxwm">
<h3>nxwm<a class="headerlink" href="#nxwm" title="Permalink to this heading"></a></h3>
<p>This is a special configuration setup for the NxWM window manager
UnitTest.</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>The NxWM window manager can be found here:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>apps/graphics/NxWidgets/nxwm
</pre></div>
</div>
<p>The NxWM unit test can be found at:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>apps/graphics/NxWidgets/UnitTests/nxwm
</pre></div>
</div>
</li>
</ol>
<p>STATUS:
17-01-08:  There are instabilities in this configuration that make it
not usable on this platform.  While the equivalent configuration works
on other platforms, this one does not:  The calculator display does
not form properly.  There are fails in the NxTerm display, usually
around the point where the display should scroll up.</p>
<p>Update:  With all optimizations disabled, the issue seems to go away.
So this is most likely due to using high levels of optimization with a
bleeding edge GCC toolchain.</p>
<p>17-11-15: The original configuration used the slower SPI LCD interface.
The configuration was converted to use the high performance LTDC frame
buffer interface.  Performance is now excellent and I see none of the
instabilities mentioned above even at high levels of optimization.</p>
<p>The difficulty that I experienced was touching the tiny icons on the
menus.  The touscreen controller (along with my fat fingers) does not
appear to have sufficient precision to work in this way.  Larger icons
would likely make the interface easier to use.</p>
</section>
<section id="usbnsh">
<h3>usbnsh<a class="headerlink" href="#usbnsh" title="Permalink to this heading"></a></h3>
<p>This is another NSH example.  If differs from other ‘nsh’ configurations
in that this configurations uses a USB serial device for console I/O.
Such a configuration is useful on the stm32f429i-disco which has no
builtin RS-232 drivers.</p>
<p>NOTES:</p>
<ol class="arabic simple">
<li><p>This configuration uses the mconf-based configuration tool.  To
change this configuration using that tool, you should:</p>
<ol class="loweralpha simple">
<li><p>Build and install the kconfig-mconf tool.  See nuttx/README.txt
see additional README.txt files in the NuttX tools repository.</p></li>
<li><p>Execute ‘make menuconfig’ in nuttx/ in order to start the
reconfiguration process.</p></li>
</ol>
</li>
<li><p>This configuration does have UART1 output enabled and set up as
the system logging device.  To use this UART, you must add an
external RS-232 line driver to the UART1 pins of the DISCO board
on PA9 and PA10 of connector P1.</p></li>
</ol>
</section>
<section id="usbmsc">
<h3>usbmsc<a class="headerlink" href="#usbmsc" title="Permalink to this heading"></a></h3>
<p>This is an example of enabling the FS OTG port on the DISCO board for
mass storage use.  It provides an NSH session on UART1 to allow
accessing the connected USB mass storage device.  Such a configuration
is useful on the stm32f429i-disco which has no onboard SD card or mass
storage solution.</p>
<p>NOTES:</p>
<ol class="arabic">
<li><p>This configuration uses UART1 as the system console.  To use this
UART, you must add an external RS-232 line driver to the UART1 pins
of the DISCO board on PA9 and PA10 of connector P1.</p></li>
<li><p>The mass storage device will appear as /dev/sda and supports FAT
formatted “thumb” flash drives with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; mount -t vfat /dev/sda /mount_name
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="stm32f429i-disco-ltdc-framebuffer-demo-example">
<h2>STM32F429I-DISCO LTDC Framebuffer demo example<a class="headerlink" href="#stm32f429i-disco-ltdc-framebuffer-demo-example" title="Permalink to this heading"></a></h2>
<p>STM32F429I-DISCO LTDC Framebuffer demo example</p>
<section id="configure-and-build">
<h3>Configure and build<a class="headerlink" href="#configure-and-build" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>::</dt><dd><p>cd tools
./configure -a &lt;appdir&gt; stm32f429i-disco/fb
cd ..
make</p>
</dd>
</dl>
</section>
<section id="framebuffer-calculation">
<h3>Framebuffer calculation<a class="headerlink" href="#framebuffer-calculation" title="Permalink to this heading"></a></h3>
<p>Use the helper script boards/stm32f429i-disco/tools/fbcalc.sh for calculating
the heap2 and framebuffer memory region. The script assumes that all overlay
buffers (LTDC and DMA2D) located in heap2 memory region starting at address
0xD0000000. When changing the display size (when using a custom display), DMA2D
overlay size or the pixel format you have to recalculate the heap2 settings.
In this configuration all overlays (LTDC and DMA2D) positioned at the end of
heap2.</p>
</section>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h3>
<p>This configuration provides 2 LTDC (visible overlays) and 2 DMA2D overlays with
pixel format RGB565 and a resolution of 240x320.</p>
</section>
<section id="loading">
<h3>Loading<a class="headerlink" href="#loading" title="Permalink to this heading"></a></h3>
<p>st-flash write nuttx.bin 0x8000000</p>
</section>
<section id="executing">
<h3>Executing<a class="headerlink" href="#executing" title="Permalink to this heading"></a></h3>
<p>The ltdc is initialized during boot up.  Interaction with NSH is via the serial
console at 115200 8N1 baud.  From the nsh comandline execute the fb example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; fb
</pre></div>
</div>
<p>The test will put a pattern of concentric squares in the framebuffer and
terminate.</p>
<p>You can also test overlay hardware acceleration functionality by executing the
following command (shows a commandline help):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nsh&gt; fboverlay
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../stm32f411e-disco/index.html" class="btn btn-neutral float-left" title="ST STM32F411E-Discovery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../stm32f4discovery/index.html" class="btn btn-neutral float-right" title="ST STM32F4-Discovery" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>