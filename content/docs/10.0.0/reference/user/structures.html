<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OS Data Structures &mdash; NuttX latest documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Architecture APIs" href="../os/index.html" />
    <link rel="prev" title="Shared Memory Interfaces" href="12_shared_memory.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
  
    <a href="../../index.html" class="icon icon-home"> NuttX
  

  
    
    <img src="../../_static/NuttX.png" class="logo" alt="Logo"/>
  
  </a>
  
  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->
       
  <div class="version-selector">
    <select>
    
      <option value="latest" selected="selected">latest</option>
    
    </select>
  </div>
  
  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/index.html">OS Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Userspace API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_task_control.html">Task Control Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_task_scheduling.html">Task Scheduling Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_task_control.html">Task Control Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_message_queue.html">Named Message Queue Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_counting_semaphore.html">Counting Semaphore Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="06_clocks_timers.html">Clocks and Timers</a></li>
<li class="toctree-l3"><a class="reference internal" href="07_signals.html">Signal Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_pthread.html">Pthread Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="09_env_vars.html">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="10_filesystem.html">File System Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="11_network.html">Network Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="12_shared_memory.html">Shared Memory Interfaces</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OS Data Structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scalar-types">Scalar Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hidden-interface-structures">Hidden Interface Structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-to-the-errno-variable">Access to the <code class="docutils literal notranslate"><span class="pre">errno</span></code> Variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-interface-structures">User Interface Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../os/index.html">Architecture APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NuttX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="index.html">Userspace API</a> &raquo;</li>
        
      <li>OS Data Structures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/user/structures.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="os-data-structures">
<h1>OS Data Structures<a class="headerlink" href="#os-data-structures" title="Permalink to this headline">¶</a></h1>
<div class="section" id="scalar-types">
<h2>Scalar Types<a class="headerlink" href="#scalar-types" title="Permalink to this headline">¶</a></h2>
<p>Many of the types used to communicate with NuttX are simple scalar
types. These types are used to provide architecture independence of the
OS from the application. The scalar types used at the NuttX interface
include:</p>
<dl class="c type">
<dt id="c.pid_t">
<em class="property">type </em><code class="sig-name descname">pid_t</code><a class="headerlink" href="#c.pid_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.size_t">
<em class="property">type </em><code class="sig-name descname">size_t</code><a class="headerlink" href="#c.size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.sigset_t">
<em class="property">type </em><code class="sig-name descname">sigset_t</code><a class="headerlink" href="#c.sigset_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.time_t">
<em class="property">type </em><code class="sig-name descname">time_t</code><a class="headerlink" href="#c.time_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="section" id="hidden-interface-structures">
<h2>Hidden Interface Structures<a class="headerlink" href="#hidden-interface-structures" title="Permalink to this headline">¶</a></h2>
<p>Several of the types used to interface with NuttX are structures that
are intended to be hidden from the application. From the standpoint of
the application, these structures (and structure pointers) should be
treated as simple handles to reference OS resources. These hidden
structures include:</p>
<dl class="c struct">
<dt id="c.tcb_s">
<em class="property">struct </em><code class="sig-name descname">tcb_s</code><a class="headerlink" href="#c.tcb_s" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.mqd_t">
<em class="property">type </em><code class="sig-name descname">mqd_t</code><a class="headerlink" href="#c.mqd_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.sem_t">
<em class="property">type </em><code class="sig-name descname">sem_t</code><a class="headerlink" href="#c.sem_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.pthread_key_t">
<em class="property">type </em><code class="sig-name descname">pthread_key_t</code><a class="headerlink" href="#c.pthread_key_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>In order to maintain portability, applications should not reference
specific elements within these hidden structures. These hidden
structures will not be described further in this user’s manual.</p>
</div>
<div class="section" id="access-to-the-errno-variable">
<h2>Access to the <code class="docutils literal notranslate"><span class="pre">errno</span></code> Variable<a class="headerlink" href="#access-to-the-errno-variable" title="Permalink to this headline">¶</a></h2>
<p>A pointer to the thread-specific <code class="docutils literal notranslate"><span class="pre">errno</span></code> value is available through a
function call:</p>
<dl class="c function">
<dt id="c.__errno">
int *<code class="sig-name descname">__errno</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.__errno" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">__errno()</span></code> returns a pointer to the thread-specific
<code class="docutils literal notranslate"><span class="pre">errno</span></code> value. Note that the symbol <code class="docutils literal notranslate"><span class="pre">errno</span></code> is defined to be
<code class="docutils literal notranslate"><span class="pre">__errno()</span></code> so that the usual access by referencing the symbol
<code class="docutils literal notranslate"><span class="pre">errno</span></code> will work as expected.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;errno.h&gt;</span><span class="cp"></span>
<span class="cp">#define errno *__errno()</span>
<span class="kt">int</span> <span class="o">*</span><span class="nf">__errno</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>There is a unique, private <code class="docutils literal notranslate"><span class="pre">errno</span></code> value for each NuttX task. However,
the implementation of <code class="docutils literal notranslate"><span class="pre">errno</span></code> differs somewhat from the use of
<code class="docutils literal notranslate"><span class="pre">errno</span></code> in most multi-threaded process environments: In NuttX, each
pthread will also have its own private copy of <code class="docutils literal notranslate"><span class="pre">errno</span></code> and the
<code class="docutils literal notranslate"><span class="pre">errno</span></code> will not be shared between pthreads. This is, perhaps,
non-standard but promotes better thread independence.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>A pointer to the thread-specific <code class="docutils literal notranslate"><span class="pre">errno</span></code> value.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="user-interface-structures">
<h2>User Interface Structures<a class="headerlink" href="#user-interface-structures" title="Permalink to this headline">¶</a></h2>
<dl class="c type">
<dt id="c.main_t">
<em class="property">typedef </em>int (*<code class="sig-name descname">main_t</code>)<span class="sig-paren">(</span>int argc, char *argv[]<span class="sig-paren">)</span><a class="headerlink" href="#c.main_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#c.main_t" title="main_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">main_t</span></code></a> defines the type of a task entry point. <a class="reference internal" href="#c.main_t" title="main_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">main_t</span></code></a> is declared in
<code class="docutils literal notranslate"><span class="pre">sys/types.h</span></code>.</p>
<dl class="c struct">
<dt id="c.sched_param">
<em class="property">struct </em><code class="sig-name descname">sched_param</code><a class="headerlink" href="#c.sched_param" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This structure is used to pass scheduling priorities to and from NuttX:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">sched_param</span>
<span class="p">{</span>
 <span class="kt">int</span> <span class="n">sched_priority</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="c struct">
<dt id="c.timespec">
<em class="property">struct </em><code class="sig-name descname">timespec</code><a class="headerlink" href="#c.timespec" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This structure is used to pass timing information between the NuttX and
a user application:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">timespec</span>
<span class="p">{</span>
 <span class="kt">time_t</span> <span class="n">tv_sec</span><span class="p">;</span>  <span class="cm">/* Seconds */</span>
 <span class="kt">long</span>   <span class="n">tv_nsec</span><span class="p">;</span> <span class="cm">/* Nanoseconds */</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="c struct">
<dt id="c.mq_attr">
<em class="property">struct </em><code class="sig-name descname">mq_attr</code><a class="headerlink" href="#c.mq_attr" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This structure is used to communicate message queue attributes between
NuttX and a MoBY application:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">mq_attr</span> <span class="p">{</span>
 <span class="kt">size_t</span>       <span class="n">mq_maxmsg</span><span class="p">;</span>   <span class="cm">/* Max number of messages in queue */</span>
 <span class="kt">size_t</span>       <span class="n">mq_msgsize</span><span class="p">;</span>  <span class="cm">/* Max message size */</span>
 <span class="kt">unsigned</span>     <span class="n">mq_flags</span><span class="p">;</span>    <span class="cm">/* Queue flags */</span>
 <span class="kt">size_t</span>       <span class="n">mq_curmsgs</span><span class="p">;</span>  <span class="cm">/* Number of messages currently in queue */</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="c struct">
<dt id="c.sigaction">
<em class="property">struct </em><code class="sig-name descname">sigaction</code><br /></dt>
<dd></dd></dl>

<p>The following structure defines the action to take for given signal:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">sigaction</span>
<span class="p">{</span>
 <span class="k">union</span>
 <span class="p">{</span>
   <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">_sa_handler</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>
   <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">_sa_sigaction</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">siginfo_t</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
 <span class="p">}</span> <span class="n">sa_u</span><span class="p">;</span>
 <span class="kt">sigset_t</span>           <span class="n">sa_mask</span><span class="p">;</span>
 <span class="kt">int</span>                <span class="n">sa_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define sa_handler   sa_u._sa_handler</span>
<span class="cp">#define sa_sigaction sa_u._sa_sigaction</span>
</pre></div>
</div>
<dl class="c struct">
<dt id="c.siginfo">
<em class="property">struct </em><code class="sig-name descname">siginfo</code><a class="headerlink" href="#c.siginfo" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt id="c.siginfo_t">
<em class="property">type </em><code class="sig-name descname">siginfo_t</code><a class="headerlink" href="#c.siginfo_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>The following types is used to pass parameters to/from signal handlers:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">siginfo</span>
<span class="p">{</span>
 <span class="kt">int</span>          <span class="n">si_signo</span><span class="p">;</span>
 <span class="kt">int</span>          <span class="n">si_code</span><span class="p">;</span>
 <span class="k">union</span> <span class="n">sigval</span> <span class="n">si_value</span><span class="p">;</span>
<span class="p">}</span> <span class="kt">siginfo_t</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c union">
<dt id="c.sigval">
<em class="property">union </em><code class="sig-name descname">sigval</code><a class="headerlink" href="#c.sigval" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>This defines the type of the struct siginfo si_value field and is used
to pass parameters with signals.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">union</span> <span class="n">sigval</span>
<span class="p">{</span>
 <span class="kt">int</span>   <span class="n">sival_int</span><span class="p">;</span>
 <span class="kt">void</span> <span class="o">*</span><span class="n">sival_ptr</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="c struct">
<dt id="c.sigevent">
<em class="property">struct </em><code class="sig-name descname">sigevent</code><a class="headerlink" href="#c.sigevent" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p>The following is used to attach a signal to a message queue to notify a
task when a message is available on a queue.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">sigevent</span>
<span class="p">{</span>
 <span class="kt">int</span>          <span class="n">sigev_signo</span><span class="p">;</span>
 <span class="k">union</span> <span class="n">sigval</span> <span class="n">sigev_value</span><span class="p">;</span>
 <span class="kt">int</span>          <span class="n">sigev_notify</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, The Apache Software Foundation

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>