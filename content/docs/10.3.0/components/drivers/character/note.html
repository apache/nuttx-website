<!--
 Documentation/_templates/layout.html

 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.  The
 ASF licenses this file to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance with the
 License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 License for the specific language governing permissions and limitations
 under the License.
-->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Note Driver Interface &mdash; NuttX latest documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="FOC Driver Interface" href="foc.html" />
    <link rel="prev" title="Keyboard/Keypad Drivers" href="keypad.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  
    <a href="../../../index.html" class="icon icon-home"> NuttX
  

  
  </a>

  <!-- this version selector is quite ugly, should be probably replaced by something
       more modern -->

  <div class="version-selector">
    <select onchange="javascript:location.href = this.value;">
    
    <option value="../../../../latest" selected="selected">latest</option>
    
    <option value="../../../../10.0.0" >10.0.0</option>
    
    <option value="../../../../10.0.1" >10.0.1</option>
    
    <option value="../../../../10.1.0" >10.1.0</option>
    
    <option value="../../../../10.2.0" >10.2.0</option>
    
    <option value="../../../../10.3.0" >10.3.0</option>
    
    <option value="../../../../11.0.0" >11.0.0</option>
    
    <option value="../../../../12.0.0" >12.0.0</option>
    
    <option value="../../../../12.1.0" >12.1.0</option>
    
    <option value="../../../../12.2.0" >12.2.0</option>
    
    <option value="../../../../12.2.1" >12.2.1</option>
    
    <option value="../../../../12.3.0" >12.3.0</option>
    
    <option value="../../../../12.4.0" >12.4.0</option>
    
    </select>
  </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/inviolables.html">The Inviolable Principles of NuttX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Supported Platforms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">OS Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../power.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../binfmt.html">Binary Loader</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Device Drivers</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Character Device Drivers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="serial.html">Serial Device Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="touchscreen.html">Touchscreen Device Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="analog.html">Analog (ADC/DAC) Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="pwm.html">PWM Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="can.html">CAN Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="quadrature.html">Quadrature Encoder Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="timer.html">Timer Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtc.html">RTC Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="watchdog.html">Watchdog Timer Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="keypad.html">Keyboard/Keypad Drivers</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Note Driver Interface</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#notectl-device-dev-notectl">Notectl Device (<code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code>)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#noteram-device-dev-note">Noteram Device (<code class="docutils literal notranslate"><span class="pre">/dev/note</span></code>)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#filter-control-apis">Filter control APIs</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="foc.html">FOC Driver Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../block/index.html">Block Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special/index.html">Specialized Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#lower-half-and-upper-half">Lower-half and upper-half</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystem.html">NuttX File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nxflat.html">NXFLAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nxgraphics/index.html">NX Graphics Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nxwidgets.html">NxWidgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../paging.html">On-Demand Paging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NuttX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">OS Components</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Device Drivers</a></li>
          <li class="breadcrumb-item"><a href="index.html">Character Device Drivers</a></li>
      <li class="breadcrumb-item active">Note Driver Interface</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/components/drivers/character/note.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="note-driver-interface">
<h1>Note Driver Interface<a class="headerlink" href="#note-driver-interface" title="Permalink to this heading"></a></h1>
<p>Note driver is the interface to access the instrumentation data.
The following devices are provided.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#notectl"><span class="std std-ref">Notectl Device (/dev/notectl)</span></a></p></li>
<li><p><a class="reference internal" href="#noteram"><span class="std std-ref">Noteram Device (/dev/note)</span></a></p></li>
</ul>
<section id="notectl-device-dev-notectl">
<span id="notectl"></span><h2>Notectl Device (<code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code>)<a class="headerlink" href="#notectl-device-dev-notectl" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code> is the device to control an instrumentation filter in NuttX kernel.
The device has only ioctl function to control the filter.</p>
</div></blockquote>
<section id="dev-notectl-header-files">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code> Header Files<a class="headerlink" href="#dev-notectl-header-files" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The header file <code class="docutils literal notranslate"><span class="pre">include/nuttx/note/notectl_driver.h</span></code> provides the interface definitions of the device.</p>
</div></blockquote>
</section>
<section id="dev-notectl-data-structures">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code> Data Structures<a class="headerlink" href="#dev-notectl-data-structures" title="Permalink to this heading"></a></h3>
<dl class="c struct">
<dt class="sig sig-object c" id="c.note_filter_mode_s">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">note_filter_mode_s</span></span></span><a class="headerlink" href="#c.note_filter_mode_s" title="Permalink to this definition"></a><br /></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">note_filter_mode_s</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flag</span><span class="p">;</span><span class="w">          </span><span class="cm">/* Filter mode flag */</span>
<span class="cp">#ifdef CONFIG_SMP</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cpuset</span><span class="p">;</span><span class="w">        </span><span class="cm">/* The set of monitored CPUs */</span>
<span class="cp">#endif</span>
<span class="p">};</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">flag</span></code> : Filter mode flag. The bitwise OR of the following defines are available.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_ENABLE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_MODE_FLAG_ENABLE</span></span></span><a class="headerlink" href="#c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_ENABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable instrumentation</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_SYSCALL">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_MODE_FLAG_SYSCALL</span></span></span><a class="headerlink" href="#c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_SYSCALL" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable syscall instrumentation</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_IRQ">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_MODE_FLAG_IRQ</span></span></span><a class="headerlink" href="#c.note_filter_mode_s.NOTE_FILTER_MODE_FLAG_IRQ" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable IRQ instrumentaiton</p>
</dd></dl>

</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpuset</span></code> : (SMP only) Monitor only CPUs in the bitset. Bit 0=CPU0, Bit1=CPU1, etc.</p></li>
</ul>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.note_filter_syscall_s">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">note_filter_syscall_s</span></span></span><a class="headerlink" href="#c.note_filter_syscall_s" title="Permalink to this definition"></a><br /></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">note_filter_syscall_s</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">syscall_mask</span><span class="p">[];</span>
<span class="p">};</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">syscall_mask</span></code> : A bitmap array of the syscall filter. If a bit is set, the corresponding syscall is not recorded.
The following helper macros are available:</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_SET">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_SYSCALLMASK_SET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_SET" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set syscall number <cite>nr</cite> as masked. <cite>s</cite> specifies the variable of <cite>struct note_filter_syscall_s</cite></p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_CLR">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_SYSCALLMASK_CLR</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_CLR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set syscall number <cite>nr</cite> as unmasked.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_ISSET">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_SYSCALLMASK_ISSET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_ISSET" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check whether syscall number <cite>nr</cite> is masked or not. True if masked.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_ZERO">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_SYSCALLMASK_ZERO</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_syscall_s.NOTE_FILTER_SYSCALLMASK_ZERO" title="Permalink to this definition"></a><br /></dt>
<dd><p>Clear all masks.</p>
</dd></dl>

</li>
</ul>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.note_filter_irq_s">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">note_filter_irq_s</span></span></span><a class="headerlink" href="#c.note_filter_irq_s" title="Permalink to this definition"></a><br /></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">note_filter_irq_s</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">irq_mask</span><span class="p">[];</span>
<span class="p">};</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">irq_mask</span></code> : A bitmap array of the IRQ filter. If a bit is set, the corresponding IRQ is not recorded.
The following helper macros are available:</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_irq_s.NOTE_FILTER_IRQMASK_SET">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_IRQMASK_SET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_irq_s.NOTE_FILTER_IRQMASK_SET" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set IRQ number <cite>nr</cite> as masked. <cite>s</cite> specifies the variable of <cite>struct note_filter_irq_s</cite></p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_irq_s.NOTE_FILTER_IRQMASK_CLR">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_IRQMASK_CLR</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_irq_s.NOTE_FILTER_IRQMASK_CLR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set IRQ number <cite>nr</cite> as unmasked.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_irq_s.NOTE_FILTER_IRQMASK_ISSET">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_IRQMASK_ISSET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">nr</span></span>, <span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_irq_s.NOTE_FILTER_IRQMASK_ISSET" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check whether IRQ number <cite>nr</cite> is masked or not. True if masked.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.note_filter_irq_s.NOTE_FILTER_IRQMASK_ZERO">
<span class="sig-name descname"><span class="n"><span class="pre">NOTE_FILTER_IRQMASK_ZERO</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.note_filter_irq_s.NOTE_FILTER_IRQMASK_ZERO" title="Permalink to this definition"></a><br /></dt>
<dd><p>Clear all masks.</p>
</dd></dl>

</li>
</ul>
</dd></dl>

</section>
<section id="dev-notectl-ioctls">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/notectl</span></code> Ioctls<a class="headerlink" href="#dev-notectl-ioctls" title="Permalink to this heading"></a></h3>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_GETMODE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_GETMODE</span></span></span><a class="headerlink" href="#c.NOTECTL_GETMODE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get note filter mode</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A writable pointer to <a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_mode_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and current note filter mode is stored into the given pointer.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_SETMODE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_SETMODE</span></span></span><a class="headerlink" href="#c.NOTECTL_SETMODE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set note filter mode</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A read-only pointer to <a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_mode_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and the given filter mode is set as the current settings.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_GETSYSCALLFILTER">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_GETSYSCALLFILTER</span></span></span><a class="headerlink" href="#c.NOTECTL_GETSYSCALLFILTER" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get syscall filter setting</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A writable pointer to <a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_syscall_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and current syscall filter mode is stored into the given pointer.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_SETSYSCALLFILTER">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_SETSYSCALLFILTER</span></span></span><a class="headerlink" href="#c.NOTECTL_SETSYSCALLFILTER" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set syscall filter setting</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A read-only pointer to <a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_syscall_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and the given syscall filter mode is set as the current settings.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_GETIRQFILTER">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_GETIRQFILTER</span></span></span><a class="headerlink" href="#c.NOTECTL_GETIRQFILTER" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get IRQ filter setting</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A writable pointer to <a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_irq_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and current IRQ filter mode is stored into the given pointer.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTECTL_SETIRQFILTER">
<span class="sig-name descname"><span class="n"><span class="pre">NOTECTL_SETIRQFILTER</span></span></span><a class="headerlink" href="#c.NOTECTL_SETIRQFILTER" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set IRQ filter setting</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A read-only pointer to <a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_irq_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and the given IRQ filter mode is set as the current settings.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="noteram-device-dev-note">
<span id="noteram"></span><h2>Noteram Device (<code class="docutils literal notranslate"><span class="pre">/dev/note</span></code>)<a class="headerlink" href="#noteram-device-dev-note" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/dev/note</span></code> is the device to get the trace (instrumentation) data.
The device has read function to get the data and ioctl function to control the buffer mode.</p>
</div></blockquote>
<section id="dev-note-header-files">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/note</span></code> Header Files<a class="headerlink" href="#dev-note-header-files" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>The header file <code class="docutils literal notranslate"><span class="pre">include/nuttx/note/noteram_driver.h</span></code> provides the interface definitions of the device.</p>
</div></blockquote>
</section>
<section id="dev-note-data-structures">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/note</span></code> Data Structures<a class="headerlink" href="#dev-note-data-structures" title="Permalink to this heading"></a></h3>
<dl class="c struct">
<dt class="sig sig-object c" id="c.noteram_get_taskname_s">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">noteram_get_taskname_s</span></span></span><a class="headerlink" href="#c.noteram_get_taskname_s" title="Permalink to this definition"></a><br /></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">noteram_get_taskname_s</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">taskname</span><span class="p">[</span><span class="n">CONFIG_TASK_NAME_SIZE</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span></code> : Task ID to get the task name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">taskname</span></code> : The task name string corresponding to given pid.</p></li>
</ul>
</dd></dl>

</section>
<section id="dev-note-ioctls">
<h3><code class="docutils literal notranslate"><span class="pre">/dev/note</span></code> Ioctls<a class="headerlink" href="#dev-note-ioctls" title="Permalink to this heading"></a></h3>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_CLEAR">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_CLEAR</span></span></span><a class="headerlink" href="#c.NOTERAM_CLEAR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Clear all contents of the circular buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>Ignored</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Always returns 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_GETMODE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_GETMODE</span></span></span><a class="headerlink" href="#c.NOTERAM_GETMODE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get overwrite mode</p>
<dl class="field-list">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A writable pointer to <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>.
The overwrite mode takes one of the following values.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_DISABLE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_MODE_OVERWRITE_DISABLE</span></span></span><a class="headerlink" href="#c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_DISABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Overwrite mode is disabled. When the buffer is full, accepting the data will be stopped.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_ENABLE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_MODE_OVERWRITE_ENABLE</span></span></span><a class="headerlink" href="#c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_ENABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Overwrite mode is enabled.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_OVERFLOW">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_MODE_OVERWRITE_OVERFLOW</span></span></span><a class="headerlink" href="#c.NOTERAM_GETMODE.NOTERAM_MODE_OVERWRITE_OVERFLOW" title="Permalink to this definition"></a><br /></dt>
<dd><p>Overwrite mode is disabled and the buffer is already full.</p>
</dd></dl>

</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and current overwrite mode is stored into the given pointer.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_SETMODE">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_SETMODE</span></span></span><a class="headerlink" href="#c.NOTERAM_SETMODE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set overwrite mode</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A read-only pointer to <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and the given overwriter mode is set as the current settings.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NOTERAM_GETTASKNAME">
<span class="sig-name descname"><span class="n"><span class="pre">NOTERAM_GETTASKNAME</span></span></span><a class="headerlink" href="#c.NOTERAM_GETTASKNAME" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get task name string</p>
<dl class="field-list simple">
<dt class="field-odd">Argument<span class="colon">:</span></dt>
<dd class="field-odd"><p>A writable pointer to <a class="reference internal" href="#c.noteram_get_taskname_s" title="noteram_get_taskname_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">noteram_get_taskname_s</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If success, 0 (<code class="docutils literal notranslate"><span class="pre">OK</span></code>) is returned and the task name corresponding to given pid is stored into the given pointer.
If failed, a negated <code class="docutils literal notranslate"><span class="pre">errno</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="filter-control-apis">
<h2>Filter control APIs<a class="headerlink" href="#filter-control-apis" title="Permalink to this heading"></a></h2>
<p>The following APIs are the functions to control note filters directly.
These are kernel APIs and application can use them only in FLAT build.</p>
<p>The header file <code class="docutils literal notranslate"><span class="pre">include/nuttx/sched_note.h</span></code> is needed to use the following APIs.</p>
<section id="api-description">
<h3>API description<a class="headerlink" href="#api-description" title="Permalink to this heading"></a></h3>
<dl class="c function">
<dt class="sig sig-object c" id="c.sched_note_filter_mode">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sched_note_filter_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><span class="n"><span class="pre">note_filter_mode_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">oldm</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><span class="n"><span class="pre">note_filter_mode_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">newm</span></span><span class="sig-paren">)</span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.sched_note_filter_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set and get note filter mode.
(Same as <a class="reference internal" href="#c.NOTECTL_GETMODE" title="NOTECTL_GETMODE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_GETMODE</span></code></a> / <a class="reference internal" href="#c.NOTECTL_SETMODE" title="NOTECTL_SETMODE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_SETMODE</span></code></a> ioctls)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oldm</strong> – A writable pointer to <a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_mode_s</span></code></a> to get current filter mode.
If 0, no data is written.</p></li>
<li><p><strong>newm</strong> – A read-only pointer to <a class="reference internal" href="#c.note_filter_mode_s" title="note_filter_mode_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_mode_s</span></code></a> which holds the new filter mode.
If 0, the filter mode is not updated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.sched_note_filter_syscall">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sched_note_filter_syscall</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><span class="n"><span class="pre">note_filter_syscall_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">oldf</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><span class="n"><span class="pre">note_filter_syscall_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">newf</span></span><span class="sig-paren">)</span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.sched_note_filter_syscall" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set and get syscall filter setting.
(Same as <a class="reference internal" href="#c.NOTECTL_GETSYSCALLFILTER" title="NOTECTL_GETSYSCALLFILTER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_GETSYSCALLFILTER</span></code></a> / <a class="reference internal" href="#c.NOTECTL_SETSYSCALLFILTER" title="NOTECTL_SETSYSCALLFILTER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_SETSYSCALLFILTER</span></code></a> ioctls)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oldf</strong> – A writable pointer to <a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_syscall_s</span></code></a> to get current syscall filter setting.
If 0, no data is written.</p></li>
<li><p><strong>newf</strong> – A read-only pointer to <a class="reference internal" href="#c.note_filter_syscall_s" title="note_filter_syscall_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_syscall_s</span></code></a> of the new syscall filter setting.
If 0, the setting is not updated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.sched_note_filter_irq">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sched_note_filter_irq</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><span class="n"><span class="pre">note_filter_irq_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">oldf</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><span class="n"><span class="pre">note_filter_irq_s</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">newf</span></span><span class="sig-paren">)</span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.sched_note_filter_irq" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set and get IRQ filter setting.
(Same as <a class="reference internal" href="#c.NOTECTL_GETIRQFILTER" title="NOTECTL_GETIRQFILTER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_GETIRQFILTER</span></code></a> / <a class="reference internal" href="#c.NOTECTL_SETIRQFILTER" title="NOTECTL_SETIRQFILTER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NOTECTL_SETIRQFILTER</span></code></a> ioctls)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oldf</strong> – A writable pointer to <a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_irq_s</span></code></a> to get current IRQ filter setting.
If 0, no data is written.</p></li>
<li><p><strong>newf</strong> – A read-only pointer to <a class="reference internal" href="#c.note_filter_irq_s" title="note_filter_irq_s"><code class="xref c c-struct docutils literal notranslate"><span class="pre">note_filter_irq_s</span></code></a> of the new IRQ filter setting.
If 0, the setting is not updated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="keypad.html" class="btn btn-neutral float-left" title="Keyboard/Keypad Drivers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="foc.html" class="btn btn-neutral float-right" title="FOC Driver Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The Apache Software Foundation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>